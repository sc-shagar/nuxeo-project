/*! For license information please see spreadsheet.app.bundle.js.LICENSE.txt */
(()=>{var e={11529:()=>{Handsontable.DataMap.prototype.get=function(e,t){if(e=Handsontable.hooks.execute(this.instance,"modifyRow",e),"string"==typeof t&&t.indexOf(".")>-1){const n=t.split(".");let o=this.dataSource[e];if(!o)return null;for(let e=0,t=n.length;e<t;e++)if(o=o[n[e]],null==o)return null;return o}return"function"==typeof t?t(this.dataSource.slice(e,e+1)[0]):this.dataSource[e]?this.dataSource[e][t]:null},Handsontable.DataMap.prototype.set=function(e,t,n,o){if(e=Handsontable.hooks.execute(this.instance,"modifyRow",e,o||"datamapGet"),"string"==typeof t&&t.indexOf(".")>-1){const o=t.split(".");let r,i,s=this.dataSource[e];for(r=0,i=o.length-1;r<i;r++)null==s[o[r]]&&(s[o[r]]={}),s=s[o[r]];s[o[r]]=n}else"function"==typeof t?t(this.dataSource.slice(e,e+1)[0],n):this.dataSource[e][t]=n}},42346:(e,t,n)=>{var o=n(95081);const r=Handsontable.editors.TextEditor.prototype.extend();r.prototype.prepare=function(e,t,n,r,i,s){Handsontable.editors.TextEditor.prototype.prepare.apply(this,arguments),this.options={},this.cellProperties.select2Options&&(this.options=o.extend(this.options,s.select2Options))},r.prototype.createElements=function(){this.$body=o(document.body),this.wtDom=Handsontable.Dom,this.TEXTAREA=document.createElement("input"),this.TEXTAREA.setAttribute("type","text"),this.$textarea=o(this.TEXTAREA),this.wtDom.addClass(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.TEXTAREA_PARENT=document.createElement("DIV"),this.wtDom.addClass(this.TEXTAREA_PARENT,"handsontableInputHolder"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.textareaParentStyle.top=0,this.textareaParentStyle.left=0,this.textareaParentStyle.display="none",this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.instance.rootElement[0].appendChild(this.TEXTAREA_PARENT);const e=this;Handsontable.hooks.add("afterRender",(()=>{e.instance._registerTimeout("refresh_editor_dimensions",(()=>{e.refreshDimensions()}),0)}))};const i=function(){this.close(),this.finishEditing()},s=function(){this.close(),this.finishEditing()},a=function(e){const t=this.getActiveEditor(),n=Handsontable.helper.keyCode,o=(e.ctrlKey||e.metaKey)&&!e.altKey;if(e.target===t.TEXTAREA&&!e.isImmediatePropagationStopped())if(17!==e.keyCode&&224!==e.keyCode&&91!==e.keyCode&&93!==e.keyCode)switch(e.keyCode){case n.ENTER:const r=t.instance.getSelected(),i=!(r[0]===r[2]&&r[1]===r[3]);(o&&!i||e.altKey)&&(t.isOpened()?(t.val(`${t.val()}\n`),t.focus()):t.beginEditing(`${t.originalValue}\n`),e.stopImmediatePropagation()),e.preventDefault();break;case n.A:case n.X:case n.C:case n.V:if(o){e.stopImmediatePropagation();break}case n.HOME:case n.END:e.stopImmediatePropagation()}else e.stopImmediatePropagation()};r.prototype.open=function(){this.refreshDimensions(),this.textareaParentStyle.display="block",this.instance.addHook("beforeKeyDown",a),this.$textarea.css({height:o(this.TD).height(),"min-width":o(this.TD).outerWidth()}),this.$textarea.show(),this.$textarea.select2(this.options).on("change",i.bind(this)).on("select2-close",s.bind(this))},r.prototype.close=function(){this.instance.listen(),this.instance.removeHook("beforeKeyDown",a),this.$textarea.off(),this.$textarea.hide(),Handsontable.editors.TextEditor.prototype.close.apply(this,arguments)},r.prototype.val=function(e){if(void 0===e)return this.$textarea.val();this.$textarea.val(e)},r.prototype.focus=function(){this.instance.listen()},r.prototype.beginEditing=function(...e){const{onBeginEditing:t}=this.instance.getSettings();t&&!1===t()||Handsontable.editors.TextEditor.prototype.beginEditing.apply(this,e)},r.prototype.finishEditing=function(...e){return this.instance.listen(),Handsontable.editors.TextEditor.prototype.finishEditing.apply(this,e)},Handsontable.editors.Select2Editor=r,Handsontable.editors.registerEditor("select2",r)},49735:function(e,t,n){var o,r=n(95081);window.Handsontable=Handsontable={plugins:{},helper:{}},function(e,n,o){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.filter||(Array.prototype.filter=function(e,t){if(null==this)throw new TypeError;if("function"!=typeof e)throw new TypeError;/NodeList/i.test((t=t||this).item)&&(t=function(e){for(var t=[],n=0,o=e.length;n<o;n++)t[n]=e[n];return t}(t));var n,o,r=t.length,i=[];for(n=0;n<r;n+=1)t.hasOwnProperty(n)&&(o=t[n],e.call(t,o,n,t)&&i.push(o));return i}),"undefined"==typeof WeakMap&&function(){var e=Object.defineProperty;try{var t=!0;e((function(){}),"foo",{})}catch(e){t=!1}var o=+new Date%1e9,r=function(){this.name="__st"+(1e9*Math.random()>>>0)+o+++"__",t||(this._wmCache=[])};r.prototype=t?{set:function(t,n){var o=t[this.name];o&&o[0]===t?o[1]=n:e(t,this.name,{value:[t,n],writable:!0})},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){this.set(e,void 0)}}:{set:function(e,t){if(void 0!==e&&void 0!==t){for(var n=0,o=this._wmCache.length;n<o;n++)if(this._wmCache[n].key==e)return void(this._wmCache[n].value=t);this._wmCache.push({key:e,value:t})}},get:function(e){if(void 0!==e)for(var t=0,n=this._wmCache.length;t<n;t++)if(this._wmCache[t].key==e)return this._wmCache[t].value},delete:function(e){if(void 0!==e)for(var t=0,n=this._wmCache.length;t<n;t++)this._wmCache[t].key==e&&Array.prototype.slice.call(this._wmCache,t,1)}},n.WeakMap=r}(),o.activeGuid=null,o.Core=function(t,r){var i,s,a,c,u,h=this,d=function(){},f=e(document.documentElement),p=e(document.body);function g(){var e=!1;return{validatorsInQueue:0,addValidatorToQueue:function(){this.validatorsInQueue++,e=!1},removeValidatorFormQueue:function(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty:function(){},checkIfQueueIsEmpty:function(){0==this.validatorsInQueue&&0==e&&(e=!0,this.onQueueEmpty())}}}function m(t,n,r){var i=new g;i.onQueueEmpty=function(){var i;t.length&&("function"==typeof(i=o.hooks.execute(h,"beforeChange",t,n))?e.when(result).then((function(){r()})):!1===i&&t.splice(0,t.length)),"function"!=typeof i&&r()};for(var a=t.length-1;a>=0;a--)if(null===t[a])t.splice(a,1);else{var l=t[a][0],c=s.propToCol(t[a][1]),u=h.runHooksAndReturn("modifyCol",c),d=h.getCellMeta(l,u);if("numeric"===d.type&&"string"==typeof t[a][3]&&t[a][3].length>0&&/^-?[\d\s]*(\.|\,)?\d*$/.test(t[a][3])){var f=t[a][3].length;void 0===d.language||t[a][3].indexOf(".")===f-3&&-1===t[a][3].indexOf(",")?numeral.language("en"):numeral.language(d.language),t[a][3]=numeral().unformat(t[a][3]||"0")}h.getCellValidator(d)&&(i.addValidatorToQueue(),h.validateCell(t[a][3],d,function(e,n){return function(o){if("boolean"!=typeof o)throw new Error("Validation error: result is not boolean");!1===o&&!1===n.allowInvalid&&(t.splice(e,1),n.valid=!0,--e),i.removeValidatorFormQueue()}}(a,d),n))}i.checkIfQueueIsEmpty()}function y(e,t){var n=e.length-1;if(!(n<0)){for(;0<=n;n--)if(null!==e[n]){if(null!=e[n][2]||null!=e[n][3]){if(i.settings.minSpareRows)for(;e[n][0]>h.countRows()-1;)s.createRow();if("array"===h.dataType&&i.settings.minSpareCols)for(;s.propToCol(e[n][1])>h.countCols()-1;)s.createCol();s.set(e[n][0],e[n][1],e[n][3])}}else e.splice(n,1);h.forceFullRender=!0,a.adjustRowsAndCols(),o.hooks.run(h,"beforeChangeRender",e,t),c.refreshBorders(null,!0),o.hooks.run(h,"afterChange",e,t||"edit")}}function v(t,n,o){return"object"==typeof t?t:e.isPlainObject(o)?o:[[t,n,o]]}function b(e){if(e.hasOwnProperty("type")){var t,n={};if("object"==typeof e.type)t=e.type;else if("string"==typeof e.type&&void 0===(t=o.cellTypes[e.type]))throw new Error('You declared cell type "'+e.type+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');for(var r in t)t.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(n[r]=t[r]);return n}}o.helper.extend(d.prototype,l.prototype),o.helper.extend(d.prototype,r),o.helper.extend(d.prototype,b(r)),this.rootElement=t,this.container=document.createElement("DIV"),this.container.className="htContainer",t.prepend(this.container),this.container=e(this.container),this.guid="ht_"+o.helper.randomString(),this.rootElement[0].id&&"ht_"!==this.rootElement[0].id.substring(0,3)||(this.rootElement[0].id=this.guid),i={cellSettings:[],columnSettings:[],columnsSettingConflicts:["data","width"],settings:new d,selRange:null,isPopulated:null,scrollable:null,firstRun:!0},a={alter:function(e,t,n,r,l){var u;switch(n=n||1,e){case"insert_row":(u=s.createRow(t,n))&&(c.isSelected()&&i.selRange.from.row>=t?(i.selRange.from.row=i.selRange.from.row+u,c.transformEnd(u,0)):c.refreshBorders());break;case"insert_col":if(u=s.createCol(t,n)){if(o.helper.isArray(h.getSettings().colHeaders)){var d=[t,0];d.length+=u,Array.prototype.splice.apply(h.getSettings().colHeaders,d)}c.isSelected()&&i.selRange.from.col>=t?(i.selRange.from.col=i.selRange.from.col+u,c.transformEnd(0,u)):c.refreshBorders()}break;case"remove_row":s.removeRow(t,n),i.cellSettings.splice(t,n),a.adjustRowsAndCols(),c.refreshBorders();break;case"remove_col":s.removeCol(t,n);for(var f=0,p=s.getAll().length;f<p;f++)f in i.cellSettings&&i.cellSettings[f].splice(t,n);o.helper.isArray(h.getSettings().colHeaders)&&(void 0===t&&(t=-1),h.getSettings().colHeaders.splice(t,n)),i.columnSettings.splice(t,n),a.adjustRowsAndCols(),c.refreshBorders();break;default:throw new Error('There is no such action "'+e+'"')}l||a.adjustRowsAndCols()},adjustRowsAndCols:function(){var e,t,n,o;if((t=h.countRows())<i.settings.minRows)for(e=0;e<i.settings.minRows-t;e++)s.createRow(h.countRows(),1,!0);if((n=h.countEmptyRows(!0))<i.settings.minSpareRows)for(;n<i.settings.minSpareRows&&h.countRows()<i.settings.maxRows;n++)s.createRow(h.countRows(),1,!0);if(o=h.countEmptyCols(!0),!i.settings.columns&&h.countCols()<i.settings.minCols)for(;h.countCols()<i.settings.minCols;o++)s.createCol(h.countCols(),1,!0);if(!i.settings.columns&&"array"===h.dataType&&o<i.settings.minSpareCols)for(;o<i.settings.minSpareCols&&h.countCols()<i.settings.maxCols;o++)s.createCol(h.countCols(),1,!0);var r=h.countRows(),a=h.countCols();if(0!==r&&0!==a||c.deselect(),c.isSelected()){var l,u=i.selRange.from.row,d=i.selRange.from.col,f=i.selRange.to.row,p=i.selRange.to.col;u>r-1?(l=!0,f>(u=r-1)&&(f=u)):f>r-1&&(l=!0,u>(f=r-1)&&(u=f)),d>a-1?(l=!0,p>(d=a-1)&&(p=d)):p>a-1&&(l=!0,d>(p=a-1)&&(d=p)),l&&h.selectCell(u,d,f,p)}},populateFromArray:function(e,t,n,r,s){var a,l,c,u,d,f,p,g,m=[],y={};if(0===(l=t.length))return!1;switch(s){case"shift_down":for(d=n?n.col-e.col+1:0,f=n?n.row-e.row+1:0,c=0,u=(t=o.helper.translateRowsToColumns(t)).length,p=Math.max(u,d);c<p;c++)if(c<u){for(a=0,l=t[c].length;a<f-l;a++)t[c].push(t[c][a%l]);t[c].unshift(e.col+c,e.row,0),h.spliceCol.apply(h,t[c])}else t[c%u][0]=e.col+c,h.spliceCol.apply(h,t[c%u]);break;case"shift_right":for(d=n?n.col-e.col+1:0,f=n?n.row-e.row+1:0,a=0,l=t.length,g=Math.max(l,f);a<g;a++)if(a<l){for(c=0,u=t[a].length;c<d-u;c++)t[a].push(t[a][c%u]);t[a].unshift(e.row+a,e.col,0),h.spliceRow.apply(h,t[a])}else t[a%l][0]=e.row+a,h.spliceRow.apply(h,t[a%l]);break;case"overwrite":default:for(y.row=e.row,y.col=e.col,a=0;a<l&&!(n&&y.row>n.row||!i.settings.minSpareRows&&y.row>h.countRows()-1||y.row>=i.settings.maxRows);a++){for(y.col=e.col,u=t[a]?t[a].length:0,c=0;c<u&&!(n&&y.col>n.col||!i.settings.minSpareCols&&y.col>h.countCols()-1||y.col>=i.settings.maxCols);c++)h.getCellMeta(y.row,y.col).readOnly||m.push([y.row,y.col,t[a][c]]),y.col++,n&&c===u-1&&(c=-1);y.row++,n&&a===l-1&&(a=-1)}h.setDataAtCell(m,null,null,r||"populateFromArray")}}},this.selection=c={inProgress:!1,selectedHeader:{cols:!1,rows:!1},setSelectedHeaders:function(e,t){h.selection.selectedHeader.rows=e,h.selection.selectedHeader.cols=t},begin:function(){h.selection.inProgress=!0},finish:function(){var e=h.getSelected();o.hooks.run(h,"afterSelectionEnd",e[0],e[1],e[2],e[3]),o.hooks.run(h,"afterSelectionEndByProp",e[0],h.colToProp(e[1]),e[2],h.colToProp(e[3])),h.selection.inProgress=!1},isInProgress:function(){return h.selection.inProgress},setRangeStart:function(e){o.hooks.run(h,"beforeSetRangeStart",e),i.selRange=new N(e,e,e),c.setRangeEnd(e)},setRangeEnd:function(e,t){o.hooks.run(h,"beforeSetRangeEnd",e),h.selection.begin(),i.selRange.to=new H(e.row,e.col),i.settings.multiSelect||(i.selRange.from=e),h.view.wt.selections.current.clear(),h.view.wt.selections.current.add(i.selRange.highlight),h.view.wt.selections.area.clear(),c.isMultiple()&&(h.view.wt.selections.area.add(i.selRange.from),h.view.wt.selections.area.add(i.selRange.to)),(i.settings.currentRowClassName||i.settings.currentColClassName)&&(h.view.wt.selections.highlight.clear(),h.view.wt.selections.highlight.add(i.selRange.from),h.view.wt.selections.highlight.add(i.selRange.to)),o.hooks.run(h,"afterSelection",i.selRange.from.row,i.selRange.from.col,i.selRange.to.row,i.selRange.to.col),o.hooks.run(h,"afterSelectionByProp",i.selRange.from.row,s.colToProp(i.selRange.from.col),i.selRange.to.row,s.colToProp(i.selRange.to.col)),!1!==t&&h.view.mainViewIsActive()&&h.view.scrollViewport(e),c.refreshBorders()},refreshBorders:function(e,t){t||u.destroyEditor(e),h.view.render(),c.isSelected()&&!t&&u.prepareEditor()},isMultiple:function(){var e=!(i.selRange.to.col===i.selRange.from.col&&i.selRange.to.row===i.selRange.from.row),t=o.hooks.execute(h,"afterIsMultipleSelection",e);if(e)return t},transformStart:function(e,t,n){var o=new H(e,t);h.runHooks("modifyTransformStart",o),i.selRange.highlight.row+e>h.countRows()-1?n&&i.settings.minSpareRows>0?h.alter("insert_row",h.countRows()):i.settings.autoWrapCol&&(o.row=1-h.countRows(),o.col=i.selRange.highlight.col+o.col==h.countCols()-1?1-h.countCols():1):i.settings.autoWrapCol&&i.selRange.highlight.row+o.row<0&&i.selRange.highlight.col+o.col>=0&&(o.row=h.countRows()-1,o.col=i.selRange.highlight.col+o.col==0?h.countCols()-1:-1),i.selRange.highlight.col+o.col>h.countCols()-1?n&&i.settings.minSpareCols>0?h.alter("insert_col",h.countCols()):i.settings.autoWrapRow&&(o.row=i.selRange.highlight.row+o.row==h.countRows()-1?1-h.countRows():1,o.col=1-h.countCols()):i.settings.autoWrapRow&&i.selRange.highlight.col+o.col<0&&i.selRange.highlight.row+o.row>=0&&(o.row=i.selRange.highlight.row+o.row==0?h.countRows()-1:-1,o.col=h.countCols()-1);var r=h.countRows(),s=h.countCols(),a=new H(i.selRange.highlight.row+o.row,i.selRange.highlight.col+o.col);a.row<0?a.row=0:a.row>0&&a.row>=r&&(a.row=r-1),a.col<0?a.col=0:a.col>0&&a.col>=s&&(a.col=s-1),c.setRangeStart(a)},transformEnd:function(e,t){var n=new H(e,t);h.runHooks("modifyTransformEnd",n);var o=h.countRows(),r=h.countCols(),s=new H(i.selRange.to.row+n.row,i.selRange.to.col+n.col);s.row<0?s.row=0:s.row>0&&s.row>=o&&(s.row=o-1),s.col<0?s.col=0:s.col>0&&s.col>=r&&(s.col=r-1),c.setRangeEnd(s)},isSelected:function(){return null!==i.selRange},inInSelection:function(e){return!!c.isSelected()&&i.selRange.includes(e)},deselect:function(){c.isSelected()&&(h.selection.inProgress=!1,i.selRange=null,h.view.wt.selections.current.clear(),h.view.wt.selections.area.clear(),(i.settings.currentRowClassName||i.settings.currentColClassName)&&h.view.wt.selections.highlight.clear(),u.destroyEditor(),c.refreshBorders(),o.hooks.run(h,"afterDeselect"))},selectAll:function(){i.settings.multiSelect&&(c.setRangeStart(new H(0,0)),c.setRangeEnd(new H(h.countRows()-1,h.countCols()-1),!1))},empty:function(){if(c.isSelected()){var e,t,n=i.selRange.getTopLeftCorner(),o=i.selRange.getBottomRightCorner(),r=[];for(e=n.row;e<=o.row;e++)for(t=n.col;t<=o.col;t++)h.getCellMeta(e,t).readOnly||r.push([e,t,""]);h.setDataAtCell(r)}}},this.init=function(){o.hooks.run(h,"beforeInit"),this.updateSettings(i.settings,!0),this.view=new o.TableView(this),u=new o.EditorManager(h,i,c,s),this.forceFullRender=!0,this.view.render(),"object"==typeof i.firstRun&&(o.hooks.run(h,"afterChange",i.firstRun[0],i.firstRun[1]),i.firstRun=!1),o.hooks.run(h,"afterInit")},this.validateCell=function(e,t,n,r){var i=h.getCellValidator(t);"[object RegExp]"===Object.prototype.toString.call(i)&&(i=function(e){return function(t,n){n(e.test(t))}}(i)),"function"==typeof i?(e=o.hooks.execute(h,"beforeValidate",e,t.row,t.prop,r),h._registerTimeout(setTimeout((function(){return i.call(t,e,(function(i){t.valid=i,i=o.hooks.execute(h,"afterValidate",i,e,t.row,t.prop,r),n(i)})),e}),0))):(t.valid=!0,n(!0))},this.setDataAtCell=function(e,t,n,o){var r,i,a,l=v(e,t,n),c=[];for(r=0,i=l.length;r<i;r++){if("object"!=typeof l[r])throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!=typeof l[r][1])throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");a=s.colToProp(l[r][1]),c.push([l[r][0],a,s.get(l[r][0],a),l[r][2]])}o||"object"!=typeof e||(o=t),m(c,o,(function(){y(c,o)}))},this.setDataAtRowProp=function(e,t,n,o){var r,i,a=v(e,t,n),l=[];for(r=0,i=a.length;r<i;r++)l.push([a[r][0],a[r][1],s.get(a[r][0],a[r][1]),a[r][2]]);o||"object"!=typeof e||(o=t),m(l,o,(function(){y(l,o)}))},this.listen=function(){o.activeGuid=h.guid,document.activeElement&&document.activeElement!==document.body?document.activeElement.blur():document.activeElement||document.body.focus()},this.unlisten=function(){o.activeGuid=null},this.isListening=function(){return o.activeGuid===h.guid},this.destroyEditor=function(e){c.refreshBorders(e)},this.populateFromArray=function(e,t,n,o,r,i,s){if("object"!=typeof n||"object"!=typeof n[0])throw new Error("populateFromArray parameter `input` must be an array of arrays");return a.populateFromArray(new H(e,t),n,"number"==typeof o?new H(o,r):null,i,s)},this.spliceCol=function(e,t,n){return s.spliceCol.apply(s,arguments)},this.spliceRow=function(e,t,n){return s.spliceRow.apply(s,arguments)},this.getSelected=function(){if(c.isSelected())return[i.selRange.from.row,i.selRange.from.col,i.selRange.to.row,i.selRange.to.col]},this.getSelectedRange=function(){if(c.isSelected())return i.selRange},this.render=function(){h.view&&(h.forceFullRender=!0,c.refreshBorders(null,!0))},this.loadData=function(e){if("object"==typeof e&&null!==e)e.push&&e.splice||(e=[e]);else{if(null!==e)throw new Error("loadData only accepts array of objects or array of arrays ("+typeof e+" given)");var t;e=[];for(var n=0,r=i.settings.startRows;n<r;n++){t=[];for(var l=0,c=i.settings.startCols;l<c;l++)t.push(null);e.push(t)}}i.isPopulated=!1,d.prototype.data=e,i.settings.dataSchema instanceof Array||e[0]instanceof Array?h.dataType="array":"function"==typeof i.settings.dataSchema?h.dataType="function":h.dataType="object",s=new o.DataMap(h,i,d),i.cellSettings.length=0,a.adjustRowsAndCols(),o.hooks.run(h,"afterLoadData"),i.firstRun?i.firstRun=[null,"loadData"]:(o.hooks.run(h,"afterChange",null,"loadData"),h.render()),i.isPopulated=!0},this.getData=function(e,t,n,o){return void 0===e?s.getAll():s.getRange(new H(e,t),new H(n,o),s.DESTINATION_RENDERER)},this.getCopyableData=function(e,t,n,o){return s.getCopyableText(new H(e,t),new H(n,o))},this.updateSettings=function(e,t){var n,r,l,u;if(void 0!==e.rows)throw new Error("'rows' setting is no longer supported. do you mean startRows, minRows or maxRows?");if(void 0!==e.cols)throw new Error("'cols' setting is no longer supported. do you mean startCols, minCols or maxCols?");for(n in e)"data"!==n&&(void 0!==o.hooks.hooks[n]||void 0!==o.hooks.legacy[n]?("function"==typeof e[n]||o.helper.isArray(e[n]))&&h.addHook(n,e[n]):!t&&e.hasOwnProperty(n)&&(d.prototype[n]=e[n]));if(void 0===e.data&&void 0===i.settings.data?h.loadData(null):void 0!==e.data?h.loadData(e.data):void 0!==e.columns&&s.createMap(),r=h.countCols(),i.cellSettings.length=0,r>0)for(n=0;n<r;n++)i.columnSettings[n]=o.helper.columnFactory(d,i.columnsSettingConflicts),l=i.columnSettings[n].prototype,d.prototype.columns&&(u=d.prototype.columns[n],o.helper.extend(l,u),o.helper.extend(l,b(u)));if(void 0!==e.cell)for(n in e.cell){var f=e.cell[n];h.setCellMetaObject(f.row,f.col,f)}if(o.hooks.run(h,"afterCellMetaReset"),void 0!==e.className&&(d.prototype.className&&h.rootElement.removeClass(d.prototype.className),e.className&&h.rootElement.addClass(e.className)),void 0!==e.height){var p=e.height;"function"==typeof p&&(p=p()),h.rootElement[0].style.height=p+"px"}if(void 0!==e.width){var g=e.width;"function"==typeof g&&(g=g()),h.rootElement[0].style.width=g+"px"}p&&(h.rootElement[0].style.overflow="auto"),t||o.hooks.run(h,"afterUpdateSettings"),a.adjustRowsAndCols(),h.view&&!i.firstRun&&(h.forceFullRender=!0,c.refreshBorders(null,!0))},this.getValue=function(){var e=h.getSelected();if(d.prototype.getValue){if("function"==typeof d.prototype.getValue)return d.prototype.getValue.call(h);if(e)return h.getData()[e[0]][d.prototype.getValue]}else if(e)return h.getDataAtCell(e[0],e[1])},this.getSettings=function(){return i.settings},this.clear=function(){c.selectAll(),c.empty()},this.alter=function(e,t,n,o,r){a.alter(e,t,n,o,r)},this.getCell=function(e,t){return h.view.getCellAtCoords(new H(e,t))},this.colToProp=function(e){return s.colToProp(e)},this.propToCol=function(e){return s.propToCol(e)},this.getDataAtCell=function(e,t){return s.get(e,s.colToProp(t))},this.getDataAtRowProp=function(e,t){return s.get(e,t)},this.getDataAtCol=function(e){var t=[];return t.concat.apply(t,s.getRange(new H(0,e),new H(i.settings.data.length-1,e),s.DESTINATION_RENDERER))},this.getDataAtProp=function(e){var t=[];return t.concat.apply(t,s.getRange(new H(0,s.propToCol(e)),new H(i.settings.data.length-1,s.propToCol(e)),s.DESTINATION_RENDERER))},this.getSourceDataAtCol=function(e){for(var t=[],n=i.settings.data,o=0;o<n.length;o++)t.push(n[o][e]);return t},this.getSourceDataAtRow=function(e){return i.settings.data[e]},this.getDataAtRow=function(e){return s.getRange(new H(e,0),new H(e,this.countCols()-1),s.DESTINATION_RENDERER)[0]},this.removeCellMeta=function(e,t,n){null!=h.getCellMeta(e,t)[n]&&delete i.cellSettings[e][t][n]},this.setCellMetaObject=function(e,t,n){if("object"==typeof n)for(var o in n){var r=o,i=n[o];this.setCellMeta(e,t,r,i)}},this.setCellMeta=function(e,t,n,r){i.cellSettings[e]||(i.cellSettings[e]=[]),i.cellSettings[e][t]||(i.cellSettings[e][t]=new i.columnSettings[t]),i.cellSettings[e][t][n]=r,o.hooks.run(h,"afterSetCellMeta",e,t,n,r)},this.getCellMeta=function(e,t){var n,r=s.colToProp(t);if(e=function(e){return o.hooks.execute(h,"modifyRow",e)}(e),t=function(e){return o.hooks.execute(h,"modifyCol",e)}(t),i.columnSettings[t]||(i.columnSettings[t]=o.helper.columnFactory(d,i.columnsSettingConflicts)),i.cellSettings[e]||(i.cellSettings[e]=[]),i.cellSettings[e][t]||(i.cellSettings[e][t]=new i.columnSettings[t]),(n=i.cellSettings[e][t]).row=e,n.col=t,n.prop=r,n.instance=h,o.hooks.run(h,"beforeGetCellMeta",e,t,n),o.helper.extend(n,b(n)),n.cells){var a=n.cells.call(n,e,t,r);a&&(o.helper.extend(n,a),o.helper.extend(n,b(a)))}return o.hooks.run(h,"afterGetCellMeta",e,t,n),n};var w=o.helper.cellMethodLookupFactory("renderer");function C(){throw new Error("This method cannot be called because this Handsontable instance has been destroyed")}this.getCellRenderer=function(e,t){var n=w.call(this,e,t);return o.renderers.getRenderer(n)},this.getCellEditor=o.helper.cellMethodLookupFactory("editor"),this.getCellValidator=o.helper.cellMethodLookupFactory("validator"),this.validateCells=function(e){var t=new g;t.onQueueEmpty=e;for(var n=h.countRows()-1;n>=0;){for(var o=h.countCols()-1;o>=0;)t.addValidatorToQueue(),h.validateCell(h.getDataAtCell(n,o),h.getCellMeta(n,o),(function(){t.removeValidatorFormQueue()}),"validateCells"),o--;n--}t.checkIfQueueIsEmpty()},this.getRowHeader=function(e){if(void 0===e){for(var t=[],n=0,o=h.countRows();n<o;n++)t.push(h.getRowHeader(n));return t}return"[object Array]"===Object.prototype.toString.call(i.settings.rowHeaders)&&void 0!==i.settings.rowHeaders[e]?i.settings.rowHeaders[e]:"function"==typeof i.settings.rowHeaders?i.settings.rowHeaders(e):i.settings.rowHeaders&&"string"!=typeof i.settings.rowHeaders&&"number"!=typeof i.settings.rowHeaders?e+1:i.settings.rowHeaders},this.hasRowHeaders=function(){return!!i.settings.rowHeaders},this.hasColHeaders=function(){if(void 0!==i.settings.colHeaders&&null!==i.settings.colHeaders)return!!i.settings.colHeaders;for(var e=0,t=h.countCols();e<t;e++)if(h.getColHeader(e))return!0;return!1},this.getColHeader=function(e){if(void 0===e){for(var t=[],n=0,r=h.countCols();n<r;n++)t.push(h.getColHeader(n));return t}var s=e;return e=o.hooks.execute(h,"modifyCol",e),i.settings.columns&&i.settings.columns[e]&&i.settings.columns[e].title?i.settings.columns[e].title:"[object Array]"===Object.prototype.toString.call(i.settings.colHeaders)&&void 0!==i.settings.colHeaders[e]?i.settings.colHeaders[e]:"function"==typeof i.settings.colHeaders?i.settings.colHeaders(e):i.settings.colHeaders&&"string"!=typeof i.settings.colHeaders&&"number"!=typeof i.settings.colHeaders?o.helper.spreadsheetColumnLabel(s):i.settings.colHeaders},this._getColWidthFromSettings=function(e){var t=h.getCellMeta(0,e),n=t.width;if(void 0!==n&&n!==i.settings.width||(n=t.colWidths),null!=n){switch(typeof n){case"object":n=n[e];break;case"function":n=n(e)}"string"==typeof n&&(n=parseInt(n,10))}return n},this.getColWidth=function(e){var t=h._getColWidthFromSettings(e);return t||(t=50),o.hooks.execute(h,"modifyColWidth",t,e)},this._getRowHeightFromSettings=function(e){var t=i.settings.rowHeights;if(null!=t){switch(typeof t){case"object":t=t[e];break;case"function":t=t(e)}"string"==typeof t&&(t=parseInt(t,10))}return t},this.getRowHeight=function(e){var t=h._getRowHeightFromSettings(e),n=h.checkIfRowIsOversized(e);return t=o.hooks.execute(h,"modifyRowHeight",t,e),n&&(t=t?Math.max(t,n):n),t},this.checkIfRowIsOversized=function(e){if(h.view.wt.wtTable.oversizedRows)return h.view.wt.wtTable.oversizedRows[e]},this.countRows=function(){return i.settings.data.length},this.countCols=function(){return"object"===h.dataType||"function"===h.dataType?i.settings.columns&&i.settings.columns.length?i.settings.columns.length:s.colToPropCache.length:"array"===h.dataType?i.settings.columns&&i.settings.columns.length?i.settings.columns.length:i.settings.data&&i.settings.data[0]&&i.settings.data[0].length?i.settings.data[0].length:0:void 0},this.rowOffset=function(){return h.view.wt.getSetting("offsetRow")},this.colOffset=function(){return 0},this.countVisibleRows=function(){return h.view.wt.drawn?h.view.wt.wtTable.rowStrategy.countVisible():-1},this.countVisibleCols=function(){return h.view.wt.drawn?h.view.wt.wtTable.columnStrategy.countVisible():-1},this.countEmptyRows=function(e){for(var t,n=h.countRows()-1,r=0;n>=0;){if(t=o.hooks.execute(this,"modifyRow",n),h.isEmptyRow(t))r++;else if(e)break;n--}return r},this.countEmptyCols=function(e){if(h.countRows()<1)return 0;for(var t=h.countCols()-1,n=0;t>=0;){if(h.isEmptyCol(t))n++;else if(e)break;t--}return n},this.isEmptyRow=function(e){return i.settings.isEmptyRow.call(h,e)},this.isEmptyCol=function(e){return i.settings.isEmptyCol.call(h,e)},this.selectCell=function(e,t,n,o,r){if("number"!=typeof e||e<0||e>=h.countRows())return!1;if("number"!=typeof t||t<0||t>=h.countCols())return!1;if(void 0!==n){if("number"!=typeof n||n<0||n>=h.countRows())return!1;if("number"!=typeof o||o<0||o>=h.countCols())return!1}var s=new H(e,t);return i.selRange=new N(s,s,s),document.activeElement&&document.activeElement!==document.documentElement&&document.activeElement!==document.body&&document.activeElement.blur(),h.listen(),void 0===n?c.setRangeEnd(i.selRange.from,r):c.setRangeEnd(new H(n,o),r),h.selection.finish(),!0},this.selectCellByProp=function(e,t,n,o,r){return arguments[1]=s.propToCol(arguments[1]),void 0!==arguments[3]&&(arguments[3]=s.propToCol(arguments[3])),h.selectCell.apply(h,arguments)},this.deselectCell=function(){c.deselect()},this.destroy=function(){for(var t in h._clearTimeouts(),h.view&&h.view.wt.destroy(),h.rootElement.empty(),h.rootElement.removeData("handsontable"),h.rootElement.off(".handsontable"),e(n).off("."+h.guid),f.off("."+h.guid),p.off("."+h.guid),o.hooks.run(h,"afterDestroy"),o.hooks.destroy(h),h)h.hasOwnProperty(t)&&("function"==typeof h[t]?"runHooks"!==t&&"runHooksAndReturn"!==t&&(h[t]=C):"guid"!==t&&(h[t]=null));i=null,s=null,a=null,c=null,u=null,h=null,d=null,f=null,p=null},this.getActiveEditor=function(){return u.getActiveEditor()},this.getInstance=function(){return h},this.addHook=function(e,t){o.hooks.add(e,t,h)},this.addHookOnce=function(e,t){o.hooks.once(e,t,h)},this.removeHook=function(e,t){o.hooks.remove(e,t,h)},this.runHooks=function(e,t,n,r,i,s,a){o.hooks.run(h,e,t,n,r,i,s,a)},this.runHooksAndReturn=function(e,t,n,r,i,s,a){return o.hooks.execute(h,e,t,n,r,i,s,a)},this.timeouts=[],this._registerTimeout=function(e){this.timeouts.push(e)},this._clearTimeouts=function(){for(var e=0,t=this.timeouts.length;e<t;e++)clearTimeout(this.timeouts[e])},this.version="0.11.4"};var r,i,s,a,l=function(){};l.prototype={data:void 0,dataSchema:void 0,width:void 0,height:void 0,startRows:5,startCols:5,rowHeaders:null,colHeaders:null,colWidths:void 0,columns:void 0,cells:void 0,cell:[],minRows:0,minCols:0,maxRows:1/0,maxCols:1/0,minSpareRows:0,minSpareCols:0,multiSelect:!0,fillHandle:!0,fixedRowsTop:0,fixedColumnsLeft:0,outsideClickDeselects:!0,enterBeginsEditing:!0,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:!1,autoWrapCol:!1,copyRowsLimit:1e3,copyColsLimit:1e3,pasteMode:"overwrite",currentRowClassName:void 0,currentColClassName:void 0,stretchH:"none",isEmptyRow:function(e){for(var t,n=0,o=this.countCols();n<o;n++)if(""!==(t=this.getDataAtCell(e,n))&&null!=t)return!1;return!0},isEmptyCol:function(e){for(var t,n=0,o=this.countRows();n<o;n++)if(""!==(t=this.getDataAtCell(n,e))&&null!=t)return!1;return!0},observeDOMVisibility:!0,allowInvalid:!0,invalidCellClassName:"htInvalid",placeholder:!1,placeholderCellClassName:"htPlaceholder",readOnlyCellClassName:"htDimmed",commentedCellClassName:"htCommentCell",fragmentSelection:!1,readOnly:!1,type:"text",copyable:!0,debug:!1,wordWrap:!0,noWordWrapClassName:"htNoWrap",contextMenu:void 0,undo:void 0,columnSorting:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,groups:void 0},o.DefaultSettings=l,e.fn.handsontable=function(e){var t,n,r,i,s,a=this.first(),l=a.data("handsontable");if("string"!=typeof e)return s=e||{},l?l.updateSettings(s):(l=new o.Core(a,s),a.data("handsontable",l),l.init()),a;if(r=[],arguments.length>1)for(t=1,n=arguments.length;t<n;t++)r.push(arguments[t]);if(l){if(void 0===l[e])throw new Error("Handsontable do not provide action: "+e);i=l[e].apply(l,r)}return i},function(e){e.MultiMap||(e.MultiMap=function(){var e={arrayMap:[],weakMap:new WeakMap};return{get:function(o){return t(o)?e.arrayMap[o]:n(o)?e.weakMap.get(o):void 0},set:function(o,r){if(t(o))e.arrayMap[o]=r;else{if(!n(o))throw new Error("Invalid key type");e.weakMap.set(o,r)}},delete:function(o){t(o)?delete e.arrayMap[o]:n(o)&&e.weakMap.delete(o)}};function t(e){return null!==e&&!function(e){return e!=e}(e)&&("string"==typeof e||"number"==typeof e)}function n(e){return null!==e&&("object"==typeof e||"function"==typeof e)}})}(n),n.Handsontable||(o={}),o.Dom={},o.Dom.closest=function(e,t,n){for(;null!=e&&e!==n;){if(1===e.nodeType&&t.indexOf(e.nodeName)>-1)return e;e=e.parentNode}return null},o.Dom.isChildOf=function(e,t){for(var n=e.parentNode;null!=n;){if(n==t)return!0;n=n.parentNode}return!1},o.Dom.index=function(e){for(var t=0;e=e.previousSibling;)++t;return t},document.documentElement.classList?(o.Dom.hasClass=function(e,t){return e.classList.contains(t)},o.Dom.addClass=function(e,t){e.classList.add(t)},o.Dom.removeClass=function(e,t){e.classList.remove(t)}):(o.Dom.hasClass=function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},o.Dom.addClass=function(e,t){""==e.className?e.className=t:this.hasClass(e,t)||(e.className+=" "+t)},o.Dom.removeClass=function(e,t){if(this.hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").trim()}}),o.Dom.removeTextNodes=function(e,t){if(3===e.nodeType)t.removeChild(e);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(e.nodeName)>-1)for(var n=e.childNodes,o=n.length-1;o>=0;o--)this.removeTextNodes(n[o],e)},o.Dom.empty=function(e){for(var t;t=e.lastChild;)e.removeChild(t)},o.Dom.HTML_CHARACTERS=/(<(.*)>|&(.*);)/,o.Dom.fastInnerHTML=function(e,t){this.HTML_CHARACTERS.test(t)?e.innerHTML=t:this.fastInnerText(e,t)},document.createTextNode("test").textContent?o.Dom.fastInnerText=function(e,t){var n=e.firstChild;n&&3===n.nodeType&&null===n.nextSibling?n.textContent=t:(this.empty(e),e.appendChild(document.createTextNode(t)))}:o.Dom.fastInnerText=function(e,t){var n=e.firstChild;n&&3===n.nodeType&&null===n.nextSibling?n.data=t:(this.empty(e),e.appendChild(document.createTextNode(t)))},o.Dom.isVisible=function(e){for(var t=e;t!==document.documentElement;){if(null===t)return!1;if(11===t.nodeType){if(t.host){if(t.host.impl)return o.Dom.isVisible(t.host.impl);if(t.host)return o.Dom.isVisible(t.host);throw new Error("Lost in Web Components world")}return!1}if("none"===t.style.display)return!1;t=t.parentNode}return!0},o.Dom.offset=function(e){if(this.hasCaptionProblem()&&e.firstChild&&"CAPTION"===e.firstChild.nodeName){var t=e.getBoundingClientRect();return{top:t.top+(n.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),left:t.left+(n.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0)}}for(var o=e.offsetLeft,r=e.offsetTop,i=e;(e=e.offsetParent)&&e!==document.body;)o+=e.offsetLeft,r+=e.offsetTop,i=e;return i&&"fixed"===i.style.position&&(o+=n.pageXOffset||document.documentElement.scrollLeft,r+=n.pageYOffset||document.documentElement.scrollTop),{left:o,top:r}},o.Dom.getWindowScrollTop=function(){var e=n.scrollY;return null==e&&(e=document.documentElement.scrollTop),e},o.Dom.getWindowScrollLeft=function(){var e=n.scrollX;return null==e&&(e=document.documentElement.scrollLeft),e},o.Dom.getScrollTop=function(e){return e===n?o.Dom.getWindowScrollTop(e):e.scrollTop},o.Dom.getScrollLeft=function(e){return e===n?o.Dom.getWindowScrollLeft(e):e.scrollLeft},o.Dom.getComputedStyle=function(e){return e.currentStyle||document.defaultView.getComputedStyle(e)},o.Dom.outerWidth=function(e){return e.offsetWidth},o.Dom.outerHeight=function(e){return this.hasCaptionProblem()&&e.firstChild&&"CAPTION"===e.firstChild.nodeName?e.offsetHeight+e.firstChild.offsetHeight:e.offsetHeight},o.Dom.innerHeight=function(e){return e.clientHeight},o.Dom.innerWidth=function(e){return e.innerWidth},o.Dom.hasCaptionProblem=function(){return void 0===r&&function(){var e=document.createElement("TABLE");e.style.borderSpacing=0,e.style.borderWidth=0,e.style.padding=0;var t=document.createElement("TBODY");e.appendChild(t),t.appendChild(document.createElement("TR")),t.firstChild.appendChild(document.createElement("TD")),t.firstChild.firstChild.innerHTML="<tr><td>t<br>t</td></tr>";var n=document.createElement("CAPTION");n.innerHTML="c<br>c<br>c<br>c",n.style.padding=0,n.style.margin=0,e.insertBefore(n,t),document.body.appendChild(e),r=e.offsetHeight<2*e.lastChild.offsetHeight,document.body.removeChild(e)}(),r},o.Dom.getCaretPosition=function(e){if(e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();if(null==t)return 0;var n=e.createTextRange(),o=n.duplicate();return n.moveToBookmark(t.getBookmark()),o.setEndPoint("EndToStart",n),o.text.length}return 0},o.Dom.getSelectionEndPosition=function(e){if(e.selectionEnd)return e.selectionEnd;if(document.selection){var t=document.selection.createRange();return null==t?0:e.createTextRange().text.indexOf(t.text)+t.text.length}},o.Dom.setCaretPosition=function(e,t,n){if(void 0===n&&(n=t),e.setSelectionRange)e.focus(),e.setSelectionRange(t,n);else if(e.createTextRange){var o=e.createTextRange();o.collapse(!0),o.moveEnd("character",n),o.moveStart("character",t),o.select()}},o.Dom.getScrollbarWidth=function(){return void 0===i&&(i=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),(document.body||document.documentElement).appendChild(t);var n=e.offsetWidth;t.style.overflow="scroll";var o=e.offsetWidth;return n==o&&(o=t.clientWidth),(document.body||document.documentElement).removeChild(t),n-o}()),i},o.TableView=function(t){var r=this,i=e(document.documentElement);this.instance=t,this.settings=t.getSettings(),t.rootElement.data("originalStyle",t.rootElement[0].getAttribute("style")),t.rootElement.addClass("handsontable");var s,a=document.createElement("TABLE");a.className="htCore",this.THEAD=document.createElement("THEAD"),a.appendChild(this.THEAD),this.TBODY=document.createElement("TBODY"),a.appendChild(this.TBODY),t.$table=e(a),t.container.prepend(t.$table),t.rootElement.on("mousedown.handsontable",(function(e){r.isTextSelectionAllowed(e.target)||(l(),e.preventDefault(),n.focus())})),i.on("keyup."+t.guid,(function(e){t.selection.isInProgress()&&!e.shiftKey&&t.selection.finish()})),this.isMouseDown=function(){return s},i.on("mouseup."+t.guid,(function(e){t.selection.isInProgress()&&1===e.which&&t.selection.finish(),s=!1,o.helper.isOutsideInput(document.activeElement)&&t.unlisten()})),i.on("mousedown."+t.guid,(function(e){var n=e.target;if(!s){if(n!==r.wt.wtTable.spreader)for(;n!==document.documentElement;){if(null===n)return;if(n===t.rootElement[0])return;n=n.parentNode}r.settings.outsideClickDeselects?t.deselectCell():t.destroyEditor()}})),t.$table.on("selectstart",(function(e){r.settings.fragmentSelection||e.preventDefault()}));var l=function(){n.getSelection?n.getSelection().empty?n.getSelection().empty():n.getSelection().removeAllRanges&&n.getSelection().removeAllRanges():document.selection&&document.selection.empty()},c=[new Y({className:"current",border:{width:2,color:"#5292F7",cornerVisible:function(){return r.settings.fillHandle&&!r.isCellEdited()&&!t.selection.isMultiple()}}}),new Y({className:"area",border:{width:1,color:"#89AFF9",cornerVisible:function(){return r.settings.fillHandle&&!r.isCellEdited()&&t.selection.isMultiple()}}}),new Y({className:"highlight",highlightRowClassName:r.settings.currentRowClassName,highlightColumnClassName:r.settings.currentColClassName}),new Y({className:"fill",border:{width:1,color:"red"}})];c.current=c[0],c.area=c[1],c.highlight=c[2],c.fill=c[3];var u={debug:function(){return r.settings.debug},table:a,stretchH:this.settings.stretchH,data:t.getDataAtCell,totalRows:t.countRows,totalColumns:t.countCols,offsetRow:0,fixedColumnsLeft:function(){return r.settings.fixedColumnsLeft},fixedRowsTop:function(){return r.settings.fixedRowsTop},renderAllRows:r.settings.renderAllRows,rowHeaders:function(){var e=[];return t.hasRowHeaders()&&e.push((function(e,t){r.appendRowHeader(e,t)})),o.hooks.run(t,"afterGetRowHeaderRenderers",e),e},columnHeaders:function(){var e=[];return t.hasColHeaders()&&e.push((function(e,t){r.appendColHeader(e,t)})),o.hooks.run(t,"afterGetColumnHeaderRenderers",e),e},columnWidth:t.getColWidth,rowHeight:t.getRowHeight,cellRenderer:function(e,t,n){var i=r.instance.colToProp(t),s=r.instance.getCellMeta(e,t),a=r.instance.getCellRenderer(s),l=r.instance.getDataAtRowProp(e,i);a(r.instance,n,e,t,i,l,s),o.hooks.run(r.instance,"afterRenderer",n,e,t,i,l,s)},selections:c,hideBorderOnMouseDownOver:function(){return r.settings.fragmentSelection},onCellMouseDown:function(e,n,i,a){t.listen(),r.activeWt=a,s=!0,o.hooks.run(t,"beforeOnCellMouseDown",e,n,i),e.isImmediatePropagationStopped()||(2===e.button&&t.selection.inInSelection(n)||(e.shiftKey?n.row>=0&&n.col>=0&&t.selection.setRangeEnd(n):n.row<0||n.col<0?(n.row<0&&(t.selectCell(0,n.col,t.countRows()-1,n.col),t.selection.setSelectedHeaders(!1,!0)),n.col<0&&(t.selectCell(n.row,0,n.row,t.countCols()-1),t.selection.setSelectedHeaders(!0,!1))):t.selection.setRangeStart(n)),o.hooks.run(t,"afterOnCellMouseDown",e,n,i),r.activeWt=r.wt)},onCellMouseOver:function(e,n,i,a){r.activeWt=a,n.row>=0&&n.col>=0?s&&t.selection.setRangeEnd(n):s&&(n.row<0&&(t.selection.setRangeEnd(new H(t.countRows()-1,n.col)),t.selection.setSelectedHeaders(!1,!0)),n.col<0&&(t.selection.setRangeEnd(new H(n.row,t.countCols()-1)),t.selection.setSelectedHeaders(!0,!1))),o.hooks.run(t,"afterOnCellMouseOver",e,n,i),r.activeWt=r.wt},onCellCornerMouseDown:function(e){e.preventDefault(),o.hooks.run(t,"afterOnCellCornerMouseDown",e)},beforeDraw:function(e){r.beforeRender(e)},onDraw:function(e){r.onDraw(e)},onScrollVertically:function(){t.runHooks("afterScrollVertically")},onScrollHorizontally:function(){t.runHooks("afterScrollHorizontally")},onBeforeDrawBorders:function(e,n){t.runHooks("beforeDrawBorders",e,n)}};o.hooks.run(t,"beforeInitWalkontable",u),this.wt=new j(u),this.activeWt=this.wt,e(r.wt.wtTable.spreader).on("mousedown.handsontable, contextmenu.handsontable",(function(e){e.target===r.wt.wtTable.spreader&&3===e.which&&e.stopPropagation()})),i.on("click."+t.guid,(function(){r.settings.observeDOMVisibility&&r.wt.drawInterrupted&&(r.instance.forceFullRender=!0,r.render())}))},o.TableView.prototype.isTextSelectionAllowed=function(e){return!!o.helper.isInput(e)||!(!this.settings.fragmentSelection||!o.Dom.isChildOf(e,this.TBODY))},o.TableView.prototype.isCellEdited=function(){var e=this.instance.getActiveEditor();return e&&e.isOpened()},o.TableView.prototype.beforeRender=function(e){e&&o.hooks.run(this.instance,"beforeRender",this.instance.forceFullRender)},o.TableView.prototype.onDraw=function(e){e&&o.hooks.run(this.instance,"afterRender",this.instance.forceFullRender)},o.TableView.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender),this.instance.forceFullRender=!1,this.instance.rootElement.triggerHandler("render.handsontable")},o.TableView.prototype.getCellAtCoords=function(e){var t=this.wt.wtTable.getCell(e);return t<0?null:t},o.TableView.prototype.scrollViewport=function(e){this.wt.scrollViewport(e)},o.TableView.prototype.appendRowHeader=function(e,t){var n=document.createElement("DIV"),r=document.createElement("SPAN");n.className="relative",r.className="rowHeader",e>-1?o.Dom.fastInnerHTML(r,this.instance.getRowHeader(e)):o.Dom.fastInnerText(r," "),n.appendChild(r),o.Dom.empty(t),t.appendChild(n),o.hooks.run(this.instance,"afterGetRowHeader",e,t)},o.TableView.prototype.appendColHeader=function(e,t){var n=document.createElement("DIV"),r=document.createElement("SPAN");n.className="relative",r.className="colHeader",e>-1?o.Dom.fastInnerHTML(r,this.instance.getColHeader(e)):o.Dom.fastInnerText(r," "),n.appendChild(r),o.Dom.empty(t),t.appendChild(n),o.hooks.run(this.instance,"afterGetColHeader",e,t)},o.TableView.prototype.maximumVisibleElementWidth=function(e){var t=this.wt.wtViewport.getWorkspaceWidth()-e;return t>0?t:0},o.TableView.prototype.maximumVisibleElementHeight=function(e){var t=this.wt.wtViewport.getWorkspaceHeight()-e;return t>0?t:0},o.TableView.prototype.mainViewIsActive=function(){return this.wt===this.activeWt},function(e){function t(e){var t,n;n={},t=e,this.getInstance=function(e){return e.guid in n||(n[e.guid]=new t(e)),n[e.guid]}}var n={},o=new WeakMap;e.editors={registerEditor:function(e,r){var i=new t(r);"string"==typeof e&&(n[e]=i),o.set(r,i)},getEditor:function(e,t){var r;if("function"==typeof e)o.get(e)||this.registerEditor(null,e),r=o.get(e);else{if("string"!=typeof e)throw Error('Only strings and functions can be passed as "editor" parameter ');r=n[e]}if(!r)throw Error('No editor registered under name "'+e+'"');return r.getInstance(t)}}}(o),function(t){t.EditorManager=function(n,o,r){var i,s=this,a=e(document),l=t.helper.keyCode,c=!1;this.destroyEditor=function(e){this.closeEditor(e)},this.getActiveEditor=function(){return i},this.prepareEditor=function(){if(i&&i.isWaiting())this.closeEditor(!1,!1,(function(e){e&&s.prepareEditor()}));else{var e=o.selRange.highlight.row,r=o.selRange.highlight.col,a=n.colToProp(r),l=n.getCell(e,r),c=n.getDataAtCell(e,r),u=n.getCellMeta(e,r),h=n.getCellEditor(u);(i=t.editors.getEditor(h,n)).prepare(e,r,a,l,c,u)}},this.isEditorOpened=function(){return i.isOpened()},this.openEditor=function(e){i.cellProperties.readOnly||i.beginEditing(e)},this.closeEditor=function(e,t,n){i?i.finishEditing(e,t,n):n&&n(!1)},this.closeEditorAndSaveChanges=function(e){return this.closeEditor(!1,e)},this.closeEditorAndRestoreOriginalValue=function(e){return this.closeEditor(!0,e)},function(){function e(e){var t="function"==typeof o.settings.enterMoves?o.settings.enterMoves(event):o.settings.enterMoves;e?r.transformStart(-t.row,-t.col):r.transformStart(t.row,t.col,!0)}n.addHook("afterDocumentKeyDown",(function(a){!function(a){if(n.isListening()&&(t.hooks.run(n,"beforeKeyDown",a),!c&&!a.isImmediatePropagationStopped()&&(o.lastKeyCode=a.keyCode,r.isSelected()))){var u=(a.ctrlKey||a.metaKey)&&!a.altKey;if(!(i.isWaiting()||t.helper.isMetaKey(a.keyCode)||u||s.isEditorOpened()))return void s.openEditor("");var h=a.shiftKey?r.setRangeEnd:r.setRangeStart;switch(a.keyCode){case l.A:u&&(r.selectAll(),a.preventDefault(),a.stopPropagation());break;case l.ARROW_UP:s.isEditorOpened()&&!i.isWaiting()&&s.closeEditorAndSaveChanges(u),a.shiftKey?r.transformEnd(-1,0):r.transformStart(-1,0),a.preventDefault(),a.stopPropagation();break;case l.ARROW_DOWN:s.isEditorOpened()&&!i.isWaiting()&&s.closeEditorAndSaveChanges(u),a.shiftKey?r.transformEnd(1,0):r.transformStart(1,0),a.preventDefault(),a.stopPropagation();break;case l.ARROW_RIGHT:s.isEditorOpened()&&!i.isWaiting()&&s.closeEditorAndSaveChanges(u),a.shiftKey?r.transformEnd(0,1):r.transformStart(0,1),a.preventDefault(),a.stopPropagation();break;case l.ARROW_LEFT:s.isEditorOpened()&&!i.isWaiting()&&s.closeEditorAndSaveChanges(u),function(e){e?r.transformEnd(0,-1):r.transformStart(0,-1)}(a.shiftKey),a.preventDefault(),a.stopPropagation();break;case l.TAB:var d="function"==typeof o.settings.tabMoves?o.settings.tabMoves(a):o.settings.tabMoves;a.shiftKey?r.transformStart(-d.row,-d.col):r.transformStart(d.row,d.col,!0),a.preventDefault(),a.stopPropagation();break;case l.BACKSPACE:case l.DELETE:r.empty(a),s.prepareEditor(),a.preventDefault();break;case l.F2:s.openEditor(),a.preventDefault();break;case l.ENTER:s.isEditorOpened()?(i.state!==t.EditorState.WAITING&&s.closeEditorAndSaveChanges(u),e(a.shiftKey)):n.getSettings().enterBeginsEditing?s.openEditor():e(a.shiftKey),a.preventDefault(),a.stopImmediatePropagation();break;case l.ESCAPE:s.isEditorOpened()&&s.closeEditorAndRestoreOriginalValue(u),a.preventDefault();break;case l.HOME:a.ctrlKey||a.metaKey?h(new H(0,o.selRange.from.col)):h(new H(o.selRange.from.row,0)),a.preventDefault(),a.stopPropagation();break;case l.END:a.ctrlKey||a.metaKey?h(new H(n.countRows()-1,o.selRange.from.col)):h(new H(o.selRange.from.row,n.countCols()-1)),a.preventDefault(),a.stopPropagation();break;case l.PAGE_UP:r.transformStart(-n.countVisibleRows(),0),n.view.wt.scrollVertical(-n.countVisibleRows()),n.view.render(),a.preventDefault(),a.stopPropagation();break;case l.PAGE_DOWN:r.transformStart(n.countVisibleRows(),0),n.view.wt.scrollVertical(n.countVisibleRows()),n.view.render(),a.preventDefault(),a.stopPropagation()}}}(a)})),a.on("keydown."+n.guid,(function(e){n.runHooks("afterDocumentKeyDown",e)})),n.view.wt.update("onCellDblClick",(function(e,t,n){"TD"==n.nodeName&&s.openEditor()})),n.addHook("afterDestroy",(function(){c=!0}))}()}}(o),function(e){var t={};e.renderers={registerRenderer:function(e,n){t[e]=n},getRenderer:function(e){if("function"==typeof e)return e;if("string"!=typeof e)throw Error('Only strings and functions can be passed as "renderer" parameter ');if(!(e in t))throw Error('No editor registered under name "'+e+'"');return t[e]}}}(o),o.helper.isPrintableChar=function(e){return 32==e||e>=48&&e<=57||e>=96&&e<=111||e>=186&&e<=192||e>=219&&e<=222||e>=226||e>=65&&e<=90},o.helper.isMetaKey=function(e){var t=o.helper.keyCode;return-1!=[t.ARROW_DOWN,t.ARROW_UP,t.ARROW_LEFT,t.ARROW_RIGHT,t.HOME,t.END,t.DELETE,t.BACKSPACE,t.F1,t.F2,t.F3,t.F4,t.F5,t.F6,t.F7,t.F8,t.F9,t.F10,t.F11,t.F12,t.TAB,t.PAGE_DOWN,t.PAGE_UP,t.ENTER,t.ESCAPE,t.SHIFT,t.CAPS_LOCK,t.ALT].indexOf(e)},o.helper.isCtrlKey=function(e){var t=o.helper.keyCode;return-1!=[t.CONTROL_LEFT,224,t.COMMAND_LEFT,t.COMMAND_RIGHT].indexOf(e)},o.helper.stringify=function(e){switch(typeof e){case"string":case"number":return e+"";case"object":return null===e?"":e.toString();case"undefined":return"";default:return e.toString()}},o.helper.spreadsheetColumnLabel=function(e){for(var t,n=e+1,o="";n>0;)t=(n-1)%26,o=String.fromCharCode(65+t)+o,n=parseInt((n-t)/26,10);return o},o.helper.isNumeric=function(e){var t=typeof e;return"number"==t?!isNaN(e)&&isFinite(e):"string"==t?!!e.length&&(1==e.length?/\d/.test(e):/^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(e)):"object"==t&&!(!e||"number"!=typeof e.valueOf()||e instanceof Date)},o.helper.isDescendant=function(e,t){for(var n=t.parentNode;null!=n;){if(n==e)return!0;n=n.parentNode}return!1},o.helper.randomString=function(){return W()},o.helper.inherit=function(e,t){return t.prototype.constructor=t,e.prototype=new t,e.prototype.constructor=e,e},o.helper.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},o.helper.getPrototypeOf=function(e){var t;if("object"==typeof e.__proto__)t=e.__proto__;else{var n,o=e.constructor;"function"==typeof e.constructor&&(n=o,delete e.constructor&&(o=e.constructor,e.constructor=n)),t=o?o.prototype:null}return t},o.helper.columnFactory=function(e,t){function n(){}o.helper.inherit(n,e);for(var r=0,i=t.length;r<i;r++)n.prototype[t[r]]=void 0;return n},o.helper.translateRowsToColumns=function(e){var t,n,o,r,i=[],s=0;for(t=0,n=e.length;t<n;t++)for(o=0,r=e[t].length;o<r;o++)o==s&&(i.push([]),s++),i[o].push(e[t][o]);return i},o.helper.to2dArray=function(e){for(var t=0,n=e.length;t<n;)e[t]=[e[t]],t++},o.helper.extendArray=function(e,t){for(var n=0,o=t.length;n<o;)e.push(t[n]),n++},o.helper.isInput=function(e){return["INPUT","SELECT","TEXTAREA"].indexOf(e.nodeName)>-1},o.helper.isOutsideInput=function(e){return o.helper.isInput(e)&&-1==e.className.indexOf("handsontableInput")},o.helper.keyCode={MOUSE_LEFT:1,MOUSE_RIGHT:3,MOUSE_MIDDLE:2,BACKSPACE:8,COMMA:188,INSERT:45,DELETE:46,END:35,ENTER:13,ESCAPE:27,CONTROL_LEFT:91,COMMAND_LEFT:17,COMMAND_RIGHT:93,ALT:18,HOME:36,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,SPACE:32,SHIFT:16,CAPS_LOCK:20,TAB:9,ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,A:65,X:88,C:67,V:86},o.helper.isObject=function(e){return"[object Object]"==Object.prototype.toString.call(e)},o.helper.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"==Object.prototype.toString.call(e)},o.helper.pivot=function(e){var t=[];if(!e||0==e.length||!e[0]||0==e[0].length)return t;for(var n=e.length,o=e[0].length,r=0;r<n;r++)for(var i=0;i<o;i++)t[i]||(t[i]=[]),t[i][r]=e[r][i];return t},o.helper.proxy=function(e,t){return function(){return e.apply(t,arguments)}},o.helper.cellMethodLookupFactory=function(e,t){return t=void 0===t||t,function(n,r){return function n(r){if(r){if(r.hasOwnProperty(e)&&void 0!==r[e])return r[e];if(r.hasOwnProperty("type")&&r.type){var i;if("string"!=typeof r.type)throw new Error("Cell type must be a string ");if((i=function(e){var t=o.cellTypes[e];if(void 0===t)throw new Error('You declared cell type "'+e+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');return t}(r.type)).hasOwnProperty(e))return i[e];if(t)return}return n(o.helper.getPrototypeOf(r))}}("number"==typeof n?this.getCellMeta(n,r):n)}},o.helper.toString=function(e){return""+e},function(t){t.DataMap=function(e,t,n){this.instance=e,this.priv=t,this.GridSettings=n,this.dataSource=this.instance.getSettings().data,this.dataSource[0]?this.duckSchema=this.recursiveDuckSchema(this.dataSource[0]):this.duckSchema={},this.createMap()},t.DataMap.prototype.DESTINATION_RENDERER=1,t.DataMap.prototype.DESTINATION_CLIPBOARD_GENERATOR=2,t.DataMap.prototype.recursiveDuckSchema=function(t){var n;if(e.isPlainObject(t))for(var o in n={},t)t.hasOwnProperty(o)&&(e.isPlainObject(t[o])?n[o]=this.recursiveDuckSchema(t[o]):n[o]=null);else n=[];return n},t.DataMap.prototype.recursiveDuckColumns=function(t,n,o){var r,i;if(void 0===n&&(n=0,o=""),e.isPlainObject(t))for(i in t)t.hasOwnProperty(i)&&(null===t[i]?(r=o+i,this.colToPropCache.push(r),this.propToColCache.set(r,n),n++):n=this.recursiveDuckColumns(t[i],n,i+"."));return n},t.DataMap.prototype.createMap=function(){if(void 0===this.getSchema())throw new Error("trying to create `columns` definition but you didnt' provide `schema` nor `data`");var e,t,n=this.getSchema();this.colToPropCache=[],this.propToColCache=new MultiMap;var o=this.instance.getSettings().columns;if(o)for(e=0,t=o.length;e<t;e++)void 0!==o[e].data&&(this.colToPropCache[e]=o[e].data,this.propToColCache.set(o[e].data,e));else this.recursiveDuckColumns(n)},t.DataMap.prototype.colToProp=function(e){return e=t.hooks.execute(this.instance,"modifyCol",e),this.colToPropCache&&void 0!==this.colToPropCache[e]?this.colToPropCache[e]:e},t.DataMap.prototype.propToCol=function(e){var n;return n=void 0!==this.propToColCache.get(e)?this.propToColCache.get(e):e,t.hooks.execute(this.instance,"modifyCol",n)},t.DataMap.prototype.getSchema=function(){var e=this.instance.getSettings().dataSchema;return e?"function"==typeof e?e():e:this.duckSchema},t.DataMap.prototype.createRow=function(n,o,r){var i,s=this.instance.countCols(),a=0;o||(o=1),("number"!=typeof n||n>=this.instance.countRows())&&(n=this.instance.countRows());for(var l=this.instance.getSettings().maxRows;a<o&&this.instance.countRows()<l;){if("array"===this.instance.dataType){i=[];for(var c=0;c<s;c++)i.push(null)}else i="function"===this.instance.dataType?this.instance.getSettings().dataSchema(n):e.extend(!0,{},this.getSchema());n===this.instance.countRows()?this.dataSource.push(i):this.dataSource.splice(n,0,i),a++}return t.hooks.run(this.instance,"afterCreateRow",n,a,r),this.instance.forceFullRender=!0,a},t.DataMap.prototype.createCol=function(e,n,o){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");var r,i,s=this.instance.countRows(),a=this.dataSource,l=0;n||(n=1),i=e;for(var c=this.instance.getSettings().maxCols;l<n&&this.instance.countCols()<c;){if(r=t.helper.columnFactory(this.GridSettings,this.priv.columnsSettingConflicts),"number"!=typeof e||e>=this.instance.countCols()){for(var u=0;u<s;u++)void 0===a[u]&&(a[u]=[]),a[u].push(null);this.priv.columnSettings.push(r)}else{for(u=0;u<s;u++)a[u].splice(i,0,null);this.priv.columnSettings.splice(i,0,r)}l++,i++}return t.hooks.run(this.instance,"afterCreateCol",e,l,o),this.instance.forceFullRender=!0,l},t.DataMap.prototype.removeRow=function(e,n){n||(n=1),"number"!=typeof e&&(e=-n),e=(this.instance.countRows()+e)%this.instance.countRows();var o=this.physicalRowsToLogical(e,n);if(!1!==t.hooks.execute(this.instance,"beforeRemoveRow",e,n)){var r=this.dataSource,i=r.filter((function(e,t){return-1==o.indexOf(t)}));r.length=0,Array.prototype.push.apply(r,i),t.hooks.run(this.instance,"afterRemoveRow",e,n),this.instance.forceFullRender=!0}},t.DataMap.prototype.removeCol=function(e,n){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("cannot remove column with object data source or columns option specified");if(n||(n=1),"number"!=typeof e&&(e=-n),e=(this.instance.countCols()+e)%this.instance.countCols(),!1!==t.hooks.execute(this.instance,"beforeRemoveCol",e,n)){for(var o=this.dataSource,r=0,i=this.instance.countRows();r<i;r++)o[r].splice(e,n);this.priv.columnSettings.splice(e,n),t.hooks.run(this.instance,"afterRemoveCol",e,n),this.instance.forceFullRender=!0}},t.DataMap.prototype.spliceCol=function(e,n,o){var r=4<=arguments.length?[].slice.call(arguments,3):[],i=this.instance.getDataAtCol(e),s=i.slice(n,n+o),a=i.slice(n+o);t.helper.extendArray(r,a);for(var l=0;l<o;)r.push(null),l++;return t.helper.to2dArray(r),this.instance.populateFromArray(n,e,r,null,null,"spliceCol"),s},t.DataMap.prototype.spliceRow=function(e,n,o){var r=4<=arguments.length?[].slice.call(arguments,3):[],i=this.instance.getSourceDataAtRow(e),s=i.slice(n,n+o),a=i.slice(n+o);t.helper.extendArray(r,a);for(var l=0;l<o;)r.push(null),l++;return this.instance.populateFromArray(e,n,[r],null,null,"spliceRow"),s},t.DataMap.prototype.get=function(e,n){if(e=t.hooks.execute(this.instance,"modifyRow",e),"string"==typeof n&&n.indexOf(".")>-1){var o=n.split("."),r=this.dataSource[e];if(!r)return null;for(var i=0,s=o.length;i<s;i++)if(void 0===(r=r[o[i]]))return null;return r}return"function"==typeof n?n(this.dataSource.slice(e,e+1)[0]):this.dataSource[e]?this.dataSource[e][n]:null};var n=t.helper.cellMethodLookupFactory("copyable",!1);t.DataMap.prototype.getCopyable=function(e,o){if(n.call(this.instance,e,this.propToCol(o))){var r=this.get(e,o);return t.hooks.execute(this.instance,"beforeCopy",r,e,o)}return""},t.DataMap.prototype.set=function(e,n,o,r){if(e=t.hooks.execute(this.instance,"modifyRow",e,r||"datamapGet"),"string"==typeof n&&n.indexOf(".")>-1){for(var i=n.split("."),s=this.dataSource[e],a=0,l=i.length-1;a<l;a++)void 0===s[i[a]]&&(s[i[a]]={}),s=s[i[a]];s[i[a]]=o}else"function"==typeof n?n(this.dataSource.slice(e,e+1)[0],o):this.dataSource[e][n]=o},t.DataMap.prototype.physicalRowsToLogical=function(e,n){for(var o,r=this.instance.countRows(),i=(r+e)%r,s=[],a=n;i<r&&a;)o=t.hooks.execute(this.instance,"modifyRow",i),s.push(o),a--,i++;return s},t.DataMap.prototype.clear=function(){for(var e=0;e<this.instance.countRows();e++)for(var t=0;t<this.instance.countCols();t++)this.set(e,this.colToProp(t),"")},t.DataMap.prototype.getAll=function(){return this.dataSource},t.DataMap.prototype.getRange=function(e,t,n){var o,r,i,s,a,l=[],c=n===this.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get;for(r=Math.max(e.row,t.row),s=Math.max(e.col,t.col),o=Math.min(e.row,t.row);o<=r;o++){for(a=[],i=Math.min(e.col,t.col);i<=s;i++)a.push(c.call(this,o,this.colToProp(i)));l.push(a)}return l},t.DataMap.prototype.getText=function(e,t){return SheetClip.stringify(this.getRange(e,t,this.DESTINATION_RENDERER))},t.DataMap.prototype.getCopyableText=function(e,t){return SheetClip.stringify(this.getRange(e,t,this.DESTINATION_CLIPBOARD_GENERATOR))}}(o),function(e){e.renderers.cellDecorator=function(t,n,o,r,i,s,a){a.className&&(n.className?n.className=n.className+" "+a.className:n.className=a.className),a.readOnly&&e.Dom.addClass(n,a.readOnlyCellClassName),!1===a.valid&&a.invalidCellClassName&&e.Dom.addClass(n,a.invalidCellClassName),!1===a.wordWrap&&a.noWordWrapClassName&&e.Dom.addClass(n,a.noWordWrapClassName),!s&&a.placeholder&&e.Dom.addClass(n,a.placeholderCellClassName)}}(o),function(e){var t=function(t,n,o,r,i,s,a){e.renderers.cellDecorator.apply(this,arguments),!s&&a.placeholder&&(s=a.placeholder);var l=e.helper.stringify(s);if(a.rendererTemplate){e.Dom.empty(n);var c=document.createElement("TEMPLATE");c.setAttribute("bind","{{}}"),c.innerHTML=a.rendererTemplate,HTMLTemplateElement.decorate(c),c.model=t.getSourceDataAtRow(o),n.appendChild(c)}else e.Dom.fastInnerText(n,l)};e.renderers.TextRenderer=t,e.renderers.registerRenderer("text",t)}(o),function(e){var t=document.createElement("DIV");t.className="htAutocompleteWrapper";var n=document.createElement("DIV");n.className="htAutocompleteArrow",n.appendChild(document.createTextNode("▼"));var o=function(o,r,i,s,a,l,c){t.cloneNode(!0);var u=n.cloneNode(!0);e.renderers.TextRenderer(o,r,i,s,a,l,c),r.appendChild(u),e.Dom.addClass(r,"htAutocomplete"),r.firstChild||r.appendChild(document.createTextNode(" ")),o.acArrowListener||(o.acArrowListener=function(){o.view.wt.getSetting("onCellDblClick",null,new H(i,s),r)},o.rootElement.on("mousedown.htAutocompleteArrow",".htAutocompleteArrow",o.acArrowListener),o.addHookOnce("afterDestroy",(function(){this.rootElement.off("mousedown.htAutocompleteArrow")})))};e.AutocompleteRenderer=o,e.renderers.AutocompleteRenderer=o,e.renderers.registerRenderer("autocomplete",o)}(o),function(t){var n=document.createElement("INPUT");n.className="htCheckboxRendererInput",n.type="checkbox",n.setAttribute("autocomplete","off");var o=function(o,r,i,s,a,l,c){void 0===c.checkedTemplate&&(c.checkedTemplate=!0),void 0===c.uncheckedTemplate&&(c.uncheckedTemplate=!1),t.Dom.empty(r);var u=n.cloneNode(!1);l===c.checkedTemplate||l===t.helper.stringify(c.checkedTemplate)?(u.checked=!0,r.appendChild(u)):l===c.uncheckedTemplate||l===t.helper.stringify(c.uncheckedTemplate)?r.appendChild(u):null===l?(u.className+=" noValue",r.appendChild(u)):t.Dom.fastInnerText(r,"#bad value#");var h=e(u);c.readOnly?h.on("click",(function(e){e.preventDefault()})):(h.on("mousedown",(function(e){e.stopPropagation()})),h.on("mouseup",(function(e){e.stopPropagation()})),h.on("change",(function(){this.checked?o.setDataAtRowProp(i,a,c.checkedTemplate):o.setDataAtRowProp(i,a,c.uncheckedTemplate)}))),o.CheckboxRenderer&&o.CheckboxRenderer.beforeKeyDownHookBound||(o.CheckboxRenderer={beforeKeyDownHookBound:!0},o.addHook("beforeKeyDown",(function(n){if(n.keyCode==t.helper.keyCode.SPACE)for(var r,i,s,a=o.getSelectedRange(),l=a.getTopLeftCorner(),c=a.getBottomRightCorner(),u=l.row;u<=c.row;u++)for(var h=l.col;h<=c.col;h++)if(r=o.getCell(u,h),s=o.getCellMeta(u,h),(i=r.querySelectorAll("input[type=checkbox]")).length>0&&!s.readOnly){n.isImmediatePropagationStopped()||(n.stopImmediatePropagation(),n.preventDefault());for(var d=0,f=i.length;d<f;d++)i[d].checked=!i[d].checked,e(i[d]).trigger("change")}})))};t.CheckboxRenderer=o,t.renderers.CheckboxRenderer=o,t.renderers.registerRenderer("checkbox",o)}(o),function(e){var t=function(t,n,o,r,i,s,a){e.helper.isNumeric(s)&&(void 0!==a.language&&numeral.language(a.language),s=numeral(s).format(a.format||"0"),e.Dom.addClass(n,"htNumeric")),e.renderers.TextRenderer(t,n,o,r,i,s,a)};e.NumericRenderer=t,e.renderers.NumericRenderer=t,e.renderers.registerRenderer("numeric",t)}(o),a=function(e,t,n,r,i,s,a){var l;o.renderers.TextRenderer.apply(this,arguments),s=t.innerHTML;var c=a.hashLength||s.length,u=a.hashSymbol||"*";for(l="";l.split(u).length-1<c;l+=u);o.Dom.fastInnerHTML(t,l)},(s=o).PasswordRenderer=a,s.renderers.PasswordRenderer=a,s.renderers.registerRenderer("password",a),function(e){function t(t,n,o,r,i,s,a){e.renderers.cellDecorator.apply(this,arguments),e.Dom.fastInnerHTML(n,s)}e.renderers.registerRenderer("html",t),e.renderers.HtmlRenderer=t}(o),function(e){function t(t){this.instance=t,this.state=e.EditorState.VIRGIN,this._opened=!1,this._closeCallback=null,this.init()}e.EditorState={VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"},t.prototype._fireCallbacks=function(e){this._closeCallback&&(this._closeCallback(e),this._closeCallback=null)},t.prototype.init=function(){},t.prototype.getValue=function(){throw Error("Editor getValue() method unimplemented")},t.prototype.setValue=function(e){throw Error("Editor setValue() method unimplemented")},t.prototype.open=function(){throw Error("Editor open() method unimplemented")},t.prototype.close=function(){throw Error("Editor close() method unimplemented")},t.prototype.prepare=function(t,n,o,r,i,s){this.TD=r,this.row=t,this.col=n,this.prop=o,this.originalValue=i,this.cellProperties=s,this.state=e.EditorState.VIRGIN},t.prototype.extend=function(){var e=this.constructor;return function(e,t){function n(){}return n.prototype=t.prototype,(e.prototype=new n).constructor=e,e}((function(){e.apply(this,arguments)}),e)},t.prototype.saveValue=function(e,t){if(t){var n,o=this.instance.getSelected();o[0]>o[2]&&(n=o[0],o[0]=o[2],o[2]=n),o[1]>o[3]&&(n=o[1],o[1]=o[3],o[3]=n),this.instance.populateFromArray(o[0],o[1],e,o[2],o[3],"edit")}else this.instance.populateFromArray(this.row,this.col,e,null,null,"edit")},t.prototype.beginEditing=function(t){this.state==e.EditorState.VIRGIN&&(this.instance.view.scrollViewport(new H(this.row,this.col)),this.instance.view.render(),this.state=e.EditorState.EDITING,t="string"==typeof t?t:this.originalValue,this.setValue(e.helper.stringify(t)),this.open(),this._opened=!0,this.focus(),this.instance.view.render())},t.prototype.finishEditing=function(t,n,o){if(o){var r=this._closeCallback;this._closeCallback=function(e){r&&r(e),o(e)}}if(!this.isWaiting())if(this.state!=e.EditorState.VIRGIN){if(this.state==e.EditorState.EDITING){if(t)return void this.cancelChanges();var i=[[String.prototype.trim.call(this.getValue())]];this.state=e.EditorState.WAITING,this.saveValue(i,n),this.instance.getCellValidator(this.cellProperties)?(s=this,this.instance.addHookOnce("afterValidate",(function(t){s.state=e.EditorState.FINISHED,s.discardEditor(t)}))):(this.state=e.EditorState.FINISHED,this.discardEditor(!0))}}else{var s=this;this.instance._registerTimeout(setTimeout((function(){s._fireCallbacks(!0)}),0))}},t.prototype.cancelChanges=function(){this.state=e.EditorState.FINISHED,this.discardEditor()},t.prototype.discardEditor=function(t){this.state===e.EditorState.FINISHED&&(!1===t&&!0!==this.cellProperties.allowInvalid?(this.instance.selectCell(this.row,this.col),this.focus(),this.state=e.EditorState.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this.state=e.EditorState.VIRGIN,this._fireCallbacks(!0)))},t.prototype.isOpened=function(){return this._opened},t.prototype.isWaiting=function(){return this.state===e.EditorState.WAITING},e.editors.BaseEditor=t}(o),function(t){var n=t.editors.BaseEditor.prototype.extend();n.prototype.init=function(){this.createElements(),this.bindEvents(),this.autoResize=u()},n.prototype.getValue=function(){return this.TEXTAREA.value},n.prototype.setValue=function(e){this.TEXTAREA.value=e};var o=function(e){var n=this.getActiveEditor(),o=t.helper.keyCode,r=(e.ctrlKey||e.metaKey)&&!e.altKey;if(e.target===n.TEXTAREA&&!e.isImmediatePropagationStopped())if(17!==e.keyCode&&224!==e.keyCode&&91!==e.keyCode&&93!==e.keyCode)switch(e.keyCode){case o.ARROW_RIGHT:t.Dom.getCaretPosition(n.TEXTAREA)!==n.TEXTAREA.value.length&&e.stopImmediatePropagation();break;case o.ARROW_LEFT:0!==t.Dom.getCaretPosition(n.TEXTAREA)&&e.stopImmediatePropagation();break;case o.ENTER:var i=n.instance.getSelected(),s=!(i[0]===i[2]&&i[1]===i[3]);(r&&!s||e.altKey)&&(n.isOpened()?(n.setValue(n.getValue()+"\n"),n.focus()):n.beginEditing(n.originalValue+"\n"),e.stopImmediatePropagation()),e.preventDefault();break;case o.A:case o.X:case o.C:case o.V:r&&e.stopImmediatePropagation();break;case o.BACKSPACE:case o.DELETE:case o.HOME:case o.END:e.stopImmediatePropagation()}else e.stopImmediatePropagation()};n.prototype.open=function(){this.refreshDimensions(),this.instance.addHook("beforeKeyDown",o)},n.prototype.close=function(){this.textareaParentStyle.display="none",this.autoResize.unObserve(),document.activeElement===this.TEXTAREA&&this.instance.listen(),this.instance.removeHook("beforeKeyDown",o)},n.prototype.focus=function(){this.TEXTAREA.focus(),t.Dom.setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length)},n.prototype.createElements=function(){this.$body=e(document.body),this.TEXTAREA=document.createElement("TEXTAREA"),this.$textarea=e(this.TEXTAREA),t.Dom.addClass(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.TEXTAREA_PARENT=document.createElement("DIV"),t.Dom.addClass(this.TEXTAREA_PARENT,"handsontableInputHolder"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.textareaParentStyle.top=0,this.textareaParentStyle.left=0,this.textareaParentStyle.display="none",this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.instance.rootElement[0].appendChild(this.TEXTAREA_PARENT);var n=this;this.instance._registerTimeout(setTimeout((function(){n.refreshDimensions()}),0))},n.prototype.checkEditorSection=function(){return this.row<this.instance.getSettings().fixedRowsTop?this.col<this.instance.getSettings().fixedColumnsLeft?"corner":"top":this.col<this.instance.getSettings().fixedColumnsLeft?"left":void 0},n.prototype.getEditedCell=function(){var e;switch(this.checkEditorSection()){case"top":e=this.instance.view.wt.wtScrollbars.vertical.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=101;break;case"corner":e=this.instance.view.wt.wtScrollbars.corner.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=103;break;case"left":e=this.instance.view.wt.wtScrollbars.horizontal.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=102;break;default:e=this.instance.getCell(this.row,this.col),this.textareaParentStyle.zIndex=""}return-1!=e&&-2!=e?e:void 0},n.prototype.refreshDimensions=function(){if(this.state===t.EditorState.EDITING&&(this.TD=this.getEditedCell(),this.TD)){var n=e(this.TD),o=t.Dom.offset(this.TD),r=t.Dom.offset(this.instance.rootElement[0]),i=o.top-r.top-1,s=o.left-r.left-1,a=this.instance.getSettings(),l=!1===a.rowHeaders?0:1,c=!1===a.colHeaders?0:1;this.checkEditorSection(),i<0&&(i=0),s<0&&(s=0),l>0&&parseInt(n.css("border-top-width"),10)>0&&(i+=1),c>0&&parseInt(n.css("border-left-width"),10)>0&&(s+=1),this.textareaParentStyle.top=i+"px",this.textareaParentStyle.left=s+"px";var u=this.TD.offsetTop-this.instance.view.wt.wtScrollbars.vertical.getScrollPosition(),h=this.TD.offsetLeft-this.instance.view.wt.wtScrollbars.horizontal.getScrollPosition(),d=n.width(),f=this.instance.view.maximumVisibleElementWidth(h)-10,p=n.outerHeight()-4,g=this.instance.view.maximumVisibleElementHeight(u)-2;parseInt(n.css("border-top-width"),10)>0&&(p-=1),parseInt(n.css("border-left-width"),10)>0&&l>0&&(d-=1),this.TEXTAREA.style.fontSize=t.Dom.getComputedStyle(this.TD).fontSize,this.TEXTAREA.style.fontFamily=t.Dom.getComputedStyle(this.TD).fontFamily,this.autoResize.init(this.TEXTAREA,{minHeight:Math.min(p,g),maxHeight:g,minWidth:Math.min(d,f),maxWidth:f}),this.textareaParentStyle.display="block"}},n.prototype.bindEvents=function(){var e=this;this.$textarea.on("cut.editor",(function(e){e.stopPropagation()})),this.$textarea.on("paste.editor",(function(e){e.stopPropagation()})),this.instance.addHook("afterScrollVertically",(function(){e.refreshDimensions()}))},t.editors.TextEditor=n,t.editors.registerEditor("text",t.editors.TextEditor)}(o),function(t){var n=t.editors.BaseEditor.prototype.extend();n.prototype.beginEditing=function(){var t=this.TD.querySelector('input[type="checkbox"]');t&&e(t).trigger("click")},n.prototype.finishEditing=function(){},n.prototype.init=function(){},n.prototype.open=function(){},n.prototype.close=function(){},n.prototype.getValue=function(){},n.prototype.setValue=function(){},n.prototype.focus=function(){},t.editors.CheckboxEditor=n,t.editors.registerEditor("checkbox",n)}(o),function(t){var n=t.editors.TextEditor.prototype.extend();n.prototype.init=function(){if(!e.datepicker)throw new Error("jQuery UI Datepicker dependency not found. Did you forget to include jquery-ui.custom.js or its substitute?");t.editors.TextEditor.prototype.init.apply(this,arguments),this.isCellEdited=!1;var n=this;this.instance.addHook("afterDestroy",(function(){n.destroyElements()}))},n.prototype.createElements=function(){t.editors.TextEditor.prototype.createElements.apply(this,arguments),this.datePicker=document.createElement("DIV"),t.Dom.addClass(this.datePicker,"htDatepickerHolder"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=99,document.body.appendChild(this.datePicker),this.$datePicker=e(this.datePicker);var n=this,o={dateFormat:"yy-mm-dd",showButtonPanel:!0,changeMonth:!0,changeYear:!0,onSelect:function(e){n.setValue(e),n.finishEditing(!1)}};this.$datePicker.datepicker(o),this.$datePicker.on("mousedown",(function(e){e.stopPropagation()})),this.hideDatepicker()},n.prototype.destroyElements=function(){this.$datePicker.datepicker("destroy"),this.$datePicker.remove()},n.prototype.open=function(){t.editors.TextEditor.prototype.open.call(this),this.showDatepicker()},n.prototype.finishEditing=function(e,n){this.hideDatepicker(),t.editors.TextEditor.prototype.finishEditing.apply(this,arguments)},n.prototype.showDatepicker=function(){var t=e(this.TD),n=t.offset();this.datePickerStyle.top=n.top+t.height()+"px",this.datePickerStyle.left=n.left+"px";var o={defaultDate:this.originalValue||void 0};e.extend(o,this.cellProperties),this.$datePicker.datepicker("option",o),this.originalValue&&this.$datePicker.datepicker("setDate",this.originalValue),this.datePickerStyle.display="block"},n.prototype.hideDatepicker=function(){this.datePickerStyle.display="none"},t.editors.DateEditor=n,t.editors.registerEditor("date",n)}(o),function(t){var n=t.editors.TextEditor.prototype.extend();n.prototype.createElements=function(){t.editors.TextEditor.prototype.createElements.apply(this,arguments);var n=document.createElement("DIV");n.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(n),this.$htContainer=e(n),this.$htContainer.handsontable()},n.prototype.prepare=function(n,o,r,i,s,a){t.editors.TextEditor.prototype.prepare.apply(this,arguments);var l=this,c={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,cells:function(){return{readOnly:!0}},fillHandle:!1,afterOnCellMouseDown:function(){var e=this.getValue();void 0!==e&&l.setValue(e),l.instance.destroyEditor()}};this.cellProperties.handsontable&&(c=e.extend(c,a.handsontable)),this.$htContainer.handsontable("destroy"),this.$htContainer.handsontable(c)};var o=function(e){if(!e.isImmediatePropagationStopped()){var n,o=this.getActiveEditor(),r=o.$htContainer.handsontable("getInstance");if(e.keyCode==t.helper.keyCode.ARROW_DOWN)if(r.getSelected()){var i=r.getSelected()[0],s=r.countRows()-1;n=Math.min(s,i+1)}else n=0;else e.keyCode==t.helper.keyCode.ARROW_UP&&r.getSelected()&&(n=(i=r.getSelected()[0])-1);void 0!==n&&(n<0?r.deselectCell():r.selectCell(n,0),e.preventDefault(),e.stopImmediatePropagation(),o.instance.listen(),o.TEXTAREA.focus())}};n.prototype.open=function(){this.instance.addHook("beforeKeyDown",o),t.editors.TextEditor.prototype.open.apply(this,arguments),this.$htContainer.handsontable("render"),this.cellProperties.strict?(this.$htContainer.handsontable("selectCell",0,0),this.TEXTAREA.style.visibility="hidden"):(this.$htContainer.handsontable("deselectCell"),this.TEXTAREA.style.visibility="visible"),t.Dom.setCaretPosition(this.TEXTAREA,0,this.TEXTAREA.value.length)},n.prototype.close=function(){this.instance.removeHook("beforeKeyDown",o),this.instance.listen(),t.editors.TextEditor.prototype.close.apply(this,arguments)},n.prototype.focus=function(){this.instance.listen(),t.editors.TextEditor.prototype.focus.apply(this,arguments)},n.prototype.beginEditing=function(e){var n=this.instance.getSettings().onBeginEditing;n&&!1===n()||t.editors.TextEditor.prototype.beginEditing.apply(this,arguments)},n.prototype.finishEditing=function(e,n){if(this.$htContainer.handsontable("isListening")&&this.instance.listen(),this.$htContainer.handsontable("getSelected")){var o=this.$htContainer.handsontable("getInstance").getValue();void 0!==o&&this.setValue(o)}return t.editors.TextEditor.prototype.finishEditing.apply(this,arguments)},t.editors.HandsontableEditor=n,t.editors.registerEditor("handsontable",n)}(o),function(e){var t=e.editors.HandsontableEditor.prototype.extend();t.prototype.init=function(){e.editors.HandsontableEditor.prototype.init.apply(this,arguments);var t=this.$htContainer.handsontable("getInstance");t.updateSettings({height:1}),this.query=null,this.choices=[]},t.prototype.createElements=function(){e.editors.HandsontableEditor.prototype.createElements.apply(this,arguments);var t=function(){return-1!=n.navigator.platform.indexOf("Mac")?"htMacScroll":""};this.$htContainer.addClass("autocompleteEditor"),this.$htContainer.addClass(t())};var o=!1,r=function(t){o=!1;var n=this.getActiveEditor(),r=e.helper.keyCode;(e.helper.isPrintableChar(t.keyCode)||t.keyCode===r.BACKSPACE||t.keyCode===r.DELETE||t.keyCode===r.INSERT)&&n.instance._registerTimeout(setTimeout((function(){n.queryChoices(n.TEXTAREA.value),o=!0}),0))};t.prototype.prepare=function(){this.instance.addHook("beforeKeyDown",r),e.editors.HandsontableEditor.prototype.prepare.apply(this,arguments)},t.prototype.open=function(){e.editors.HandsontableEditor.prototype.open.apply(this,arguments),this.TEXTAREA.style.visibility="visible",this.focus();var t=this.$htContainer.handsontable("getInstance"),n=this;t.updateSettings({colWidths:[e.Dom.outerWidth(this.TEXTAREA)-2],afterRenderer:function(e,t,o,r,i){var s=!0===this.getCellMeta(t,o).filteringCaseSensitive?i.indexOf(this.query):i.toLowerCase().indexOf(n.query.toLowerCase());if(-1!=s){var a=i.substr(s,n.query.length);e.innerHTML=i.replace(a,"<strong>"+a+"</strong>")}}}),o&&(o=!1),n.instance._registerTimeout(setTimeout((function(){n.queryChoices(n.TEXTAREA.value)}),0))},t.prototype.close=function(){e.editors.HandsontableEditor.prototype.close.apply(this,arguments)},t.prototype.queryChoices=function(t){if(this.query=t,"function"==typeof this.cellProperties.source){var n=this;this.cellProperties.source(t,(function(e){n.updateChoicesList(e)}))}else if(e.helper.isArray(this.cellProperties.source)){var o;if(t&&!1!==this.cellProperties.filter){var r=!0===this.cellProperties.filteringCaseSensitive,i=t.toLowerCase();o=this.cellProperties.source.filter((function(e){return r?-1!=e.indexOf(t):-1!=e.toLowerCase().indexOf(i)}))}else o=this.cellProperties.source;this.updateChoicesList(o)}else this.updateChoicesList([])},t.prototype.updateChoicesList=function(n){var o,r=e.Dom.getCaretPosition(this.TEXTAREA),i=e.Dom.getSelectionEndPosition(this.TEXTAREA),s=t.sortByRelevance(this.getValue(),n,this.cellProperties.filteringCaseSensitive);if(0!=this.cellProperties.filter){for(var a=[],l=0,c=s.length;l<c;l++)a.push(n[s[l]]);o=0,n=a}else o=s[0];this.choices=n,this.$htContainer.handsontable("loadData",e.helper.pivot([n])),this.$htContainer.handsontable("updateSettings",{height:this.getDropdownHeight()}),!0===this.cellProperties.strict&&this.highlightBestMatchingChoice(o),this.instance.listen(),this.TEXTAREA.focus(),e.Dom.setCaretPosition(this.TEXTAREA,r,r!=i?i:void 0)},t.prototype.finishEditing=function(t){t||this.instance.removeHook("beforeKeyDown",r),e.editors.HandsontableEditor.prototype.finishEditing.apply(this,arguments)},t.prototype.highlightBestMatchingChoice=function(e){"number"==typeof e?this.$htContainer.handsontable("selectCell",e,0):this.$htContainer.handsontable("deselectCell")},t.sortByRelevance=function(e,t,n){var o,r,i,s,a,l=[],c=e.length,u=[];if(0===c){for(s=0,a=t.length;s<a;s++)u.push(s);return u}for(s=0,a=t.length;s<a;s++)o=t[s],-1!=(r=n?o.indexOf(e):o.toLowerCase().indexOf(e.toLowerCase()))&&(i=o.length-r-c,l.push({baseIndex:s,index:r,charsLeft:i,value:o}));for(l.sort((function(e,t){return-1===t.index?-1:-1===e.index?1:e.index<t.index?-1:t.index<e.index?1:e.index===t.index?e.charsLeft<t.charsLeft?-1:e.charsLeft>t.charsLeft?1:0:void 0})),s=0,a=l.length;s<a;s++)u.push(l[s].baseIndex);return u},t.prototype.getDropdownHeight=function(){var e=this.$htContainer.handsontable("getInstance").getRowHeight(0)||23;return this.choices.length>=10?10*e:this.choices.length*e+8},e.editors.AutocompleteEditor=t,e.editors.registerEditor("autocomplete",t)}(o),function(t){var n=t.editors.TextEditor.prototype.extend();n.prototype.createElements=function(){t.editors.TextEditor.prototype.createElements.apply(this,arguments),this.TEXTAREA=document.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.$textarea=e(this.TEXTAREA),t.Dom.empty(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)},t.editors.PasswordEditor=n,t.editors.registerEditor("password",n)}(o),function(e){var t=e.editors.BaseEditor.prototype.extend();t.prototype.init=function(){this.select=document.createElement("SELECT"),e.Dom.addClass(this.select,"htSelectEditor"),this.select.style.display="none",this.instance.rootElement[0].appendChild(this.select)},t.prototype.prepare=function(){e.editors.BaseEditor.prototype.prepare.apply(this,arguments);var t,n=this.cellProperties.selectOptions;for(var o in t="function"==typeof n?this.prepareOptions(n(this.row,this.col,this.prop)):this.prepareOptions(n),e.Dom.empty(this.select),t)if(t.hasOwnProperty(o)){var r=document.createElement("OPTION");r.value=o,e.Dom.fastInnerHTML(r,t[o]),this.select.appendChild(r)}},t.prototype.prepareOptions=function(t){var n={};if(e.helper.isArray(t))for(var o=0,r=t.length;o<r;o++)n[t[o]]=t[o];else"object"==typeof t&&(n=t);return n},t.prototype.getValue=function(){return this.select.value},t.prototype.setValue=function(e){this.select.value=e};var n=function(t){var n=this.getActiveEditor();switch(t.keyCode){case e.helper.keyCode.ARROW_UP:var o=n.select.find("option:selected").prev();1==o.length&&o.prop("selected",!0),t.stopImmediatePropagation(),t.preventDefault();break;case e.helper.keyCode.ARROW_DOWN:var r=n.select.find("option:selected").next();1==r.length&&r.prop("selected",!0),t.stopImmediatePropagation(),t.preventDefault()}};t.prototype.open=function(){var t=e.Dom.outerWidth(this.TD),o=e.Dom.outerHeight(this.TD),r=e.Dom.offset(this.instance.rootElement[0]),i=e.Dom.offset(this.TD);this.select.style.height=o+"px",this.select.style.minWidth=t+"px",this.select.style.top=i.top-r.top+"px",this.select.style.left=i.left-r.left+"px",this.select.style.margin="0px",this.select.style.display="",this.instance.addHook("beforeKeyDown",n)},t.prototype.close=function(){this.select.style.display="none",this.instance.removeHook("beforeKeyDown",n)},t.prototype.focus=function(){this.select.focus()},e.editors.SelectEditor=t,e.editors.registerEditor("select",t)}(o),function(e){var t=e.editors.AutocompleteEditor.prototype.extend();t.prototype.prepare=function(){e.editors.AutocompleteEditor.prototype.prepare.apply(this,arguments),this.cellProperties.filter=!1,this.cellProperties.strict=!0},e.editors.DropdownEditor=t,e.editors.registerEditor("dropdown",t)}(o),o.NumericValidator=function(e,t){null===e&&(e=""),t(/^-?\d*(\.|\,)?\d*$/.test(e))};var c=function(e,t){var n=e,o="string"==typeof n?n.toLowerCase():null;return function(e){for(var r=!1,i=0,s=e.length;i<s;i++){if(n===e[i]){r=!0;break}if(o===e[i].toLowerCase()){r=!0;break}}t(r)}};o.AutocompleteValidator=function(e,t){this.strict&&this.source?"function"==typeof this.source?this.source(e,c(e,t)):c(e,t)(this.source):t(!0)},o.AutocompleteCell={editor:o.editors.AutocompleteEditor,renderer:o.renderers.AutocompleteRenderer,validator:o.AutocompleteValidator},o.CheckboxCell={editor:o.editors.CheckboxEditor,renderer:o.renderers.CheckboxRenderer},o.TextCell={editor:o.editors.TextEditor,renderer:o.renderers.TextRenderer},o.NumericCell={editor:o.editors.TextEditor,renderer:o.renderers.NumericRenderer,validator:o.NumericValidator,dataType:"number"},o.DateCell={editor:o.editors.DateEditor,renderer:o.renderers.AutocompleteRenderer},o.HandsontableCell={editor:o.editors.HandsontableEditor,renderer:o.renderers.AutocompleteRenderer},o.PasswordCell={editor:o.editors.PasswordEditor,renderer:o.renderers.PasswordRenderer,copyable:!1},o.DropdownCell={editor:o.editors.DropdownEditor,renderer:o.renderers.AutocompleteRenderer,validator:o.AutocompleteValidator},o.cellTypes={text:o.TextCell,date:o.DateCell,numeric:o.NumericCell,checkbox:o.CheckboxCell,autocomplete:o.AutocompleteCell,handsontable:o.HandsontableCell,password:o.PasswordCell,dropdown:o.DropdownCell},o.cellLookup={validator:{numeric:o.NumericValidator,autocomplete:o.AutocompleteValidator}};var u=function(){var e,t={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},r=document.body,i=document.createTextNode(""),s=document.createElement("SPAN"),a=function(e,t,o){n.attachEvent?e.attachEvent("on"+t,o):e.addEventListener(t,o,!1)},l=function(e,t,o){n.detachEvent?e.detachEvent("on"+t,o):e.removeEventListener(t,o,!1)},c=function(){void 0!==i.textContent?i.textContent=e.value:i.data=e.value,s.style.fontSize=o.Dom.getComputedStyle(e).fontSize,s.style.fontFamily=o.Dom.getComputedStyle(e).fontFamily,r.appendChild(s);var n=s.clientWidth;r.removeChild(s),e.style.height=t.minHeight+"px",t.minWidth>n?e.style.width=t.minWidth+"px":n>t.maxWidth?e.style.width=t.maxWidth+"px":e.style.width=n+"px";var a=e.scrollHeight;t.minHeight>a?e.style.height=t.minHeight+"px":t.maxHeight<a?(e.style.height=t.maxHeight+"px",e.style.overflowY="visible"):e.style.height=a+"px"},u=function(){n.setTimeout(c,0)};return{init:function(n,o){!function(n,o){e=n,function(n){if(n&&n.minHeight)if("inherit"==n.minHeight)t.minHeight=e.clientHeight;else{var o=parseInt(n.minHeight);isNaN(o)||(t.minHeight=o)}if(n&&n.maxHeight)if("inherit"==n.maxHeight)t.maxHeight=e.clientHeight;else{var r=parseInt(n.maxHeight);isNaN(r)||(t.maxHeight=r)}if(n&&n.minWidth)if("inherit"==n.minWidth)t.minWidth=e.clientWidth;else{var a=parseInt(n.minWidth);isNaN(a)||(t.minWidth=a)}if(n&&n.maxWidth)if("inherit"==n.maxWidth)t.maxWidth=e.clientWidth;else{var l=parseInt(n.maxWidth);isNaN(l)||(t.maxWidth=l)}s.firstChild||(s.className="autoResize",s.style.display="inline-block",s.appendChild(i))}(o),"TEXTAREA"==e.nodeName&&(e.style.resize="none",e.style.overflowY="",e.style.height=t.minHeight+"px",e.style.minWidth=t.minWidth+"px",e.style.maxWidth=t.maxWidth+"px",e.style.overflowY="hidden"),a(e,"change",c),a(e,"cut",u),a(e,"paste",u),a(e,"drop",u),a(e,"keydown",u),c()}(n,o)},unObserve:function(){l(e,"change",c),l(e,"cut",u),l(e,"paste",u),l(e,"drop",u),l(e,"keydown",u)}}};!function(e){function t(e){return e.split('"').length-1}e.SheetClip={parse:function(e){var n,o,r,i,s,a,l,c=[],u=0;for((r=e.split("\n")).length>1&&""===r[r.length-1]&&r.pop(),n=0,o=r.length;n<o;n+=1){for(r[n]=r[n].split("\t"),i=0,s=r[n].length;i<s;i+=1)c[u]||(c[u]=[]),a&&0===i?(l=c[u].length-1,c[u][l]=c[u][l]+"\n"+r[n][0],a&&1&t(r[n][0])&&(a=!1,c[u][l]=c[u][l].substring(0,c[u][l].length-1).replace(/""/g,'"'))):i===s-1&&0===r[n][i].indexOf('"')?(c[u].push(r[n][i].substring(1).replace(/""/g,'"')),a=!0):(c[u].push(r[n][i].replace(/""/g,'"')),a=!1);a||(u+=1)}return c},stringify:function(e){var t,n,o,r,i,s="";for(t=0,n=e.length;t<n;t+=1){for(o=0,r=e[t].length;o<r;o+=1)o>0&&(s+="\t"),"string"==typeof(i=e[t][o])?i.indexOf("\n")>-1?s+='"'+i.replace(/"/g,'""')+'"':s+=i:s+=null==i?"":i;t<n-1&&(s+="\n")}return s}}}(n);var h,d=function(){var e;return{getInstance:function(){return e?e.hasBeenDestroyed()&&e.init():e=new f,e.refCounter++,e}}}();function f(){this.refCounter=0,this.init()}f.prototype.init=function(){var e,t,n=this;this.copyCallbacks=[],this.cutCallbacks=[],this.pasteCallbacks=[],this.listenerElement=document.documentElement,t=document.body,document.getElementById("CopyPasteDiv")?(this.elDiv=document.getElementById("CopyPasteDiv"),this.elTextarea=this.elDiv.firstChild):(this.elDiv=document.createElement("DIV"),this.elDiv.id="CopyPasteDiv",(e=this.elDiv.style).position="fixed",e.top="-10000px",e.left="-10000px",t.appendChild(this.elDiv),this.elTextarea=document.createElement("TEXTAREA"),this.elTextarea.className="copyPaste",(e=this.elTextarea.style).width="10000px",e.height="10000px",e.overflow="hidden",this.elDiv.appendChild(this.elTextarea),void 0!==e.opacity&&(e.opacity=0)),this.keydownListener=function(e){var t=!1;if((e.metaKey||e.ctrlKey&&-1===navigator.userAgent.indexOf("Mac"))&&(t=!0),t){if(document.activeElement!==n.elTextarea&&(""!=n.getSelectionText()||-1!=["INPUT","SELECT","TEXTAREA"].indexOf(document.activeElement.nodeName)))return;n.selectNodeText(n.elTextarea),setTimeout((function(){n.selectNodeText(n.elTextarea)}),0)}!t||67!==e.keyCode&&86!==e.keyCode&&88!==e.keyCode||(88===e.keyCode?setTimeout((function(){n.triggerCut(e)}),0):86===e.keyCode&&setTimeout((function(){n.triggerPaste(e)}),0))},this._bindEvent(this.listenerElement,"keydown",this.keydownListener)},f.prototype.selectNodeText=function(e){e.select()},f.prototype.getSelectionText=function(){var e="";return n.getSelection?e=n.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e},f.prototype.copyable=function(e){if("string"!=typeof e&&void 0===e.toString)throw new Error("copyable requires string parameter");this.elTextarea.value=e},f.prototype.onCut=function(e){this.cutCallbacks.push(e)},f.prototype.onPaste=function(e){this.pasteCallbacks.push(e)},f.prototype.removeCallback=function(e){var t,n;for(t=0,n=this.copyCallbacks.length;t<n;t++)if(this.copyCallbacks[t]===e)return this.copyCallbacks.splice(t,1),!0;for(t=0,n=this.cutCallbacks.length;t<n;t++)if(this.cutCallbacks[t]===e)return this.cutCallbacks.splice(t,1),!0;for(t=0,n=this.pasteCallbacks.length;t<n;t++)if(this.pasteCallbacks[t]===e)return this.pasteCallbacks.splice(t,1),!0;return!1},f.prototype.triggerCut=function(e){var t=this;t.cutCallbacks&&setTimeout((function(){for(var n=0,o=t.cutCallbacks.length;n<o;n++)t.cutCallbacks[n](e)}),50)},f.prototype.triggerPaste=function(e,t){var n=this;n.pasteCallbacks&&setTimeout((function(){for(var o=(t||n.elTextarea.value).replace(/\n$/,""),r=0,i=n.pasteCallbacks.length;r<i;r++)n.pasteCallbacks[r](o,e)}),50)},f.prototype.destroy=function(){this.hasBeenDestroyed()||0!=--this.refCounter||(this.elDiv&&this.elDiv.parentNode&&(this.elDiv.parentNode.removeChild(this.elDiv),this.elDiv=null,this.elTextarea=null),this._unbindEvent(this.listenerElement,"keydown",this.keydownListener))},f.prototype.hasBeenDestroyed=function(){return!this.refCounter},f.prototype._bindEvent=n.jQuery?function(t,n,o){e(t).on(n+".copypaste",o)}:function(e,t,n){e.addEventListener(t,n,!1)},f.prototype._unbindEvent=n.jQuery?function(t,n,o){e(t).off(n+".copypaste",o)}:function(e,t,n){e.removeEventListener(t,n,!1)},function(e){var t={add:function(e,t){return e[t]=this.value,!0},remove:function(e,t){return delete e[t],!0},replace:function(e,t){return e[t]=this.value,!0},move:function(e,t,n){var o={op:"_get",path:this.from};return v(n,[o]),v(n,[{op:"remove",path:this.from}]),v(n,[{op:"add",path:this.path,value:o.value}]),!0},copy:function(e,t,n){var o={op:"_get",path:this.from};return v(n,[o]),v(n,[{op:"add",path:this.path,value:o.value}]),!0},test:function(e,t){return JSON.stringify(e[t])===JSON.stringify(this.value)},_get:function(e,t){this.value=e[t]}},o={add:function(e,t){return e.splice(t,0,this.value),!0},remove:function(e,t){return e.splice(t,1),!0},replace:function(e,t){return e[t]=this.value,!0},move:t.move,copy:t.copy,test:t.test,_get:t._get},r={add:function(e,t){var n={op:"add",path:t+i(this.name),value:this.object[this.name]};e.push(n)},delete:function(e,t){var n={op:"remove",path:t+i(this.name)};e.push(n)},update:function(e,t){var n={op:"replace",path:t+i(this.name),value:this.object[this.name]};e.push(n)}};function i(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function s(e,t){var n;for(var o in e)if(e.hasOwnProperty(o)){if(e[o]===t)return i(o)+"/";if("object"==typeof e[o]&&""!=(n=s(e[o],t)))return i(o)+"/"+n}return""}function a(e,t){if(e===t)return"/";var n=s(e,t);if(""===n)throw new Error("Object not found in root");return"/"+n}var l=[];e.intervals;var c,u,h=function(e){this.observers=[],this.obj=e},d=function(e,t){this.callback=e,this.observer=t};function f(e){for(var t=0,n=l.length;t<n;t++)if(l[t].obj===e)return l[t]}function p(e,t){if(Object.observe)for(var n in Object.observe(t,e),t)if(t.hasOwnProperty(n)){var o=t[n];o&&"object"==typeof o&&p(e,o)}return e}function g(e,t){if(Object.observe)for(var n in Object.unobserve(t,e),t)if(t.hasOwnProperty(n)){var o=t[n];o&&"object"==typeof o&&g(e,o)}return e}function m(e){if(Object.observe)Object.deliverChangeRecords(e);else{for(var t,n=0,o=l.length;n<o;n++)if(l[n].obj===e.object){t=l[n];break}y(t.value,e.object,e.patches,"")}var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function y(e,t,n,o){for(var r=c(t),s=c(e),a=!1,l=s.length-1;l>=0;l--){var u=e[d=s[l]];if(t.hasOwnProperty(d)){var h=t[d];u instanceof Object?y(u,h,n,o+"/"+i(d)):u!=h&&(n.push({op:"replace",path:o+"/"+i(d),value:h}),e[d]=h)}else n.push({op:"remove",path:o+"/"+i(d)}),delete e[d],a=!0}if(a||r.length!=s.length)for(l=0;l<r.length;l++){var d=r[l];e.hasOwnProperty(d)||(n.push({op:"add",path:o+"/"+i(d),value:t[d]}),e[d]=JSON.parse(JSON.stringify(t[d])))}}function v(e,n){for(var r,i=!1,s=0,a=n.length;s<a;){for(var l=(r=n[s]).path.split("/"),c=e,h=1,d=l.length;;)if(u(c)){var f=parseInt(l[h],10);if(++h>=d){i=o[r.op].call(r,c,f,e);break}c=c[f]}else{var p=l[h];if(-1!=p.indexOf("~")&&(p=p.replace(/~1/g,"/").replace(/~0/g,"~")),++h>=d){i=t[r.op].call(r,c,p,e);break}c=c[p]}s++}return i}e.unobserve=function(e,t){m(t),Object.observe?g(t,e):clearTimeout(t.next),function(e,t){for(var n=0,o=e.observers.length;n<o;n++)if(e.observers[n].observer===t)return void e.observers.splice(n,1)}(f(e),t)},e.observe=function(e,t){var o,i=[],s=e,c=f(e);if(c?o=function(e,t){for(var n=0,o=e.observers.length;n<o;n++)if(e.observers[n].callback===t)return e.observers[n].observer}(c,t):(c=new h(e),l.push(c)),o)return o;if(Object.observe)o=function(n){g(o,e),p(o,e);for(var l=0,c=n.length;l<c;){if(("length"!==n[l].name||!u(n[l].object))&&"__Jasmine_been_here_before__"!==n[l].name){var h=n[l].type;switch(h){case"new":h="add";break;case"deleted":h="delete";break;case"updated":h="update"}r[h].call(n[l],i,a(s,n[l].object))}l++}i&&t&&t(i),o.patches=i,i=[]};else if(o={},c.value=JSON.parse(JSON.stringify(e)),t){o.callback=t,o.next=null;var y=this.intervals||[100,1e3,1e4,6e4],v=0,b=function(){m(o)},w=function(){clearTimeout(o.next),o.next=setTimeout((function(){b(),v=0,o.next=setTimeout(C,y[v++])}),0)},C=function(){b(),v==y.length&&(v=y.length-1),o.next=setTimeout(C,y[v++])};void 0!==n&&(n.addEventListener?(n.addEventListener("mousedown",w),n.addEventListener("mouseup",w),n.addEventListener("keydown",w)):(n.attachEvent("onmousedown",w),n.attachEvent("onmouseup",w),n.attachEvent("onkeydown",w))),o.next=setTimeout(C,y[v++])}return o.patches=i,o.object=e,c.observers.push(new d(t,o)),p(o,e)},e.generate=m,c=Object.keys?Object.keys:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},u=Array.isArray?Array.isArray:function(e){return e.push&&"number"==typeof e.length},e.apply=v}(h||(h={})),t.apply=h.apply,t.observe=h.observe,t.unobserve=h.unobserve,t.generate=h.generate,o.PluginHookClass=function(){var e={onBeforeChange:"beforeChange",onChange:"afterChange",onCreateRow:"afterCreateRow",onCreateCol:"afterCreateCol",onSelection:"afterSelection",onCopyLimit:"afterCopyLimit",onSelectionEnd:"afterSelectionEnd",onSelectionByProp:"afterSelectionByProp",onSelectionEndByProp:"afterSelectionEndByProp"};function t(){this.hooks={beforeInitWalkontable:[],beforeInit:[],beforeCopy:[],beforeRender:[],beforeSetRangeEnd:[],beforeDrawBorders:[],beforeChange:[],beforeChangeRender:[],beforeRemoveCol:[],beforeRemoveRow:[],beforeValidate:[],beforeGetCellMeta:[],beforeAutofill:[],beforeKeyDown:[],beforeOnCellMouseDown:[],afterInit:[],afterLoadData:[],afterUpdateSettings:[],afterRender:[],afterRenderer:[],afterChange:[],afterValidate:[],afterGetCellMeta:[],afterSetCellMeta:[],afterGetColHeader:[],afterGetRowHeader:[],afterDestroy:[],afterRemoveRow:[],afterCreateRow:[],afterRemoveCol:[],afterCreateCol:[],afterDeselect:[],afterSelection:[],afterSelectionByProp:[],afterSelectionEnd:[],afterSelectionEndByProp:[],afterOnCellMouseDown:[],afterOnCellMouseOver:[],afterOnCellCornerMouseDown:[],afterScrollVertically:[],afterScrollHorizontally:[],afterCellMetaReset:[],afterIsMultipleSelectionCheck:[],afterDocumentKeyDown:[],modifyColWidth:[],modifyRowHeight:[],modifyRow:[],modifyCol:[]},this.globalBucket={},this.legacy=e}return t.prototype.getBucket=function(e){return e?(e.pluginHookBucket||(e.pluginHookBucket={}),e.pluginHookBucket):this.globalBucket},t.prototype.add=function(t,n,r){if(o.helper.isArray(n))for(var i=0,s=n.length;i<s;i++)this.add(t,n[i]);else{t in e&&(t=e[t]);var a=this.getBucket(r);void 0===a[t]&&(a[t]=[]),n.skip=!1,-1==a[t].indexOf(n)&&a[t].push(n)}return this},t.prototype.once=function(e,t,n){if(o.helper.isArray(t))for(var r=0,i=t.length;r<i;r++)t[r].runOnce=!0,this.add(e,t[r],n);else t.runOnce=!0,this.add(e,t,n)},t.prototype.remove=function(t,n,o){var r=!1;t in e&&(t=e[t]);var i=this.getBucket(o);if(void 0!==i[t])for(var s=0,a=i[t].length;s<a;s++)if(i[t][s]==n){i[t][s].skip=!0,r=!0;break}return r},t.prototype.run=function(t,n,o,r,i,s,a,l){n in e&&(n=e[n]),this._runBucket(this.globalBucket,t,n,o,r,i,s,a,l),this._runBucket(this.getBucket(t),t,n,o,r,i,s,a,l)},t.prototype._runBucket=function(e,t,n,o,r,i,s,a,l){var c=e[n];if(c)for(var u=0,h=c.length;u<h;u++)c[u].skip||(c[u].call(t,o,r,i,s,a,l),c[u].runOnce&&this.remove(n,c[u],e===this.globalBucket?null:t))},t.prototype.destroy=function(e){var t=this.getBucket(e);for(var n in t)if(t.hasOwnProperty(n))for(var o=0,r=t[n].length;o<r;o++)this.remove(n,t[n],e)},t.prototype.execute=function(t,n,o,r,i,s,a,l){return n in e&&(n=e[n]),o=this._executeBucket(this.globalBucket,t,n,o,r,i,s,a,l),this._executeBucket(this.getBucket(t),t,n,o,r,i,s,a,l)},t.prototype._executeBucket=function(e,t,n,o,r,i,s,a,l){var c,u=e[n];if(u)for(var h=0,d=u.length;h<d;h++)if(!u[h].skip&&(void 0!==(c=u[h].call(t,o,r,i,s,a,l))&&(o=c),u[h].runOnce&&this.remove(n,u[h],e===this.globalBucket?null:t),!1===c))return!1;return o},t.prototype.register=function(e){this.isRegistered(e)||(this.hooks[e]=[])},t.prototype.deregister=function(e){delete this.hooks[e]},t.prototype.isRegistered=function(e){return void 0!==this.hooks[e]},t.prototype.getRegistered=function(){return Object.keys(this.hooks)},t}(),o.hooks=new o.PluginHookClass,o.PluginHooks=o.hooks,function(e){var t=new function(){var n=this;function o(e){var t=document,n=this;n.table=t.createElement("table"),n.theadTh=t.createElement("th"),n.table.appendChild(t.createElement("thead")).appendChild(t.createElement("tr")).appendChild(n.theadTh),n.tableStyle=n.table.style,n.tableStyle.tableLayout="auto",n.tableStyle.width="auto",n.tbody=t.createElement("tbody"),n.table.appendChild(n.tbody),n.container=t.createElement("div"),n.container.className=e.rootElement[0].className+" hidden",n.containerStyle=n.container.style,n.container.appendChild(n.table)}this.beforeInit=function(){var e=this;e.autoColumnWidths=[],!1!==e.getSettings().autoColumnSize?e.autoColumnSizeTmp||(e.autoColumnSizeTmp={table:null,tableStyle:null,theadTh:null,tbody:null,container:null,containerStyle:null,determineBeforeNextRender:!0},e.addHook("beforeRender",t.determineIfChanged),e.addHook("modifyColWidth",t.modifyColWidth),e.addHook("afterDestroy",t.afterDestroy),e.determineColumnWidth=n.determineColumnWidth):e.autoColumnSizeTmp&&(e.removeHook("beforeRender",t.determineIfChanged),e.removeHook("modifyColWidth",t.modifyColWidth),e.removeHook("afterDestroy",t.afterDestroy),delete e.determineColumnWidth,n.afterDestroy.call(e))},this.determineIfChanged=function(e){e&&t.determineColumnsWidth.apply(this,arguments)},this.determineColumnWidth=function(t){var n=this,r=n.autoColumnSizeTmp;r.container||o.call(r,n),r.container.className=n.rootElement[0].className+" htAutoColumnSize",r.table.className=n.$table[0].className;for(var i=n.countRows(),s={},a=0,l=0;l<i;l++){var c=e.helper.stringify(n.getDataAtCell(l,t)),u=c.length;u>a&&(a=u),s[u]||(s[u]={needed:5,strings:[]}),s[u].needed&&(s[u].strings.push({value:c,row:l}),s[u].needed--)}var h=n.getSettings();for(var d in h.colHeaders&&n.view.appendColHeader(t,r.theadTh),e.Dom.empty(r.tbody),s)if(s.hasOwnProperty(d))for(var f=0,p=s[d].strings.length;f<p;f++){var g=s[d].strings[f].row,m=n.getCellMeta(g,t);m.col=t,m.row=g;var y=n.getCellRenderer(m),v=document.createElement("tr"),b=document.createElement("td");y(n,b,g,t,n.colToProp(t),s[d].strings[f].value,m),l++,v.appendChild(b),r.tbody.appendChild(v)}var w=n.rootElement[0].parentNode;w.appendChild(r.container);var C=e.Dom.outerWidth(r.table);return w.removeChild(r.container),C},this.determineColumnsWidth=function(){var e=this.getSettings();if(e.autoColumnSize||!e.colWidths)for(var t=this.countCols(),o=0;o<t;o++)this._getColWidthFromSettings(o)||(this.autoColumnWidths[o]=n.determineColumnWidth.call(this,o))},this.modifyColWidth=function(e,t){return this.autoColumnWidths[t]&&this.autoColumnWidths[t]>e?this.autoColumnWidths[t]:e},this.afterDestroy=function(){var e=this;e.autoColumnSizeTmp&&e.autoColumnSizeTmp.container&&e.autoColumnSizeTmp.container.parentNode&&e.autoColumnSizeTmp.container.parentNode.removeChild(e.autoColumnSizeTmp.container),e.autoColumnSizeTmp=null}};e.hooks.add("beforeInit",t.beforeInit),e.hooks.add("afterUpdateSettings",t.beforeInit)}(o);var p=new function(){var e=this;this.init=function(t){var o,s,a=this,l=a.getSettings().columnSorting;if(a.sortingEnabled=!!l,a.sortingEnabled){a.sortIndex=[];var c=n.call(a);void 0!==c?(o=c.sortColumn,s=c.sortOrder):(o=l.column,s=l.sortOrder),e.sortByColumn.call(a,o,s),a.sort=function(){var t=Array.prototype.slice.call(arguments);return e.sortByColumn.apply(a,t)},void 0===a.getSettings().observeChanges&&i.call(a),"afterInit"==t&&(r.call(a),a.addHook("afterCreateRow",e.afterCreateRow),a.addHook("afterRemoveRow",e.afterRemoveRow),a.addHook("afterLoadData",e.init))}else delete a.sort,a.removeHook("afterCreateRow",e.afterCreateRow),a.removeHook("afterRemoveRow",e.afterRemoveRow),a.removeHook("afterLoadData",e.init)},this.setSortingColumn=function(e,t){var n=this;if(void 0===e)return delete n.sortColumn,void delete n.sortOrder;n.sortColumn===e&&void 0===t?n.sortOrder=!n.sortOrder:n.sortOrder=void 0===t||t,n.sortColumn=e},this.sortByColumn=function(n,r){var i=this;e.setSortingColumn.call(i,n,r),void 0!==i.sortColumn&&(o.hooks.run(i,"beforeColumnSort",i.sortColumn,i.sortOrder),e.sort.call(i),i.render(),t.call(i),o.hooks.run(i,"afterColumnSort",i.sortColumn,i.sortOrder))};var t=function(){var e=this,t={};void 0!==e.sortColumn&&(t.sortColumn=e.sortColumn),void 0!==e.sortOrder&&(t.sortOrder=e.sortOrder),(t.hasOwnProperty("sortColumn")||t.hasOwnProperty("sortOrder"))&&o.hooks.run(e,"persistentStateSave","columnSorting",t)},n=function(){var e={};return o.hooks.run(this,"persistentStateLoad","columnSorting",e),e.value},r=function(){var t=this;t.rootElement.on("click.handsontable",".columnSorting",(function(n){var r,i,s=(r=n.target,i=o.Dom.closest(r,"TH"),o.Dom.index(i)-t.view.TBODY.querySelector("tr").querySelectorAll("th").length);e.sortByColumn.call(t,s)}))};function i(){var e=this;e._registerTimeout(setTimeout((function(){e.updateSettings({observeChanges:!0})}),0))}function s(e){return function(t,n){return"string"==typeof t[1]&&(t[1]=t[1].toLowerCase()),"string"==typeof n[1]&&(n[1]=n[1].toLowerCase()),t[1]===n[1]?0:null===t[1]||""===t[1]?1:null===n[1]||""===n[1]?-1:t[1]<n[1]?e?-1:1:t[1]>n[1]?e?1:-1:0}}function a(e){return function(t,n){if(t[1]===n[1])return 0;if(null===t[1])return 1;if(null===n[1])return-1;var o=new Date(t[1]),r=new Date(n[1]);return o<r?e?-1:1:o>r?e?1:-1:0}}function l(e){return void 0!==e.sortColumn}this.sort=function(){var e=this;if(void 0!==e.sortOrder){e.sortingEnabled=!1,e.sortIndex.length=0;for(var t=this.colOffset(),n=0,o=this.countRows()-e.getSettings().minSpareRows;n<o;n++)this.sortIndex.push([n,e.getDataAtCell(n,this.sortColumn+t)]);var r;switch(e.getCellMeta(0,e.sortColumn).type){case"date":r=a;break;default:r=s}for(this.sortIndex.sort(r(e.sortOrder)),n=this.sortIndex.length;n<e.countRows();n++)this.sortIndex.push([n,e.getDataAtCell(n,this.sortColumn+t)]);e.sortingEnabled=!0}},this.translateRow=function(e){var t=this;return t.sortingEnabled&&t.sortIndex&&t.sortIndex.length&&t.sortIndex[e]?t.sortIndex[e][0]:e},this.untranslateRow=function(e){var t=this;if(t.sortingEnabled&&t.sortIndex&&t.sortIndex.length)for(var n=0;n<t.sortIndex.length;n++)if(t.sortIndex[n][0]==e)return n},this.getColHeader=function(e,t){this.getSettings().columnSorting&&e>=0&&o.Dom.addClass(t.querySelector(".colHeader"),"columnSorting")},this.afterCreateRow=function(e,n){var o=this;if(l(o)){for(var r=0;r<o.sortIndex.length;r++)o.sortIndex[r][0]>=e&&(o.sortIndex[r][0]+=n);for(r=0;r<n;r++)o.sortIndex.splice(e+r,0,[e+r,o.getData()[e+r][o.sortColumn+o.colOffset()]]);t.call(o)}},this.afterRemoveRow=function(n,o){var r=this;if(l(r)){var i=e.translateRow.call(r,n);r.sortIndex.splice(n,o);for(var s=0;s<r.sortIndex.length;s++)r.sortIndex[s][0]>i&&(r.sortIndex[s][0]-=o);t.call(r)}},this.afterChangeSort=function(t){var n=this,o=!1,r={};if(t){for(var i=0;i<t.length;i++)if(t[i][1]==n.sortColumn){o=!0,r.row=e.translateRow.call(n,t[i][0]),r.col=t[i][1];break}o&&n._registerTimeout(setTimeout((function(){e.sort.call(n),n.render(),n.selectCell(e.untranslateRow.call(n,r.row),r.col)}),0))}}};function g(t){var n=function(){var e=i();e.style.display="none",e.value=""},r=function(){e(document).off("mousedown.htCommment"),e(document).on("mouseover.htCommment",o.helper.proxy(s))},i=function(e){var t=document.getElementsByClassName("htComments")[0];if(!t){t=document.createElement("DIV");var n=document.createElement("TEXTAREA");o.Dom.addClass(n,"htCommentTextArea"),t.appendChild(n),o.Dom.addClass(t,"htComments"),document.getElementsByTagName("body")[0].appendChild(t)}return e=e||"",document.getElementsByClassName("htCommentTextArea")[0].value=e,t},s=function(e){if(-1!=e.target.className.indexOf("htCommentCell")){r();var i=t.view.wt.wtTable.getCoords(e.target),s={from:new H(i.row,i.col)};o.Comments.showComment(s)}else"htCommentTextArea"!=e.target.className&&n()};return{init:function(){e(document).on("mouseover.htCommment",o.helper.proxy(s))},showComment:function(s){var a=t.getCellMeta(s.from.row,s.from.col),l="";a.comment&&(l=a.comment);var c=i(l);c.style.display="block",function(i,s){var a=t.view.wt.wtTable.getCell(i.from),l=o.Dom.offset(a),c=t.getColWidth(i.from.col);s.style.position="absolute",s.style.left=l.left+c+"px",s.style.top=l.top+"px",s.style.zIndex=2,function(i){e(document).on("mousedown.htCommment",o.helper.proxy((function(o){if(e(document).off("mouseover.htCommment"),"htCommentTextArea"!=o.target.className&&-1==o.target.innerHTML.indexOf("Comment")){var s=document.getElementsByClassName("htCommentTextArea")[0].value;s.trim().length>1&&function(e,t,n){!function(e,t,n,o){o.setCellMeta(e,t,"comment",n),o.render()}(e.from.row,e.from.col,t,n)}(i,s,t),r(),n()}})))}(i)}(s,c)},removeComment:function(e,n){t.removeCellMeta(e,n,"comment"),t.render()},checkSelectionCommentsConsistency:function(){var e=!1,n=t.getSelectedRange().from;return t.getCellMeta(n.row,n.col).comment&&(e=!0),e}}}o.hooks.add("afterInit",(function(){p.init.call(this,"afterInit")})),o.hooks.add("afterUpdateSettings",(function(){p.init.call(this,"afterUpdateSettings")})),o.hooks.add("modifyRow",p.translateRow),o.hooks.add("afterGetColHeader",p.getColHeader),o.hooks.register("beforeColumnSort"),o.hooks.register("afterColumnSort"),function(t){function n(e,t,n,o){var r=this.getCellMeta(e,t),i=o;r.className&&(i="vertical"===n?function(e,t){return-1!=e.indexOf(t)?e:(e=e.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ",""),e+=" "+t)}(r.className,o):function(e,t){return-1!=e.indexOf(t)?e:(e=e.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ",""),e+=" "+t)}(r.className,o)),this.setCellMeta(e,t,"className",i),this.render()}function o(e,t,o){if(e.from.row==e.to.row&&e.from.col==e.to.col)n.call(this,e.from.row,e.from.col,t,o);else for(var r=e.from.row;r<=e.to.row;r++)for(var i=e.from.col;i<=e.to.col;i++)n.call(this,r,i,t,o)}function r(e,n){this.instance=e;var i=this;i.menus=[],i.triggerRows=[],this.enabled=!0,this.instance.addHook("afterDestroy",(function(){i.destroy()})),this.defaultOptions={items:[{key:"row_above",name:"Insert row above",callback:function(e,t){this.alter("insert_row",t.start.row)},disabled:function(){var e=this.getSelected(),t=[0,e[1],this.view.wt.wtTable.getRowStrategy().cellCount-1,e[1]].join(",")==e.join(",");return e[0]<0||this.countRows()>=this.getSettings().maxRows||t}},{key:"row_below",name:"Insert row below",callback:function(e,t){this.alter("insert_row",t.end.row+1)},disabled:function(){var e=this.getSelected(),t=[0,e[1],this.view.wt.wtTable.getRowStrategy().cellCount-1,e[1]].join(",")==e.join(",");return this.getSelected()[0]<0||this.countRows()>=this.getSettings().maxRows||t}},r.SEPARATOR,{key:"col_left",name:"Insert column on the left",callback:function(e,t){this.alter("insert_col",t.start.col)},disabled:function(){var e=this.getSelected(),t=[e[0],0,e[0],this.view.wt.wtTable.getColumnStrategy().cellCount-1].join(",")==e.join(",");return this.getSelected()[1]<0||this.countCols()>=this.getSettings().maxCols||t}},{key:"col_right",name:"Insert column on the right",callback:function(e,t){this.alter("insert_col",t.end.col+1)},disabled:function(){var e=this.getSelected(),t=[e[0],0,e[0],this.view.wt.wtTable.getColumnStrategy().cellCount-1].join(",")==e.join(",");return e[1]<0||this.countCols()>=this.getSettings().maxCols||t}},r.SEPARATOR,{key:"remove_row",name:"Remove row",callback:function(e,t){var n=t.end.row-t.start.row+1;this.alter("remove_row",t.start.row,n)},disabled:function(){var e=this.getSelected(),t=[0,e[1],this.view.wt.wtTable.getRowStrategy().cellCount-1,e[1]].join(",")==e.join(",");return e[0]<0||t}},{key:"remove_col",name:"Remove column",callback:function(e,t){var n=t.end.col-t.start.col+1;this.alter("remove_col",t.start.col,n)},disabled:function(){var e=this.getSelected(),t=[e[0],0,e[0],this.view.wt.wtTable.getColumnStrategy().cellCount-1].join(",")==e.join(",");return e[1]<0||t}},r.SEPARATOR,{key:"undo",name:"Undo",callback:function(){this.undo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isUndoAvailable()}},{key:"redo",name:"Redo",callback:function(){this.redo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isRedoAvailable()}},r.SEPARATOR,{key:"make_read_only",name:function(){var e="Read only";return i.checkSelectionReadOnlyConsistency(this)&&(e=i.markSelected(e)),e},callback:function(){var e=i.checkSelectionReadOnlyConsistency(this),t=this;this.getSelectedRange().forAll((function(n,o){t.getCellMeta(n,o).readOnly=!e})),this.render()}},r.SEPARATOR,{key:"alignment",name:"Alignment",submenu:{items:[{name:function(){var e="Left";return i.checkSelectionAlignment(this,"htLeft")&&(e=i.markSelected(e)),e},callback:function(){o.call(this,this.getSelectedRange(),"horizontal","htLeft")},disabled:!1},{name:function(){var e="Center";return i.checkSelectionAlignment(this,"htCenter")&&(e=i.markSelected(e)),e},callback:function(){o.call(this,this.getSelectedRange(),"horizontal","htCenter")},disabled:!1},{name:function(){var e="Right";return i.checkSelectionAlignment(this,"htRight")&&(e=i.markSelected(e)),e},callback:function(){o.call(this,this.getSelectedRange(),"horizontal","htRight")},disabled:!1},{name:function(){var e="Justify";return i.checkSelectionAlignment(this,"htJustify")&&(e=i.markSelected(e)),e},callback:function(){o.call(this,this.getSelectedRange(),"horizontal","htJustify")},disabled:!1},r.SEPARATOR,{name:function(){var e="Top";return i.checkSelectionAlignment(this,"htTop")&&(e=i.markSelected(e)),e},callback:function(){o.call(this,this.getSelectedRange(),"vertical","htTop")},disabled:!1},{name:function(){var e="Middle";return i.checkSelectionAlignment(this,"htMiddle")&&(e=i.markSelected(e)),e},callback:function(){o.call(this,this.getSelectedRange(),"vertical","htMiddle")},disabled:!1},{name:function(){var e="Bottom";return i.checkSelectionAlignment(this,"htBottom")&&(e=i.markSelected(e)),e},callback:function(){o.call(this,this.getSelectedRange(),"vertical","htBottom")},disabled:!1}]}}]},i.options={},t.helper.extend(i.options,this.options),this.bindMouseEvents(),this.markSelected=function(e){return"<span class='selected'>✓</span>"+e},this.checkSelectionAlignment=function(e,t){var n=!1;return e.getSelectedRange().forAll((function(o,r){var i=e.getCellMeta(o,r).className;if(i&&-1!=i.indexOf(t))return n=!0,!1})),n},this.checkSelectionReadOnlyConsistency=function(e){var t=!1;return e.getSelectedRange().forAll((function(n,o){if(e.getCellMeta(n,o).readOnly)return t=!0,!1})),t},t.hooks.run(e,"afterContextMenuDefaultOptions",this.defaultOptions)}function i(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n].key===t)return e[n]}function s(){var e=this,n=e.getSettings().contextMenu,o=t.helper.isObject(n)?n:{};n?(e.contextMenu||(e.contextMenu=new r(e,o)),e.contextMenu.enable()):e.contextMenu&&(e.contextMenu.destroy(),delete e.contextMenu)}r.prototype.createMenu=function(n,o){var r;return n&&(n="htContextSubMenu_"+(n=n.replace(/ /g,"_"))),(r=n?e("body > .htContextMenu."+n)[0]:e("body > .htContextMenu")[0])||(r=document.createElement("DIV"),t.Dom.addClass(r,"htContextMenu"),n&&t.Dom.addClass(r,n),document.getElementsByTagName("body")[0].appendChild(r)),this.menus.indexOf(r)<0&&(this.menus.push(r),o=o||0,this.triggerRows.push(o)),r},r.prototype.bindMouseEvents=function(){this.instance.rootElement.on("contextmenu.htContextMenu",t.helper.proxy((function(n){var o=this.instance.getSettings();this.closeAll(),n.preventDefault(),n.stopPropagation();var i=this.instance.getSettings().rowHeaders,s=this.instance.getSettings().colHeaders;if(i||s||"TD"==n.target.nodeName||t.Dom.hasClass(n.target,"current")&&t.Dom.hasClass(n.target,"wtBorder")){var a=this.createMenu(),l=this.getItems(o.contextMenu);this.show(a,l),this.setMenuPosition(n,a),e(document).on("mousedown.htContextMenu",t.helper.proxy(r.prototype.closeAll,this))}}),this))},r.prototype.bindTableEvents=function(){this._afterScrollCallback=function(){},this.instance.addHook("afterScrollVertically",this._afterScrollCallback),this.instance.addHook("afterScrollHorizontally",this._afterScrollCallback)},r.prototype.unbindTableEvents=function(){this._afterScrollCallback&&(this.instance.removeHook("afterScrollVertically",this._afterScrollCallback),this.instance.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)},r.prototype.performAction=function(t,n){var o=e(n).handsontable("getInstance"),i=o.getSelected()[0],s=o.getData()[i];if(!0!==s.disabled&&("function"!=typeof s.disabled||!0!==s.disabled.call(this.instance))&&!s.hasOwnProperty("submenu")){if("function"!=typeof s.callback)return;var a=this.instance.getSelectedRange(),l=r.utils.normalizeSelection(a);s.callback.call(this.instance,s.key,l,t),this.closeAll()}},r.prototype.unbindMouseEvents=function(){this.instance.rootElement.off("contextmenu.htContextMenu"),e(document).off("mousedown.htContextMenu")},r.prototype.show=function(n,o){n.removeAttribute("style"),n.style.display="block";var r=this;e(n).off("mousedown.htContextMenu").on("mousedown.htContextMenu",(function(e){r.performAction(e,n)})),e(n).handsontable({data:o,colHeaders:!1,colWidths:[200],readOnly:!0,copyPaste:!1,columns:[{data:"name",renderer:t.helper.proxy(this.renderer,this)}],beforeKeyDown:function(e){r.onBeforeKeyDown(e,n)},afterOnCellMouseOver:function(e,t,o){r.onCellMouseOver(e,t,o,n)},renderAllRows:!0}),this.bindTableEvents(),e(n).handsontable("listen")},r.prototype.close=function(t){this.hide(t),e(document).off("mousedown.htContextMenu"),this.unbindTableEvents(),this.instance.listen()},r.prototype.closeAll=function(){for(;this.menus.length>0;){var e=this.menus.pop();e&&this.close(e)}this.triggerRows=[]},r.prototype.closeLastOpenedSubMenu=function(){var e=this.menus.pop();e&&this.hide(e)},r.prototype.hide=function(t){t.style.display="none",e(t).handsontable("destroy")},r.prototype.renderer=function(n,o,i,s,a,l){var c=this,u=n.getData()[i],h=document.createElement("DIV");"function"==typeof l&&(l=l.call(this.instance)),t.Dom.empty(o),o.appendChild(h),function(e){return new RegExp(r.SEPARATOR.name,"i").test(e.name)}(u)?t.Dom.addClass(o,"htSeparator"):t.Dom.fastInnerHTML(h,l),function(e){return!0===e.disabled||"function"==typeof e.disabled&&!0===e.disabled.call(c.instance)}(u)?(t.Dom.addClass(o,"htDisabled"),e(h).on("mouseenter",(function(){n.deselectCell()}))):function(e){return e.hasOwnProperty("submenu")}(u)?(t.Dom.addClass(o,"htSubmenu"),e(h).on("mouseenter",(function(){n.selectCell(i,s)}))):(t.Dom.removeClass(o,"htSubmenu"),t.Dom.removeClass(o,"htDisabled"),e(h).on("mouseenter",(function(){n.selectCell(i,s)})))},r.prototype.onCellMouseOver=function(t,n,o,r){var i=e(r).handsontable("getInstance"),s=this.menus.length;if(s>0?this.menus[s-1].id!=r.id&&this.closeLastOpenedSubMenu():this.closeLastOpenedSubMenu(),-1!=o.className.indexOf("htSubmenu")){var a=i.getData()[n.row],l=this.getItems(a.submenu),c=this.createMenu(a.name,n.row),u=o.getBoundingClientRect();this.show(c,l),this.setSubMenuPosition(u,c)}},r.prototype.onBeforeKeyDown=function(n,o){var i=this,s=e(o).handsontable("getInstance"),a=s.getSelected();switch(n.keyCode){case t.helper.keyCode.ESCAPE:i.closeAll(),n.preventDefault(),n.stopImmediatePropagation();break;case t.helper.keyCode.ENTER:a&&i.performAction(n,o);break;case t.helper.keyCode.ARROW_DOWN:a?d(a[0],a[1],s):function(e){var t=e.getCell(0,0);r.utils.isSeparator(t)||r.utils.isDisabled(t)?d(0,0,e):e.selectCell(0,0)}(s),n.preventDefault(),n.stopImmediatePropagation();break;case t.helper.keyCode.ARROW_UP:a?f(a[0],a[1],s):function(e){var t=e.countRows()-1,n=e.getCell(t,0);r.utils.isSeparator(n)||r.utils.isDisabled(n)?f(t,0,e):e.selectCell(t,0)}(s),n.preventDefault(),n.stopImmediatePropagation();break;case t.helper.keyCode.ARROW_RIGHT:if(a){var l=a[0],c=s.getCell(a[0],0);r.utils.hasSubMenu(c)&&function(t,n,o,r){var i=t.getData()[r],s=n.getItems(i.submenu),a=n.createMenu(i.name,r),l=o.getBoundingClientRect();n.show(a,s),n.setSubMenuPosition(l,a),e(a).handsontable("getInstance").selectCell(0,0)}(s,i,c,l)}n.preventDefault(),n.stopImmediatePropagation();break;case t.helper.keyCode.ARROW_LEFT:if(a){if(-1!=o.className.indexOf("htContextSubMenu_")){i.closeLastOpenedSubMenu();var u=i.menus.length;if(u>0){o=i.menus[u-1];var h=i.triggerRows.pop();(s=e(o).handsontable("getInstance")).selectCell(h,0)}}n.preventDefault(),n.stopImmediatePropagation()}}function d(e,t,n){var o=e+1,i=o<n.countRows()?n.getCell(o,t):null;i&&(r.utils.isSeparator(i)||r.utils.isDisabled(i)?d(o,t,n):n.selectCell(o,t))}function f(e,t,n){var o=e-1,i=o>=0?n.getCell(o,t):null;i&&(r.utils.isSeparator(i)||r.utils.isDisabled(i)?f(o,t,n):n.selectCell(o,t))}},r.prototype.getItems=function(e){var n,o;function r(e){"string"==typeof e?this.name=e:t.helper.extend(this,e)}for(var s in r.prototype=e,e&&e.items&&(e=e.items),!0===e&&(e=this.defaultOptions.items),n=[],e)e.hasOwnProperty(s)&&((o="string"==typeof e[s]?i(this.defaultOptions.items,e[s]):i(this.defaultOptions.items,s))||(o=e[s]),o=new r(o),"object"==typeof e[s]&&t.helper.extend(o,e[s]),o.key||(o.key=s),n.push(o));return n},r.prototype.setSubMenuPosition=function(e,n){var o=t.Dom.getWindowScrollTop(),r=t.Dom.getWindowScrollLeft(),i={top:o+e.top,topRelative:e.top,left:e.left,leftRelative:e.left-r,scrollTop:o,scrollLeft:r,cellHeight:e.height,cellWidth:e.width};this.menuFitsBelowCursor(i,n)?this.positionMenuBelowCursor(i,n,!0):this.menuFitsAboveCursor(i,n)?this.positionMenuAboveCursor(i,n,!0):this.positionMenuBelowCursor(i,n,!0),this.menuFitsOnRightOfCursor(i,n)?this.positionMenuOnRightOfCursor(i,n,!0):this.positionMenuOnLeftOfCursor(i,n,!0)},r.prototype.setMenuPosition=function(e,n){var o=e.pageY,r=e.pageX,i=t.Dom.getWindowScrollTop(),s=t.Dom.getWindowScrollLeft(),a={top:o,topRelative:o-i,left:r,leftRelative:r-s,scrollTop:i,scrollLeft:s,cellHeight:e.target.clientHeight,cellWidth:e.target.clientWidth};this.menuFitsBelowCursor(a,n)?this.positionMenuBelowCursor(a,n):this.menuFitsAboveCursor(a,n)?this.positionMenuAboveCursor(a,n):this.positionMenuBelowCursor(a,n),this.menuFitsOnRightOfCursor(a,n)?this.positionMenuOnRightOfCursor(a,n):this.positionMenuOnLeftOfCursor(a,n)},r.prototype.menuFitsAboveCursor=function(e,t){return e.topRelative>=t.offsetHeight},r.prototype.menuFitsBelowCursor=function(e,t){return e.topRelative+t.offsetHeight<=e.scrollTop+document.body.clientHeight},r.prototype.menuFitsOnRightOfCursor=function(e,t){return e.leftRelative+t.offsetWidth<=e.scrollLeft+document.body.clientWidth},r.prototype.positionMenuBelowCursor=function(e,t){t.style.top=e.top+"px"},r.prototype.positionMenuAboveCursor=function(e,t,n){t.style.top=n?e.top+e.cellHeight-t.offsetHeight+"px":e.top-t.offsetHeight+"px"},r.prototype.positionMenuOnRightOfCursor=function(e,t,n){t.style.left=n?1+e.left+e.cellWidth+"px":1+e.left+"px"},r.prototype.positionMenuOnLeftOfCursor=function(e,t,n){t.style.left=e.left-t.offsetWidth+"px"},r.utils={},r.utils.normalizeSelection=function(e){return{start:e.getTopLeftCorner(),end:e.getBottomRightCorner()}},r.utils.isSeparator=function(e){return t.Dom.hasClass(e,"htSeparator")},r.utils.hasSubMenu=function(e){return t.Dom.hasClass(e,"htSubmenu")},r.utils.isDisabled=function(e){return t.Dom.hasClass(e,"htDisabled")},r.prototype.enable=function(){this.enabled||(this.enabled=!0,this.bindMouseEvents())},r.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.closeAll(),this.unbindMouseEvents(),this.unbindTableEvents())},r.prototype.destroy=function(){for(this.closeAll();this.menus.length>0;){var e=this.menus.pop();this.triggerRows.pop(),e&&(this.close(e),this.isMenuEnabledByOtherHotInstance()||this.removeMenu(e))}this.unbindMouseEvents(),this.unbindTableEvents()},r.prototype.isMenuEnabledByOtherHotInstance=function(){for(var t=e(".handsontable"),n=!1,o=0,r=t.length;o<r;o++){var i=e(t[o]).handsontable("getInstance");if(i&&i.getSettings().contextMenu){n=!0;break}}return n},r.prototype.removeMenu=function(e){e.parentNode&&this.menu.parentNode.removeChild(e)},r.SEPARATOR={name:"---------"},t.hooks.add("afterInit",s),t.hooks.add("afterUpdateSettings",s),t.hooks.add("afterInit",(function(){if(!this.rootElement[0].className.indexOf("htContextMenu")){for(var e=0,t=0,n=this.getSettings().data.length,o=0;o<n;o++)this.getSettings().data[o].name==r.SEPARATOR.name?e+=2:t+=26;this.view.wt.wtScrollbars.vertical.fixedContainer.style.height=t+e+"px"}})),t.PluginHooks.register("afterContextMenuDefaultOptions"),t.ContextMenu=r}(o);var m,y,v,b,w=function(){this.getSettings().comments&&(o.Comments=new g(this),o.Comments.init())},C=function(e,t,n,r,i,s){s.comment&&o.Dom.addClass(e,s.commentedCellClassName)};function x(){this.boundaries=null,this.callback=null}if(o.hooks.add("beforeInit",w),o.hooks.add("afterContextMenuDefaultOptions",(function(e){this.getSettings().comments&&(e.items.push(o.ContextMenu.SEPARATOR),e.items.push({key:"commentsAddEdit",name:function(){return o.Comments.checkSelectionCommentsConsistency()?"Edit Comment":"Add Comment"},callback:function(e,t,n){o.Comments.showComment(this.getSelectedRange())},disabled:function(){return!1}}),e.items.push({key:"commentsRemove",name:function(){return"Delete Comment"},callback:function(e,t,n){o.Comments.removeComment(t.start.row,t.start.col)},disabled:function(){return!o.Comments.checkSelectionCommentsConsistency()}}))})),o.hooks.add("afterRenderer",C),function(t){var o=new function(){var o,r,i,s,a,l,c,u=document.createElement("DIV"),h=document.createElement("DIV"),d=e(n);u.className="manualColumnMover",h.className="manualColumnMoverGuide";var f=function(){t.hooks.run(this,"persistentStateSave","manualColumnPositions",this.manualColumnPositions)},p=function(){var e={};return t.hooks.run(this,"persistentStateLoad","manualColumnPositions",e),e.value};function g(e){l=this,c=e;var t=this.view.wt.wtTable.getCoords(e).col;if(t>=0){a=t;var n=c.getBoundingClientRect();s=n.left,u.style.top=n.top+"px",u.style.left=s+"px",l.rootElement[0].appendChild(u)}}function m(){t.Dom.addClass(u,"active"),t.Dom.addClass(h,"active");var e=c.getBoundingClientRect();h.style.width=e.width+"px",h.style.height=this.view.maximumVisibleElementHeight(0)+"px",h.style.top=u.style.top,h.style.left=s+"px",this.rootElement[0].appendChild(h)}var y=function(){var e,n=this;n.rootElement.on("mouseenter.manualColumnMove."+n.guid,"table thead tr > th",(function(t){var o;e?(r=n.view.wt.wtTable.getCoords(t.currentTarget).col,o=t.currentTarget.getBoundingClientRect(),u.style.left=o.left+"px"):g.call(n,t.currentTarget)})),n.rootElement.on("mousedown.manualColumnMove."+n.guid,".manualColumnMover",(function(t){i=t.pageX,m.call(n),e=n,o=a,r=a})),d.on("mousemove.manualColumnMove."+n.guid,(function(t){var n;e&&(n=t.pageX-i,h.style.left=s+n+"px")})),d.on("mouseup.manualColumnMove."+n.guid,(function(){e&&(t.Dom.removeClass(u,"active"),t.Dom.removeClass(h,"active"),e=!1,o<r&&r--,b(n.manualColumnPositions,n.countCols()),n.manualColumnPositions.splice(r,0,n.manualColumnPositions.splice(o,1)[0]),n.forceFullRender=!0,n.view.render(),f.call(n),t.hooks.run(n,"afterColumnMove",o,r),g.call(n,c))})),n.addHook("afterDestroy",v)},v=function(){var e=this;e.rootElement.off("mouseenter.manualColumnMove."+e.guid,"table thead tr > th"),e.rootElement.off("mousedown.manualColumnMove."+e.guid,".manualColumnMover"),d.off("mousemove.manualColumnMove."+e.guid),d.off("mouseup.manualColumnMove."+e.guid)},b=function(e,t){if(e.length<t)for(var n=e.length;n<t;n++)e[n]=n};this.beforeInit=function(){this.manualColumnPositions=[]},this.init=function(e){if(this.getSettings().manualColumnMove){var t=this.getSettings().manualColumnMove,n=p.call(this);this.manualColumnPositions=void 0!==n?n:t instanceof Array?t:[],"afterInit"==e&&(y.call(this),this.manualColumnPositions.length>0&&(this.forceFullRender=!0,this.render()))}else v.call(this),this.manualColumnPositions=[]},this.modifyCol=function(e){return this.getSettings().manualColumnMove?(void 0===this.manualColumnPositions[e]&&b(this.manualColumnPositions,e+1),this.manualColumnPositions[e]):e}};t.hooks.add("beforeInit",o.beforeInit),t.hooks.add("afterInit",(function(){o.init.call(this,"afterInit")})),t.hooks.add("afterUpdateSettings",(function(){o.init.call(this,"afterUpdateSettings")})),t.hooks.add("modifyCol",o.modifyCol),t.hooks.register("afterColumnMove")}(o),function(t){var o=new function(){var o,r,i,s,a,l,c,u,h=document.createElement("DIV"),d=document.createElement("DIV"),f=e(n);h.className="manualColumnResizer",d.className="manualColumnResizerGuide";var p=function(){t.hooks.run(this,"persistentStateSave","manualColumnWidths",this.manualColumnWidths)},g=function(){var e={};return t.hooks.run(this,"persistentStateLoad","manualColumnWidths",e),e.value};function m(e){s=this,o=e;var t=this.view.wt.wtTable.getCoords(e).col;if(t>=0){r=t;var n=o.getBoundingClientRect();u=n.left-6,c=parseInt(n.width,10),h.style.top=n.top+"px",h.style.left=u+c+"px",s.rootElement[0].appendChild(h)}}function y(){t.Dom.addClass(h,"active"),t.Dom.addClass(d,"active"),d.style.top=h.style.top,d.style.left=h.style.left,d.style.height=this.view.maximumVisibleElementHeight(0)+"px",this.rootElement[0].appendChild(d)}var v=function(){var e,n=this,s=0,g=null;n.rootElement.on("mouseenter.manualColumnResize."+n.guid,"table thead tr > th",(function(t){e||m.call(n,t.currentTarget)})),n.rootElement.on("mousedown.manualColumnResize."+n.guid,".manualColumnResizer",(function(o){y.call(n),e=n,null==g&&(g=setTimeout((function(){s>=2&&(a=n.determineColumnWidth.call(n,r),w(r,a),n.forceFullRender=!0,n.view.render(),t.hooks.run(n,"afterColumnResize",r,a)),s=0,g=null}),500),n._registerTimeout(g)),s++,l=o.pageX,a=c})),f.on("mousemove.manualColumnResize."+n.guid,(function(t){e&&(i=c+(t.pageX-l),a=w(r,i),h.style.left=u+i+"px",d.style.left=h.style.left)})),f.on("mouseup.manualColumnResize."+n.guid,(function(){e&&(t.Dom.removeClass(h,"active"),t.Dom.removeClass(d,"active"),e=!1,a!=c&&(n.forceFullRender=!0,n.view.render(),p.call(n),t.hooks.run(n,"afterColumnResize",r,a)),m.call(n,o))})),n.addHook("afterDestroy",b)},b=function(){var e=this;e.rootElement.off("mouseenter.manualColumnResize."+e.guid,"table thead tr > th"),e.rootElement.off("mousedown.manualColumnResize."+e.guid,".manualColumnResizer"),f.off("mousemove.manualColumnResize."+e.guid),f.off("mouseup.manualColumnResize."+e.guid)};this.beforeInit=function(){this.manualColumnWidths=[]},this.init=function(e){if(this.getSettings().manualColumnResize){var t=this.getSettings().manualColumnResize,n=g.call(this);this.manualColumnWidths=void 0!==n?n:t instanceof Array?t:[],"afterInit"==e&&(v.call(this),this.manualColumnWidths.length>0&&(this.forceFullRender=!0,this.render()))}else b.call(this),this.manualColumnWidths=[]};var w=function(e,n){return n=Math.max(n,20),e=t.hooks.execute(s,"modifyCol",e),s.manualColumnWidths[e]=n,n};this.modifyColWidth=function(e,t){return t=this.runHooksAndReturn("modifyCol",t),this.getSettings().manualColumnResize&&this.manualColumnWidths[t]?this.manualColumnWidths[t]:e}};t.hooks.add("beforeInit",o.beforeInit),t.hooks.add("afterInit",(function(){o.init.call(this,"afterInit")})),t.hooks.add("afterUpdateSettings",(function(){o.init.call(this,"afterUpdateSettings")})),t.hooks.add("modifyColWidth",o.modifyColWidth),t.hooks.register("afterColumnResize")}(o),function(t){var o=new function(){var o,r,i,s,a,l,c,u,h=document.createElement("DIV"),d=document.createElement("DIV"),f=e(n);h.className="manualRowResizer",d.className="manualRowResizerGuide";var p=function(){t.hooks.run(this,"persistentStateSave","manualRowHeights",this.manualRowHeights)},g=function(){var e={};return t.hooks.run(this,"persistentStateLoad","manualRowHeights",e),e.value};function m(e){s=this,o=e;var t=this.view.wt.wtTable.getCoords(e).row;if(t>=0){r=t;var n=o.getBoundingClientRect();u=n.top-6,c=parseInt(n.height,10),h.style.left=n.left+"px",h.style.top=u+c+"px",s.rootElement[0].appendChild(h)}}function y(){t.Dom.addClass(h,"active"),t.Dom.addClass(d,"active"),d.style.top=h.style.top,d.style.left=h.style.left,d.style.width=this.view.maximumVisibleElementWidth(0)+"px",this.rootElement[0].appendChild(d)}var v=function(){var e,n=this,s=0,g=null;n.rootElement.on("mouseenter.manualRowResize."+n.guid,"table tbody tr > th",(function(t){e||m.call(n,t.currentTarget)})),n.rootElement.on("mousedown.manualRowResize."+n.guid,".manualRowResizer",(function(o){y.call(n),e=n,null==g&&(g=setTimeout((function(){s>=2&&(w(r,null),n.forceFullRender=!0,n.view.render(),t.hooks.run(n,"afterRowResize",r,a)),s=0,g=null}),500),n._registerTimeout(g)),s++,l=o.pageY,a=c})),f.on("mousemove.manualRowResize."+n.guid,(function(t){e&&(i=c+(t.pageY-l),a=w(r,i),h.style.top=u+i+"px",d.style.top=h.style.top)})),f.on("mouseup.manualRowResize."+n.guid,(function(){e&&(t.Dom.removeClass(h,"active"),t.Dom.removeClass(d,"active"),e=!1,a!=c&&(n.forceFullRender=!0,n.view.render(),p.call(n),t.hooks.run(n,"afterRowResize",r,a)),m.call(n,o))})),n.addHook("afterDestroy",b)},b=function(){var e=this;e.rootElement.off("mouseenter.manualRowResize."+e.guid,"table tbody tr > th"),e.rootElement.off("mousedown.manualRowResize."+e.guid,".manualRowResizer"),f.off("mousemove.manualRowResize."+e.guid),f.off("mouseup.manualRowResize."+e.guid)};this.beforeInit=function(){this.manualRowHeights=[]},this.init=function(e){if(this.getSettings().manualRowResize){var t=this.getSettings().manualRowResize,n=g.call(this);this.manualRowHeights=void 0!==n?n:t instanceof Array?t:[],"afterInit"===e?(v.call(this),this.manualRowHeights.length>0&&(this.forceFullRender=!0,this.render())):(this.forceFullRender=!0,this.render())}else b.call(this),this.manualRowHeights=[]};var w=function(e,n){return e=t.hooks.execute(s,"modifyRow",e),s.manualRowHeights[e]=n,n};this.modifyRowHeight=function(e,t){return this.getSettings().manualRowResize&&(t=this.runHooksAndReturn("modifyRow",t),void 0!==this.manualRowHeights[t])?this.manualRowHeights[t]:e}};t.hooks.add("beforeInit",o.beforeInit),t.hooks.add("afterInit",(function(){o.init.call(this,"afterInit")})),t.hooks.add("afterUpdateSettings",(function(){o.init.call(this,"afterUpdateSettings")})),t.hooks.add("modifyRowHeight",o.modifyRowHeight),t.hooks.register("afterRowResize")}(o),function(){function e(){var e=this,n=e.getSettings().observeChanges;n?(e.observer&&r.call(e),t.call(e),s.call(e)):n||r.call(e)}function t(){var e=this;e.observeChangesActive=!0,e.pauseObservingChanges=function(){e.observeChangesActive=!1},e.resumeObservingChanges=function(){e.observeChangesActive=!0},e.observedData=e.getData(),e.observer=h.observe(e.observedData,(function(t){e.observeChangesActive&&(n.call(e,t),e.render()),e.runHooks("afterChangesObserved")}))}function n(e){for(var t=this,n=function(e){return function(e){var t=[];return e.filter((function(e){var n=a(e.path);if(-1!=["add","remove"].indexOf(e.op)&&!isNaN(n.col)){if(-1!=t.indexOf(n.col))return!1;t.push(n.col)}return!0}))}(function(e){return e.filter((function(e){return!/[/]length/gi.test(e.path)}))}(e))}(e),o=0,r=n.length;o<r;o++){var i=n[o],s=a(i.path);switch(i.op){case"add":isNaN(s.col)?t.runHooks("afterCreateRow",s.row):t.runHooks("afterCreateCol",s.col);break;case"remove":isNaN(s.col)?t.runHooks("afterRemoveRow",s.row,1):t.runHooks("afterRemoveCol",s.col,1);break;case"replace":t.runHooks("afterChange",[s.row,s.col,null,i.value],"external")}}function a(e){var t=e.match(/^\/(\d+)\/?(.*)?$/);return{row:parseInt(t[1],10),col:/^\d*$/.test(t[2])?parseInt(t[2],10):t[2]}}}function r(){var e=this;e.observer&&(i.call(e),a.call(e))}function i(){var e=this;h.unobserve(e.observedData,e.observer),delete e.observeChangesActive,delete e.pauseObservingChanges,delete e.resumeObservingChanges}function s(){var e=this;e.addHook("afterDestroy",r),e.addHook("afterCreateRow",l),e.addHook("afterRemoveRow",l),e.addHook("afterCreateCol",l),e.addHook("afterRemoveCol",l),e.addHook("afterChange",(function(e,t){"loadData"!=t&&l.call(this)}))}function a(){var e=this;e.removeHook("afterDestroy",r),e.removeHook("afterCreateRow",l),e.removeHook("afterRemoveRow",l),e.removeHook("afterCreateCol",l),e.removeHook("afterRemoveCol",l),e.removeHook("afterChange",l)}function l(){var e=this;e.pauseObservingChanges(),e.addHookOnce("afterChangesObserved",(function(){e.resumeObservingChanges()}))}o.hooks.add("afterLoadData",e),o.hooks.add("afterUpdateSettings",e),o.hooks.register("afterChangesObserved")}(),m=function(e){var t,o,r,i=function(){n.localStorage[e+"__persistentStateKeys"]=JSON.stringify(t)};r="string"==typeof(o=n.localStorage[e+"__persistentStateKeys"])?JSON.parse(o):void 0,t=r||[],this.saveValue=function(o,r){n.localStorage[e+"_"+o]=JSON.stringify(r),-1==t.indexOf(o)&&(t.push(o),i())},this.loadValue=function(t,o){t=void 0!==t?t:o;var r=n.localStorage[e+"_"+t];return void 0===r?void 0:JSON.parse(r)},this.reset=function(t){n.localStorage.removeItem(e+"_"+t)},this.resetAll=function(){for(var o=0;o<t.length;o++)n.localStorage.removeItem(e+"_"+t[o]);t=[],i()}},y=new function(){var e=this;this.init=function(){var t=this,n=t.getSettings().persistentState;e.enabled=!!n,e.enabled?(t.storage||(t.storage=new m(t.rootElement[0].id)),t.resetState=e.resetValue,r.call(t)):i.call(t)},this.saveValue=function(e,t){this.storage.saveValue(e,t)},this.loadValue=function(e,t){t.value=this.storage.loadValue(e)},this.resetValue=function(e){void 0!==e?this.storage.reset(e):this.storage.resetAll()};var t={persistentStateSave:e.saveValue,persistentStateLoad:e.loadValue,persistentStateReset:e.resetValue};for(var n in t)t.hasOwnProperty(n)&&o.hooks.register(n);function r(){for(var e in t)t.hasOwnProperty(e)&&this.addHook(e,t[e])}function i(){for(var e in t)t.hasOwnProperty(e)&&this.removeHook(e,t[e])}},o.hooks.add("beforeInit",y.init),o.hooks.add("afterUpdateSettings",y.init),function(t){t.UndoRedo=function(e){var n=this;this.instance=e,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,e.addHook("afterChange",(function(e,o){if(e){var r=new t.UndoRedo.ChangeAction(e);n.done(r)}})),e.addHook("afterCreateRow",(function(e,o,r){if(!r){var i=new t.UndoRedo.CreateRowAction(e,o);n.done(i)}})),e.addHook("beforeRemoveRow",(function(e,o){var r=n.instance.getData();e=(r.length+e)%r.length;var i=r.slice(e,e+o),s=new t.UndoRedo.RemoveRowAction(e,i);n.done(s)})),e.addHook("afterCreateCol",(function(e,o,r){if(!r){var i=new t.UndoRedo.CreateColumnAction(e,o);n.done(i)}})),e.addHook("beforeRemoveCol",(function(o,r){var i=n.instance.getData();o=(n.instance.countCols()+o)%n.instance.countCols();for(var s,a=[],l=0,c=i.length;l<c;l++)a[l]=i[l].slice(o,o+r);t.helper.isArray(e.getSettings().colHeaders)&&(s=e.getSettings().colHeaders.slice(o,o+a.length));var u=new t.UndoRedo.RemoveColumnAction(o,a,s);n.done(u)}))},t.UndoRedo.prototype.done=function(e){this.ignoreNewActions||(this.doneActions.push(e),this.undoneActions.length=0)},t.UndoRedo.prototype.undo=function(){if(this.isUndoAvailable()){var e=this.doneActions.pop();this.ignoreNewActions=!0;var t=this;e.undo(this.instance,(function(){t.ignoreNewActions=!1,t.undoneActions.push(e)}))}},t.UndoRedo.prototype.redo=function(){if(this.isRedoAvailable()){var e=this.undoneActions.pop();this.ignoreNewActions=!0;var t=this;e.redo(this.instance,(function(){t.ignoreNewActions=!1,t.doneActions.push(e)}))}},t.UndoRedo.prototype.isUndoAvailable=function(){return this.doneActions.length>0},t.UndoRedo.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},t.UndoRedo.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},t.UndoRedo.Action=function(){},t.UndoRedo.Action.prototype.undo=function(){},t.UndoRedo.Action.prototype.redo=function(){},t.UndoRedo.ChangeAction=function(e){this.changes=e},t.helper.inherit(t.UndoRedo.ChangeAction,t.UndoRedo.Action),t.UndoRedo.ChangeAction.prototype.undo=function(t,n){for(var o=e.extend(!0,[],this.changes),r=t.countEmptyRows(!0),i=t.countEmptyCols(!0),s=0,a=o.length;s<a;s++)o[s].splice(3,1);for(t.addHookOnce("afterChange",n),t.setDataAtRowProp(o,null,null,"undo"),s=0,a=o.length;s<a;s++)t.getSettings().minSpareRows&&o[s][0]+1+t.getSettings().minSpareRows===t.countRows()&&r==t.getSettings().minSpareRows&&(t.alter("remove_row",parseInt(o[s][0]+1,10),t.getSettings().minSpareRows),t.undoRedo.doneActions.pop()),t.getSettings().minSpareCols&&o[s][1]+1+t.getSettings().minSpareCols===t.countCols()&&i==t.getSettings().minSpareCols&&(t.alter("remove_col",parseInt(o[s][1]+1,10),t.getSettings().minSpareCols),t.undoRedo.doneActions.pop())},t.UndoRedo.ChangeAction.prototype.redo=function(t,n){for(var o=e.extend(!0,[],this.changes),r=0,i=o.length;r<i;r++)o[r].splice(2,1);t.addHookOnce("afterChange",n),t.setDataAtRowProp(o,null,null,"redo")},t.UndoRedo.CreateRowAction=function(e,t){this.index=e,this.amount=t},t.helper.inherit(t.UndoRedo.CreateRowAction,t.UndoRedo.Action),t.UndoRedo.CreateRowAction.prototype.undo=function(e,t){e.addHookOnce("afterRemoveRow",t),e.alter("remove_row",this.index,this.amount)},t.UndoRedo.CreateRowAction.prototype.redo=function(e,t){e.addHookOnce("afterCreateRow",t),e.alter("insert_row",this.index+1,this.amount)},t.UndoRedo.RemoveRowAction=function(e,t){this.index=e,this.data=t},t.helper.inherit(t.UndoRedo.RemoveRowAction,t.UndoRedo.Action),t.UndoRedo.RemoveRowAction.prototype.undo=function(e,t){var n=[this.index,0];Array.prototype.push.apply(n,this.data),Array.prototype.splice.apply(e.getData(),n),e.addHookOnce("afterRender",t),e.render()},t.UndoRedo.RemoveRowAction.prototype.redo=function(e,t){e.addHookOnce("afterRemoveRow",t),e.alter("remove_row",this.index,this.data.length)},t.UndoRedo.CreateColumnAction=function(e,t){this.index=e,this.amount=t},t.helper.inherit(t.UndoRedo.CreateColumnAction,t.UndoRedo.Action),t.UndoRedo.CreateColumnAction.prototype.undo=function(e,t){e.addHookOnce("afterRemoveCol",t),e.alter("remove_col",this.index,this.amount)},t.UndoRedo.CreateColumnAction.prototype.redo=function(e,t){e.addHookOnce("afterCreateCol",t),e.alter("insert_col",this.index+1,this.amount)},t.UndoRedo.RemoveColumnAction=function(e,t,n){this.index=e,this.data=t,this.amount=this.data[0].length,this.headers=n},t.helper.inherit(t.UndoRedo.RemoveColumnAction,t.UndoRedo.Action),t.UndoRedo.RemoveColumnAction.prototype.undo=function(e,t){for(var n,o,r=0,i=e.getData().length;r<i;r++)n=e.getSourceDataAtRow(r),o=[this.index,0],Array.prototype.push.apply(o,this.data[r]),Array.prototype.splice.apply(n,o);void 0!==this.headers&&(o=[this.index,0],Array.prototype.push.apply(o,this.headers),Array.prototype.splice.apply(e.getSettings().colHeaders,o)),e.addHookOnce("afterRender",t),e.render()},t.UndoRedo.RemoveColumnAction.prototype.redo=function(e,t){e.addHookOnce("afterRemoveCol",t),e.alter("remove_col",this.index,this.amount)}}(o),function(e){function t(){var t=this;void 0===t.getSettings().undo||t.getSettings().undo?t.undoRedo||(t.undoRedo=new e.UndoRedo(t),function(e){e.undo=function(){return e.undoRedo.undo()},e.redo=function(){return e.undoRedo.redo()},e.isUndoAvailable=function(){return e.undoRedo.isUndoAvailable()},e.isRedoAvailable=function(){return e.undoRedo.isRedoAvailable()},e.clearUndo=function(){return e.undoRedo.clear()}}(t),t.addHook("beforeKeyDown",n),t.addHook("afterChange",o)):t.undoRedo&&(delete t.undoRedo,function(e){delete e.undo,delete e.redo,delete e.isUndoAvailable,delete e.isRedoAvailable,delete e.clearUndo}(t),t.removeHook("beforeKeyDown",n),t.removeHook("afterChange",o))}function n(e){(e.ctrlKey||e.metaKey)&&!e.altKey&&(89===e.keyCode||e.shiftKey&&90===e.keyCode?(this.undoRedo.redo(),e.stopImmediatePropagation()):90===e.keyCode&&(this.undoRedo.undo(),e.stopImmediatePropagation()))}function o(e,t){if("loadData"==t)return this.undoRedo.clear()}e.hooks.add("afterInit",t),e.hooks.add("afterUpdateSettings",t)}(o),x.prototype.setBoundaries=function(e){this.boundaries=e},x.prototype.setCallback=function(e){this.callback=e},x.prototype.check=function(e,t){var n=0,o=0;t<this.boundaries.top?o=t-this.boundaries.top:t>this.boundaries.bottom&&(o=t-this.boundaries.bottom),e<this.boundaries.left?n=e-this.boundaries.left:e>this.boundaries.right&&(n=e-this.boundaries.right),this.callback(n,o)},void 0!==o){var S=function(e){e.dragToScrollListening=!1;var t=e.view.wt.wtScrollbars.vertical.scrollHandler;v=new x,t!==n&&(t?v.setBoundaries(t.getBoundingClientRect()):v.setBoundaries(e.$table[0].getBoundingClientRect()),v.setCallback((function(n,o){n<0?t?t.scrollLeft-=50:e.view.wt.scrollHorizontal(-1).draw():n>0&&(t?t.scrollLeft+=50:e.view.wt.scrollHorizontal(1).draw()),o<0?t?t.scrollTop-=20:e.view.wt.scrollVertical(-1).draw():o>0&&(t?t.scrollTop+=20:e.view.wt.scrollVertical(1).draw())})),e.dragToScrollListening=!0)};o.hooks.add("afterInit",(function(){var t=this;e(document).on("mouseup."+this.guid,(function(){t.dragToScrollListening=!1})),e(document).on("mousemove."+this.guid,(function(e){t.dragToScrollListening&&v.check(e.clientX,e.clientY)}))})),o.hooks.add("afterDestroy",(function(){e(document).off("."+this.guid)})),o.hooks.add("afterOnCellMouseDown",(function(){S(this)})),o.hooks.add("afterOnCellCornerMouseDown",(function(){S(this)})),o.plugins.DragToScroll=x}function T(){var e=[];return e.getInfo=function(e,t){for(var n=0,o=this.length;n<o;n++)if(this[n].row<=e&&this[n].row+this[n].rowspan-1>=e&&this[n].col<=t&&this[n].col+this[n].colspan-1>=t)return this[n]},e.setInfo=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t].row===e.row&&this[t].col===e.col)return void(this[t]=e);this.push(e)},e.removeInfo=function(e,t){for(var n=0,o=this.length;n<o;n++)if(this[n].row===e&&this[n].col===t){this.splice(n,1);break}},e}function E(e){if(this.mergedCellInfoCollection=new T,o.helper.isArray(e))for(var t=0,n=e.length;t<n;t++)this.mergedCellInfoCollection.setInfo(e[t])}if(function(e,t,n){function o(o){this.copyPasteInstance=t.getInstance(),this.copyPasteInstance.onCut(i),this.copyPasteInstance.onPaste(s);var r=this;function i(){o.isListening()&&o.selection.empty()}function s(e){if(o.isListening()&&o.selection.isSelected()){var t=e.replace(/^[\r\n]*/g,"").replace(/[\r\n]*$/g,""),r=n.parse(t),i=o.getSelected(),s=new H(i[0],i[1]),a=new N(s,s,new H(i[2],i[3])),l=a.getTopLeftCorner(),c=a.getBottomRightCorner(),u=l,h=new H(Math.max(c.row,r.length-1+l.row),Math.max(c.col,r[0].length-1+l.col));o.addHookOnce("afterChange",(function(e,t){e&&e.length&&this.selectCell(u.row,u.col,h.row,h.col)})),o.populateFromArray(u.row,u.col,r,h.row,h.col,"paste",o.getSettings().pasteMode)}}function a(t){if(o.getSelected()){if(e.helper.isCtrlKey(t.keyCode))return r.setCopyableText(),void t.stopImmediatePropagation();var n=(t.ctrlKey||t.metaKey)&&!t.altKey;t.keyCode==e.helper.keyCode.A&&n&&o._registerTimeout(setTimeout(e.helper.proxy(r.setCopyableText,r),0))}}o.addHook("beforeKeyDown",a),this.destroy=function(){this.copyPasteInstance.removeCallback(i),this.copyPasteInstance.removeCallback(s),this.copyPasteInstance.destroy(),o.removeHook("beforeKeyDown",a)},o.addHook("afterDestroy",e.helper.proxy(this.destroy,this)),this.triggerPaste=e.helper.proxy(this.copyPasteInstance.triggerPaste,this.copyPasteInstance),this.triggerCut=e.helper.proxy(this.copyPasteInstance.triggerCut,this.copyPasteInstance),this.setCopyableText=function(){var t=o.getSettings(),n=t.copyRowsLimit,r=t.copyColsLimit,i=o.getSelectedRange(),s=i.getTopLeftCorner(),a=i.getBottomRightCorner(),l=s.row,c=s.col,u=a.row,h=a.col,d=Math.min(u,l+n-1),f=Math.min(h,c+r-1);o.copyPaste.copyPasteInstance.copyable(o.getCopyableData(l,c,d,f)),u===d&&h===f||e.hooks.run(o,"afterCopyLimit",u-l+1,h-c+1,n,r)}}function r(){var e=this,t=!1!==e.getSettings().copyPaste;t&&!e.copyPaste?e.copyPaste=new o(e):!t&&e.copyPaste&&(e.copyPaste.destroy(),delete e.copyPaste)}e.hooks.add("afterInit",r),e.hooks.add("afterUpdateSettings",r),e.hooks.register("afterCopyLimit")}(o,d,SheetClip),function(e){var t,n,o;e.Search=function(t){this.query=function(n,o,r){var i=t.countRows(),s=t.countCols(),a=[];o||(o=e.Search.global.getDefaultCallback()),r||(r=e.Search.global.getDefaultQueryMethod());for(var l=0;l<i;l++)for(var c=0;c<s;c++){var u=t.getDataAtCell(l,c),h=t.getCellMeta(l,c),d=h.search.callback||o,f=(h.search.queryMethod||r)(n,u);if(f){var p={row:l,col:c,data:u};a.push(p)}d&&d(t,l,c,u,f)}return a}},e.Search.DEFAULT_CALLBACK=function(e,t,n,o,r){e.getCellMeta(t,n).isSearchResult=r},e.Search.DEFAULT_QUERY_METHOD=function(e,t){return!(void 0===e||null==e||!e.toLowerCase||0==e.length)&&void 0!==t&&null!=t&&-1!=t.toString().toLowerCase().indexOf(e.toLowerCase())},e.Search.DEFAULT_SEARCH_RESULT_CLASS="htSearchResult",e.Search.global=(t=e.Search.DEFAULT_CALLBACK,n=e.Search.DEFAULT_QUERY_METHOD,o=e.Search.DEFAULT_SEARCH_RESULT_CLASS,{getDefaultCallback:function(){return t},setDefaultCallback:function(e){t=e},getDefaultQueryMethod:function(){return n},setDefaultQueryMethod:function(e){n=e},getDefaultSearchResultClass:function(){return o},setDefaultSearchResultClass:function(e){o=e}}),e.SearchCellDecorator=function(t,n,o,r,i,s,a){var l="object"==typeof a.search&&a.search.searchResultClass||e.Search.global.getDefaultSearchResultClass();a.isSearchResult?e.Dom.addClass(n,l):e.Dom.removeClass(n,l)};var r=e.renderers.cellDecorator;function i(){var t=this;t.getSettings().search?t.search=new e.Search(t):delete t.search}e.renderers.cellDecorator=function(t,n,o,i,s,a,l){r.apply(this,arguments),e.SearchCellDecorator.apply(this,arguments)},e.hooks.add("afterInit",i),e.hooks.add("afterUpdateSettings",i)}(o),E.prototype.canMergeRange=function(e){return!e.isSingle()},E.prototype.mergeRange=function(e){if(this.canMergeRange(e)){var t=e.getTopLeftCorner(),n=e.getBottomRightCorner(),o={};o.row=t.row,o.col=t.col,o.rowspan=n.row-t.row+1,o.colspan=n.col-t.col+1,this.mergedCellInfoCollection.setInfo(o)}},E.prototype.mergeOrUnmergeSelection=function(e){this.mergedCellInfoCollection.getInfo(e.from.row,e.from.col)?this.unmergeSelection(e.from):this.mergeSelection(e)},E.prototype.mergeSelection=function(e){this.mergeRange(e)},E.prototype.unmergeSelection=function(e){var t=this.mergedCellInfoCollection.getInfo(e.row,e.col);this.mergedCellInfoCollection.removeInfo(t.row,t.col)},E.prototype.applySpanProperties=function(e,t,n){var o=this.mergedCellInfoCollection.getInfo(t,n);o?o.row===t&&o.col===n?(e.setAttribute("rowspan",o.rowspan),e.setAttribute("colspan",o.colspan)):e.style.display="none":(e.removeAttribute("rowspan"),e.removeAttribute("colspan"))},E.prototype.modifyTransform=function(e,t,n){var o,r,i=function(e,t){return t.col>=e.col&&t.col<=e.col+e.colspan-1},s=function(e){return new H(t.to.row+e.row,t.to.col+e.col)},a={row:n.row,col:n.col};if("modifyTransformStart"==e){this.lastDesiredCoords||(this.lastDesiredCoords=new H(null,null));for(var l=new H(t.highlight.row,t.highlight.col),c=this.mergedCellInfoCollection.getInfo(l.row,l.col),u=0,h=this.mergedCellInfoCollection.length;u<h;u++){var d=this.mergedCellInfoCollection[u];if(d=new H(d.row+d.rowspan-1,d.col+d.colspan-1),t.includes(d))break}c&&(new N(g=new H(c.row,c.col),g,new H(c.row+c.rowspan-1,c.col+c.colspan-1)).includes(this.lastDesiredCoords)||(this.lastDesiredCoords=new H(null,null)),a.row=this.lastDesiredCoords.row?this.lastDesiredCoords.row-l.row:a.row,a.col=this.lastDesiredCoords.col?this.lastDesiredCoords.col-l.col:a.col,n.row>0?a.row=c.row+c.rowspan-1-l.row+n.row:n.row<0&&(a.row=l.row-c.row+n.row),n.col>0?a.col=c.col+c.colspan-1-l.col+n.col:n.col<0&&(a.col=l.col-c.col+n.col));var f=new H(t.highlight.row+a.row,t.highlight.col+a.col),p=this.mergedCellInfoCollection.getInfo(f.row,f.col);p&&(this.lastDesiredCoords=f,a={row:p.row-l.row,col:p.col-l.col})}else if("modifyTransformEnd"==e)for(u=0,h=this.mergedCellInfoCollection.length;u<h;u++){var g,m=this.mergedCellInfoCollection[u],y=new N(g=new H(m.row,m.col),g,new H(m.row+m.rowspan-1,m.col+m.colspan-1)),v=t.getBordersSharedWith(y);if(y.isEqual(t))t.setDirection("NW-SE");else if(v.length>0){var b=t.highlight.isEqual(y.from);v.indexOf("top")>-1?t.to.isSouthEastOf(y.from)&&b?t.setDirection("NW-SE"):t.to.isSouthWestOf(y.from)&&b&&t.setDirection("NE-SW"):v.indexOf("bottom")>-1&&(t.to.isNorthEastOf(y.from)&&b?t.setDirection("SW-NE"):t.to.isNorthWestOf(y.from)&&b&&t.setDirection("SE-NW"))}var w=(o=m,(r=f=s(a)).row>=o.row&&r.row<=o.row+o.rowspan-1),C=i(m,f);t.includesRange(y)&&(y.includes(f)||w||C)&&(w&&(a.row<0?a.row-=m.rowspan-1:a.row>0&&(a.row+=m.rowspan-1)),C&&(a.col<0?a.col-=m.colspan-1:a.col>0&&(a.col+=m.colspan-1)))}0!=a.row&&(n.row=a.row),0!=a.col&&(n.col=a.col)},void 0===o)throw new Error("Handsontable is not defined");C=function(e,t,n,o,r,i){this.mergeCells&&this.mergeCells.applySpanProperties(e,t,n)};var A=function(e){return function(t){if(this.getSettings().mergeCells){var n=this.getSelectedRange();if(this.mergeCells.modifyTransform(e,n,t),"modifyTransformEnd"===e){var o=this.countRows(),r=this.countCols();n.from.row<0?n.from.row=0:n.from.row>0&&n.from.row>=o&&(n.from.row=n.from-1),n.from.col<0?n.from.col=0:n.from.col>0&&n.from.col>=r&&(n.from.col=r-1)}}}};o.hooks.add("beforeInit",(function(){var e=this,t=e.getSettings().mergeCells;t&&(e.mergeCells||(e.mergeCells=new E(t)))})),o.hooks.add("afterInit",(function(){var e=this;e.mergeCells&&(e.view.wt.wtTable.getCell=function(t){if(e.getSettings().mergeCells){var n=e.mergeCells.mergedCellInfoCollection.getInfo(t.row,t.col);n&&(t=n)}return J.prototype.getCell.call(this,t)})})),o.hooks.add("beforeKeyDown",(function(e){this.mergeCells&&(e.ctrlKey||e.metaKey)&&!e.altKey&&77===e.keyCode&&(this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render(),e.stopImmediatePropagation())})),o.hooks.add("modifyTransformStart",A("modifyTransformStart")),o.hooks.add("modifyTransformEnd",A("modifyTransformEnd")),o.hooks.add("beforeSetRangeEnd",(function(e){if(this.lastDesiredCoords=null,this.getSettings().mergeCells){var t=this.getSelectedRange();t.highlight=new H(t.highlight.row,t.highlight.col),t.to=e;var n=!1;do{n=!1;for(var o=0,r=this.mergeCells.mergedCellInfoCollection.length;o<r;o++){var i=this.mergeCells.mergedCellInfoCollection[o],s=new H(i.row,i.col),a=new N(s,s,new H(i.row+i.rowspan-1,i.col+i.colspan-1));t.expandByRange(a)&&(e.row=t.to.row,e.col=t.to.col,n=!0)}}while(n)}})),o.hooks.add("beforeDrawBorders",(function(e,t){if(t&&"area"==t&&this.getSettings().mergeCells)for(var n=this.getSelectedRange(),o=new N(n.from,n.from,n.from),r=new N(n.to,n.to,n.to),i=0,s=this.mergeCells.mergedCellInfoCollection.length;i<s;i++){var a=this.mergeCells.mergedCellInfoCollection[i],l=new H(a.row,a.col),c=new N(l,l,new H(a.row+a.rowspan-1,a.col+a.colspan-1));o.expandByRange(c)&&(e[0]=o.from.row,e[1]=o.from.col),r.expandByRange(c)&&(e[2]=r.from.row,e[3]=r.from.col)}})),o.hooks.add("afterIsMultipleSelection",(function(e){if(e&&this.mergeCells){var t=this.mergeCells.mergedCellInfoCollection,n=this.getSelectedRange();for(var o in t)if(n.highlight.row==t[o].row&&n.highlight.col==t[o].col&&n.to.row==t[o].row+t[o].rowspan-1&&n.to.col==t[o].col+t[o].colspan-1)return!1}return e})),o.hooks.add("afterRenderer",C),o.hooks.add("afterContextMenuDefaultOptions",(function(e){this.getSettings().mergeCells&&(e.items.push(o.ContextMenu.SEPARATOR),e.items.push({key:"mergeCells",name:function(){var e=this.getSelected();return this.mergeCells.mergedCellInfoCollection.getInfo(e[0],e[1])?"Unmerge cells":"Merge cells"},callback:function(){this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render()},disabled:function(){return!1}}))})),o.hooks.add("afterGetCellMeta",(function(e,t,n){if(this.getSettings().mergeCells){var o=this.mergeCells.mergedCellInfoCollection.getInfo(e,t);!o||o.row==e&&o.col==t||(n.copyable=!1)}})),o.MergeCells=E,function(){function e(){}var t,n=function(e){var n={row:e.row,col:e.col},o=new Y(e,new N(n,n,n)),r=function(e){for(var n=0;n<t.view.wt.selections.length;n++)if(t.view.wt.selections[n].settings.className==e)return n;return-1}(e.className);r>=0?t.view.wt.selections[r]=o:t.view.wt.selections.push(o)},r=function(e,t,o){var r=a(e,t);r=l(r,o),this.setCellMeta(e,t,"borders",r),n(r)},i=function(e){for(var t=e.range,o=t.from.row;o<=t.to.row;o++)for(var r=t.from.col;r<=t.to.col;r++){var i=a(o,r),s=0;o==t.from.row&&(s++,e.hasOwnProperty("top")&&(i.top=e.top)),o==t.to.row&&(s++,e.hasOwnProperty("bottom")&&(i.bottom=e.bottom)),r==t.from.col&&(s++,e.hasOwnProperty("left")&&(i.left=e.left)),r==t.to.col&&(s++,e.hasOwnProperty("right")&&(i.right=e.right)),s>0&&(this.setCellMeta(o,r,"borders",i),n(i))}},s=function(e,t){return"border_row"+e+"col"+t},a=function(e,t){return{className:s(e,t),border:{width:1,color:"#000",cornerVisible:!1},row:e,col:t,top:{hide:!0},right:{hide:!0},bottom:{hide:!0},left:{hide:!0}}},l=function(e,t){return t.hasOwnProperty("border")&&(e.border=t.border),t.hasOwnProperty("top")&&(e.top=t.top),t.hasOwnProperty("right")&&(e.right=t.right),t.hasOwnProperty("bottom")&&(e.bottom=t.bottom),t.hasOwnProperty("left")&&(e.left=t.left),e},c=function(e){for(var t=document.getElementsByClassName(e),n=0;n<t.length;n++)if(t[n]&&"TD"!=t[n].nodeName){var o=t[n].parentNode;o.parentNode.removeChild(o)}},u=function(e,t){var n=s(e,t);c(n),this.removeCellMeta(e,t,"borders")},h=function(e,t,o,r){var i=this.getCellMeta(e,t).borders;i&&null!=i.border||(i=a(e,t)),i[o]=r?{hide:!0}:{width:1,color:"#000"},this.setCellMeta(e,t,"borders",i);var l=s(e,t);c(l),n(i),this.render()},d=function(e,t,n){if(e.from.row==e.to.row&&e.from.col==e.to.col)"noBorders"==t?u.call(this,e.from.row,e.from.col):h.call(this,e.from.row,e.from.col,t,n);else switch(t){case"noBorders":for(var o=e.from.col;o<=e.to.col;o++)for(var r=e.from.row;r<=e.to.row;r++)u.call(this,r,o);break;case"top":for(var i=e.from.col;i<=e.to.col;i++)h.call(this,e.from.row,i,t,n);break;case"right":for(var s=e.from.row;s<=e.to.row;s++)h.call(this,s,e.to.col,t);break;case"bottom":for(var a=e.from.col;a<=e.to.col;a++)h.call(this,e.to.row,a,t);break;case"left":for(var l=e.from.row;l<=e.to.row;l++)h.call(this,l,e.from.col,t)}},f=function(e,t){var n=!1;return e.getSelectedRange().forAll((function(o,r){var i=e.getCellMeta(o,r).borders;if(i){if(!t)return n=!0,!1;if(!i[t].hasOwnProperty("hide"))return n=!0,!1}})),n},p=function(e){return"<span class='selected'>✓</span>"+e};o.hooks.add("beforeInit",(function(){var n;("boolean"==typeof(n=this.getSettings().customBorders)&&1==n||"object"==typeof n&&n.length>0)&&(this.customBorders||(t=this,this.customBorders=new e))})),o.hooks.add("afterContextMenuDefaultOptions",(function(e){this.getSettings().customBorders&&(e.items.push(o.ContextMenu.SEPARATOR),e.items.push({key:"borders",name:"Borders",submenu:{items:{top:{name:function(){var e="Top";return f(this,"top")&&(e=p(e)),e},callback:function(){var e=f(this,"top");d.call(this,this.getSelectedRange(),"top",e)},disabled:!1},right:{name:function(){var e="Right";return f(this,"right")&&(e=p(e)),e},callback:function(){var e=f(this,"right");d.call(this,this.getSelectedRange(),"right",e)},disabled:!1},bottom:{name:function(){var e="Bottom";return f(this,"bottom")&&(e=p(e)),e},callback:function(){var e=f(this,"bottom");d.call(this,this.getSelectedRange(),"bottom",e)},disabled:!1},left:{name:function(){var e="Left";return f(this,"left")&&(e=p(e)),e},callback:function(){var e=f(this,"left");d.call(this,this.getSelectedRange(),"left",e)},disabled:!1},remove:{name:"Remove border(s)",callback:function(){d.call(this,this.getSelectedRange(),"noBorders")},disabled:function(){return!f(this)}}}}}))})),o.hooks.add("afterInit",(function(){var e=this.getSettings().customBorders;if(e){for(var t=0;t<e.length;t++)e[t].range?i.call(this,e[t]):r.call(this,e[t].row,e[t].col,e[t]);this.render(),this.view.wt.draw(!0)}})),o.CustomBorders=e}(),function(t){var o=new function(){var o,r,i,s,a,l,c=document.createElement("DIV"),u=document.createElement("DIV"),h=e(n);c.className="manualRowMover",u.className="manualRowMoverGuide";var d=function(){t.hooks.run(this,"persistentStateSave","manualRowPositions",this.manualRowPositions)},f=function(){var e={};return t.hooks.run(this,"persistentStateLoad","manualRowPositions",e),e.value};function p(e){b=this,l=e;var t=this.view.wt.wtTable.getCoords(e).row;if(t>=0){a=t;var n=l.getBoundingClientRect();s=n.top,c.style.top=s+"px",c.style.left=n.left+"px",b.rootElement[0].appendChild(c)}}function g(){t.Dom.addClass(c,"active"),t.Dom.addClass(u,"active");var e=l.getBoundingClientRect();u.style.width=this.view.maximumVisibleElementWidth(0)+"px",u.style.height=e.height+"px",u.style.top=s+"px",u.style.left=c.style.left,this.rootElement[0].appendChild(u)}var m=function(){var e,n=this;n.rootElement.on("mouseenter.manualRowMove."+n.guid,"table tbody tr > th",(function(t){var o;e?(r=n.view.wt.wtTable.getCoords(t.currentTarget).row,o=t.currentTarget.getBoundingClientRect(),c.style.top=o.top+"px"):p.call(n,t.currentTarget)})),n.rootElement.on("mousedown.manualRowMove."+n.guid,".manualRowMover",(function(t){i=t.pageY,g.call(n),e=n,o=a,r=a})),h.on("mousemove.manualRowMove."+n.guid,(function(t){var n;e&&(n=t.pageY-i,u.style.top=s+n+"px")})),h.on("mouseup.manualRowMove."+n.guid,(function(){e&&(t.Dom.removeClass(c,"active"),t.Dom.removeClass(u,"active"),e=!1,o<r&&r--,v(n.manualRowPositions,n.countRows()),n.manualRowPositions.splice(r,0,n.manualRowPositions.splice(o,1)[0]),n.forceFullRender=!0,n.view.render(),d.call(n),t.hooks.run(n,"afterRowMove",o,r),p.call(n,l))})),n.addHook("afterDestroy",y)},y=function(){var e=this;e.rootElement.off("mouseenter.manualRowMove."+e.guid,"table tbody tr > th"),e.rootElement.off("mousedown.manualRowMove."+e.guid,".manualRowMover"),h.off("mousemove.manualRowMove."+e.guid),h.off("mouseup.manualRowMove."+e.guid)},v=function(e,t){if(e.length<t)for(var n=e.length;n<t;n++)e[n]=n};this.beforeInit=function(){this.manualRowPositions=[]},this.init=function(e){var t=this;if(t.getSettings().manualRowMove){var n=t.getSettings().manualRowMove,o=f.call(t);this.manualRowPositions=void 0!==o?o:n instanceof Array?n:[],"afterInit"===e&&(m.call(this),this.manualRowPositions.length>0&&(t.forceFullRender=!0,t.render()))}else y.call(this),t.manualRowPositions=[]},this.modifyRow=function(e){var t=this;return t.getSettings().manualRowMove?(void 0===t.manualRowPositions[e]&&v(this.manualRowPositions,e+1),t.manualRowPositions[e]):e}};t.hooks.add("beforeInit",o.beforeInit),t.hooks.add("afterInit",(function(){o.init.call(this,"afterInit")})),t.hooks.add("afterUpdateSettings",(function(){o.init.call(this,"afterUpdateSettings")})),t.hooks.add("modifyRow",o.modifyRow),t.hooks.register("afterRowMove")}(o),function(t){function o(o){this.instance=o,this.addingStarted=!1,e(document);var r,i,s=!1,a=this;e(document).off("mouseup.autofill."+o.guid,this.instance.rootElement).on("mouseup.autofill."+o.guid,this.instance.rootElement,(function(e){!function(e){if(!o.autofill)return!0;o.autofill.handle&&o.autofill.handle.isDragged&&(o.autofill.handle.isDragged>1&&o.autofill.apply(),o.autofill.handle.isDragged=0,s=!1)}()})),e(document).off("mousemove.moveOutside_"+o.guid).on("mousemove.moveOutside_"+o.guid,(function(e){if(!a.instance.autofill)return 0;var o=t.Dom.offset(a.instance.$table[0]).top-(n.pageYOffset||document.documentElement.scrollTop)+t.Dom.outerHeight(a.instance.$table[0]),r=t.Dom.offset(a.instance.$table[0]).left-(n.pageXOffset||document.documentElement.scrollLeft)+t.Dom.outerWidth(a.instance.$table[0]);!1===a.addingStarted&&a.instance.autofill.handle.isDragged>0&&e.clientY>o&&e.clientX<=r?(this.mouseDragOutside=!0,a.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&setTimeout((function(){a.addingStarted=!1,a.instance.alter("insert_row")}),200)})),r=this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown,this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown=function(e){o.autofill.handle.isDragged=1,s=!0,r(e)},i=this.instance.view.wt.wtSettings.settings.onCellMouseOver,this.instance.view.wt.wtSettings.settings.onCellMouseOver=function(e,t,n,r){o.autofill&&s&&!o.view.isMouseDown()&&o.autofill.handle&&o.autofill.handle.isDragged&&(o.autofill.handle.isDragged++,o.autofill.showBorder(t),o.autofill.checkIfNewRowNeeded()),i(e,t,n,r)},this.instance.view.wt.wtSettings.settings.onCellCornerDblClick=function(){o.autofill.selectAdjacent()}}o.prototype.init=function(){this.handle={}},o.prototype.disable=function(){this.handle.disabled=!0},o.prototype.selectAdjacent=function(){var e,t,n,o,r;e=this.instance.selection.isMultiple()?this.instance.view.wt.selections.area.getCorners():this.instance.view.wt.selections.current.getCorners(),t=this.instance.getData();e:for(n=e[2]+1;n<this.instance.countRows();n++){for(r=e[1];r<=e[3];r++)if(t[n][r])break e;(t[n][e[1]-1]||t[n][e[3]+1])&&(o=n)}o&&(this.instance.view.wt.selections.fill.clear(),this.instance.view.wt.selections.fill.add(new H(e[0],e[1])),this.instance.view.wt.selections.fill.add(new H(o,e[3])),this.apply())},o.prototype.apply=function(){var e,n,o,r,i;if(this.handle.isDragged=0,e=this.instance.view.wt.selections.fill.getCorners())if(this.instance.view.wt.selections.fill.clear(),n=this.instance.selection.isMultiple()?this.instance.view.wt.selections.area.getCorners():this.instance.view.wt.selections.current.getCorners(),e[0]===n[0]&&e[1]<n[1]?(o=new H(e[0],e[1]),r=new H(e[2],n[1]-1)):e[0]===n[0]&&e[3]>n[3]?(o=new H(e[0],n[3]+1),r=new H(e[2],e[3])):e[0]<n[0]&&e[1]===n[1]?(o=new H(e[0],e[1]),r=new H(n[0]-1,e[3])):e[2]>n[2]&&e[1]===n[1]&&(o=new H(n[2]+1,e[1]),r=new H(e[2],e[3])),o&&o.row>-1&&o.col>-1){var s={from:this.instance.getSelectedRange().from,to:this.instance.getSelectedRange().to};i=this.instance.getData(s.from.row,s.from.col,s.to.row,s.to.col),t.hooks.run(this.instance,"beforeAutofill",o,r,i),this.instance.populateFromArray(o.row,o.col,i,r.row,r.col,"autofill"),this.instance.selection.setRangeStart(new H(e[0],e[1])),this.instance.selection.setRangeEnd(new H(e[2],e[3]))}else this.instance.selection.refreshBorders()},o.prototype.showBorder=function(e){var t=this.instance.getSelectedRange().getTopLeftCorner(),n=this.instance.getSelectedRange().getBottomRightCorner();if("horizontal"!==this.instance.getSettings().fillHandle&&(n.row<e.row||t.row>e.row))e=new H(e.row,n.col);else{if("vertical"===this.instance.getSettings().fillHandle)return;e=new H(n.row,e.col)}this.instance.view.wt.selections.fill.clear(),this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().from),this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().to),this.instance.view.wt.selections.fill.add(e),this.instance.view.render()},o.prototype.checkIfNewRowNeeded=function(){var e,t,n=this.instance.countRows(),o=this;this.instance.view.wt.selections.fill.cellRange&&!1===this.addingStarted&&(t=this.instance.getSelected(),e=this.instance.view.wt.selections.fill.getCorners(),t[2]<n-1&&e[2]===n-1&&(this.addingStarted=!0,this.instance._registerTimeout(setTimeout((function(){o.instance.alter("insert_row"),o.addingStarted=!1}),200))))},t.hooks.add("afterInit",(function(){var e=new o(this);void 0!==this.getSettings().fillHandle&&(e.handle&&!1===this.getSettings().fillHandle?e.disable():e.handle||!1===this.getSettings().fillHandle||(this.autofill=e,this.autofill.init()))})),t.Autofill=o}(o);var k,R,O=function(e){var t=[],n={rows:0,cols:0},r={rows:0,cols:0},i=[],s=[],a={groupIndicatorContainer:"htGroupIndicatorContainer",groupIndicator:function(e){return"ht"+e+"Group"},groupStart:"htGroupStart",collapseButton:"htCollapseButton",expandButton:"htExpandButton",collapseGroupId:function(e){return"htCollapse-"+e},collapseFromLevel:function(e,t){return"htCollapse"+e+"FromLevel-"+t},clickable:"clickable",levelTrigger:"htGroupLevelTrigger"},l=function(e,t){return function(n,o){return void 0===t||"asc"===t?n[e]-o[e]:o[e]-n[e]}},c=function(e,t){for(var n=[];e<=t;)n.push(e++);return n},u=function(e,t,n){var o=[],r={row:null,col:null};if("cols"==e)for(;t<=n;)r={row:-1,col:t++},o.push(r);else for(;t<=n;)r={row:t++,col:-1},o.push(r);for(var i=h(o),s=0,a=0,l=0;l<i.length;l++)s+=i[l].filter((function(e){return e.rows})).length,a+=i[l].filter((function(e){return e.cols})).length;return{total:{rows:s,cols:a},groups:i}},h=function(e){for(var t=[],n=0;n<e.length;n++)t.push(d(e[n]));return t},d=function(e,n,o){for(var r=e.row,i=e.col,s=-1===r?0:r,a=-1===i?0:i,l=[],c=0;c<t.length;c++){var u=t[c],h=u.id,d=(u.level,u.rows||[]),f=u.cols||[];-1===l.indexOf(h)&&(-1===d.indexOf(s)&&-1===f.indexOf(a)||l.push(u))}-1===i?l=l.concat(m()):-1===r&&(l=l.concat(v())),n&&(l=l.filter((function(e){return e.level===n}))),o&&("cols"===o?l=l.filter((function(e){return e.cols})):"rows"===o&&(l=l.filter((function(e){return e.rows}))));var p=[];return l.filter((function(e){if(-1===p.indexOf(e.id))return p.push(e.id),e}))},f=function(e){for(var n=0,o=t.length;n<o;n++)if(t[n].id==e)return t[n];return!1},p=function(e,n){for(var o=0,r=t.length;o<r;o++)if(t[o].level==n&&t[o].rows&&t[o].rows.indexOf(e)>-1)return t[o];return!1},g=function(e,n){for(var o=0,r=t.length;o<r;o++)if(t[o].level==n&&t[o].cols&&t[o].cols.indexOf(e)>-1)return t[o];return!1},m=function(){for(var e=[],n=0,o=t.length;n<o;n++)t[n].cols instanceof Array&&e.push(t[n]);return e},y=function(e){for(var n=[],o=0,r=t.length;o<r;o++)t[o].cols&&t[o].level===e&&n.push(t[o]);return n},v=function(){for(var e=[],n=0,o=t.length;n<o;n++)t[n].rows instanceof Array&&e.push(t[n]);return e},b=function(e){for(var n=[],o=0,r=t.length;o<r;o++)t[o].rows&&t[o].level===e&&n.push(t[o]);return n},w=function(e,t){for(var n,o=0,r=t.length;o<r;o++)if(t[o].hidden=e,n=t[o].level,i[n]||(i[n]=[]),s[n]||(s[n]=[]),t[o].rows)for(var a=0,l=t[o].rows.length;a<l;a++)i[n][t[o].rows[a]]=e>0||void 0;else if(t[o].cols){a=0;for(var c=t[o].cols.length;a<c;a++)s[n][t[o].cols[a]]=e>0||void 0}},C=function(e,t,n,r){var i,s;switch(e){case"rows":i=p(t+1,n).id,s=o.Grouping.getGroupLevelsByRows();break;case"cols":i=g(t+1,n).id,s=o.Grouping.getGroupLevelsByCols()}return!!(s[t+1]&&s[t+1].indexOf(n)>-1&&r==i)},x=function(e,t,n,r){var i,s;switch(e){case"rows":i=p(t-1,n).id,s=o.Grouping.getGroupLevelsByRows();break;case"cols":i=g(t-1,n).id,s=o.Grouping.getGroupLevelsByCols()}return!!(s[t-1]&&s[t-1].indexOf(n)>-1&&r==i)},S=function(e){for(var t=v(),n=m(),o=0,r=t.length;o<r;o++)if(t[o].rows.indexOf(e.row)>-1&&t[o].hidden)return!0;if(null===e.col)return!1;o=0;for(var i=n.length;o<i;o++)if(n[o].cols.indexOf(e.col)>-1&&n[o].hidden)return!0;return!1};return{getGroups:function(){return t},getLevels:function(){return r},instance:e,baseSpareRows:e.getSettings().minSpareRows,baseSpareCols:e.getSettings().minSpareCols,getRowGroups:v,getColGroups:m,init:function(){var t=e.getSettings().groups;t&&t instanceof Array&&o.Grouping.initGroups(t)},initGroups:function(e){t=[],e.forEach((function(e){var o=[],i=!1,s=!1;e.rows instanceof Array?(o=e.rows,i=!0):e.cols instanceof Array&&(o=e.cols,s=!0);var a=o[0],h=o[o.length-1];i?function(e,o){var i,s,a=(i=u("rows",e,o).groups,s=0,i.length&&i.forEach((function(e){if((e=e.filter((function(e){return e.rows}))).length){var t=e.sort(l("level","desc"))[0].level;s<t&&(s=t)}})),s);r.rows=Math.max(r.rows,a+1),n.rows||(n.rows=v().length),n.rows++,t.push({id:"r"+n.rows,level:a+1,rows:c(e,o),hidden:0})}(a,h):s&&function(e,o){var i,s,a=(i=u("cols",e,o).groups,s=0,i.length&&i.forEach((function(e){if((e=e.filter((function(e){return e.cols}))).length){var t=e.sort(l("level","desc"))[0].level;s<t&&(s=t)}})),s);a===r.cols?r.cols++:a>r.cols&&(r.cols=a+1),n.cols||(n.cols=m().length),n.cols++,t.push({id:"c"+n.cols,level:a+1,cols:c(e,o),hidden:0})}(a,h)}))},resetGroups:function(){var e;for(var i in t=[],n={rows:0,cols:0},r={rows:0,cols:0},a)if("function"!=typeof a[i])for(var s=0,l=(e=document.querySelectorAll("."+a[i])).length;s<l;s++)o.Dom.removeClass(e[s],a[i]);for(var c=["htGroupColClosest","htGroupCol"],u=(i=0,c.length);i<u;i++)for(s=0,l=(e=document.querySelectorAll("."+c[i])).length;s<l;s++)o.Dom.removeClass(e[s],c[i])},updateGroups:function(){var e=this.getSettings().groups;o.Grouping.resetGroups(),o.Grouping.initGroups(e)},afterGetRowHeader:function(e,t){for(var n=!1,r=0,s=i.length;r<s;r++)i[r]&&!0===i[r][e]&&(n=!0);n?o.Dom.addClass(t.parentNode,"hidden"):!n&&o.Dom.hasClass(t.parentNode,"hidden")&&o.Dom.removeClass(t.parentNode,"hidden")},afterGetColHeader:function(t,n){var r=this.view.wt.wtSettings.getSetting("rowHeaders").length,i=e.rootElement[0].querySelectorAll("colgroup col:nth-child("+parseInt(t+r+1,10)+")");if(0!==i.length){for(var a=!1,l=0,c=s.length;l<c;l++)s[l]&&!0===s[l][t]&&(a=!0);if(a){l=0;for(var u=i.length;l<u;l++)o.Dom.addClass(i[l],"hidden")}else if(!a&&o.Dom.hasClass(i[0],"hidden"))for(l=0,u=i.length;l<u;l++)o.Dom.removeClass(i[l],"hidden")}},groupIndicatorsFactory:function(t,l){var c,u,h,d,m,y;switch(l){case"horizontal":c=o.Grouping.getGroupLevelsByCols(),u=function(e,t){return g(e,t).id},h="cols",d=function(e,t){return g(e-1,t)},m=function(e){if(1===e.length){var t=e[0];e[0]=function(e,n,r){e<-1?b()(e,n,r):(o.Dom.removeClass(n,a.groupIndicatorContainer),t(e,n,r))}}return function(){return e}},y=!0;break;case"vertical":c=o.Grouping.getGroupLevelsByRows(),u=function(e,t){return p(e,t).id},h="rows",d=function(e,t){return p(e-1,t)},m=function(e){return e}}var v=function(e){var t=document.createElement("div");return e.appendChild(t),{button:t,addClass:function(e){o.Dom.addClass(t,e)}}},b=function(){var t=l.charAt(0).toUpperCase()+l.slice(1);return function(n,l,m){var b,w;for(m++;b=l.lastChild;)l.removeChild(b);o.Dom.addClass(l,a.groupIndicatorContainer);var S=u(n,m);if(n>-1&&c[n]&&c[n].indexOf(m)>-1&&((w=v(l)).addClass(a.groupIndicator(t)),function(t,n,a,l){var c,u,h,d=f(l),p=!1,g=function(e){for(var t=!1,o="rows"==e?i:s,a=0;a<=r[e];a++){for(h=n;d[e].indexOf(h)>-1;)t=!(!o[a]||!o[a][h]),h--;if(t)break}return t},m=x(t,n,a,l),y=C(t,n,a,l);switch(t){case"rows":c=o.Grouping.getGroupLevelsByRows(),u=e.countRows(),p=g(t);break;case"cols":c=o.Grouping.getGroupLevelsByCols(),u=e.countCols(),p=g(t)}if(n==u-1)return!1;if(0==n){if(y)return!0}else if(!m||m&&p){if(y)return!0}else if(!c[n-1]&&y)return!0;return!1}(h,n,m,S)&&w.addClass(a.groupStart),function(t,n,a,l){if(0===n)return!1;var c,u,h=x(t,n,a,l),d=C(t,n,a,l),f=!1;switch(t){case"rows":c=o.Grouping.getGroupLevelsByRows(),u=e.countRows();for(var p=0;p<=r.rows;p++)if(i[p]&&i[p][n+1]){f=!0;break}break;case"cols":for(c=o.Grouping.getGroupLevelsByCols(),u=e.countCols(),p=0;p<=r.cols;p++)if(s[p]&&s[p][n+1]){f=!0;break}}if(h){if(n==u-1)return!0;if(!d||d&&f)return!0;if(!c[n+1])return!0}return!1}(h,n,m,S)&&(w.button.appendChild(document.createTextNode("-")),w.addClass(a.collapseButton),w.button.id=a.collapseGroupId(S),w.button.setAttribute("data-level",m),w.button.setAttribute("data-type",h))),y){var T=o.Dom.index(l.parentNode);if(-1===n||n<-1&&T===o.Grouping.getLevels().cols+1||0==T&&0==o.Grouping.getLevels().cols)if((w=v(l)).addClass(a.levelTrigger),-1===n)w.button.id=a.collapseFromLevel("Cols",m),w.button.appendChild(document.createTextNode(m));else if(n<-1&&T===o.Grouping.getLevels().cols+1||0==T&&0==o.Grouping.getLevels().cols){var E=o.Dom.index(l)+1;w.button.id=a.collapseFromLevel("Rows",E),w.button.appendChild(document.createTextNode(E))}}var A=function(e,t,n,r,i){var s;switch(e){case"rows":s=p(t-1,n).id;break;case"cols":s=g(t-1,n).id}if(!s)return null;if(t>0&&x(e,t-1,n,s)&&s!=r){var l=document.createElement("DIV");return o.Dom.addClass(l,a.expandButton),l.id="htExpand-"+s,l.appendChild(document.createTextNode("+")),l.setAttribute("data-level",n),l.setAttribute("data-type",e),l.setAttribute("data-hidden","1"),i.appendChild(l),l}return null}(h,n,m,S,l);if(n>0){var k=d(n-1,m);A&&k.hidden&&o.Dom.addClass(A,a.clickable)}D()}};if(t=m(t),n[h]>0)for(var w=0;w<r[h]+1;w++)t instanceof Array||(t="function"==typeof t?t():new Array(t)),t.unshift(b())},getGroupLevelsByRows:function(){for(var e=v(),t=[],n=0,o=e.length;n<o;n++)if(e[n].rows)for(var r=0,i=e[n].rows.length;r<i;r++)t[e[n].rows[r]]||(t[e[n].rows[r]]=[]),t[e[n].rows[r]].push(e[n].level);return t},getGroupLevelsByCols:function(){for(var e=m(),t=[],n=0,o=e.length;n<o;n++)if(e[n].cols)for(var r=0,i=e[n].cols.length;r<i;r++)t[e[n].cols[r]]||(t[e[n].cols[r]]=[]),t[e[n].cols[r]].push(e[n].level);return t},toggleGroupVisibility:function(t,n,l){if(o.Dom.hasClass(t.target,a.expandButton)||o.Dom.hasClass(t.target,a.collapseButton)||o.Dom.hasClass(t.target,a.levelTrigger)){var c,u,h,d=t.target,p=d.id.split("-"),g=[];if(d.className.indexOf(a.levelTrigger)>-1){for(var m,v=[],C=[],x=d.id.indexOf("Rows")>-1?"rows":"cols",S=1,T=r[x];S<=T;S++)if(m="rows"==x?b(S):y(S),S>=parseInt(p[1],10))for(var E=0,A=m.length;E<A;E++)C.push(m[E]);else for(E=0,A=m.length;E<A;E++)v.push(m[E]);w(!0,C),w(!1,v)}else c=(p=d.id.split("-"))[1],parseInt(d.getAttribute("data-level"),10),u=d.getAttribute("data-type"),h=parseInt(d.getAttribute("data-hidden")),h=isNaN(h)?1:h?0:1,d.setAttribute("data-hidden",h.toString()),g.push(f(c)),w(h,g);var k=function(t){var n;switch(t){case"rows":n=r.rows;for(var o=0;o<=n;o++)if(i[o]&&i[o][e.countRows()-1])return!0;break;case"cols":for(n=r.cols,o=0;o<=n;o++)if(s[o]&&s[o][e.countCols()-1])return!0}return!1}(u=u||x),R=u.charAt(0).toUpperCase()+u.slice(1),O=o.Grouping["baseSpare"+R];k?0==O&&(e.alter("insert_"+u.slice(0,-1),e["count"+R]()),o.Grouping["dummy"+u.slice(0,-1)]=!0):0==O&&o.Grouping["dummy"+u.slice(0,-1)]&&(e.alter("remove_"+u.slice(0,-1),e["count"+R]()-1),o.Grouping["dummy"+u.slice(0,-1)]=!1),e.render(),t.stopImmediatePropagation()}},modifySelectionFactory:function(e){var t,n=this.instance,o=new H(0,0),r=function(e,t){var n=0;switch(e){case"down":for(;S(t);)n++,t.row+=1;break;case"up":for(;S(t);)n--,t.row-=1;break;case"right":for(;S(t);)n++,t.col+=1;break;case"left":for(;S(t);)n--,t.col-=1}return n},i=function(e,t){e.row>0?S(t)&&(e.row+=r("down",t)):e.row<0&&S(t)&&(e.row+=r("up",t)),e.col>0?S(t)&&(e.col+=r("right",t)):e.col<0&&S(t)&&(e.col+=r("left",t))};switch(e){case"start":return function(e){t=n.getSelected(),o.row=t[0]+e.row,o.col=t[1]+e.col,i(e,o)};case"end":return function(e){t=n.getSelected(),o.row=t[2]+e.row,o.col=t[3]+e.col,i(e,o)}}},modifyRowHeight:function(t,n){if(e.view.wt.wtTable.rowFilter&&S({row:n,col:null}))return 0},validateGroups:function(){for(var t=function(e,t){if(e[0]<t[0]&&e[1]<t[1]&&t[0]<=e[1]||e[0]>t[0]&&t[1]<e[1]&&e[0]<=t[1])return!0},n=e.getSettings().groups,o=[],r=[],i=0,s=n.length;i<s;i++)if(n[i].rows){if(1===n[i].rows.length)throw new Error("Grouping error:  Group {"+n[i].rows[0]+"} is invalid. Cannot define single-entry groups.");if(0===n[i].rows.length)throw new Error("Grouping error:  Cannot define empty groups.");r.push(n[i].rows);for(var a=0,l=r.length;a<l;a++)if(t(n[i].rows,r[a]))throw new Error("Grouping error:  ranges {"+n[i].rows[0]+", "+n[i].rows[1]+"} and {"+r[a][0]+", "+r[a][1]+"} are overlapping.")}else if(n[i].cols){if(1===n[i].cols.length)throw new Error("Grouping error:  Group {"+n[i].cols[0]+"} is invalid. Cannot define single-entry groups.");if(0===n[i].cols.length)throw new Error("Grouping error:  Cannot define empty groups.");o.push(n[i].cols),a=0;for(var c=o.length;a<c;a++)if(t(n[i].cols,o[a]))throw new Error("Grouping error:  ranges {"+n[i].cols[0]+", "+n[i].cols[1]+"} and {"+o[a][0]+", "+o[a][1]+"} are overlapping.")}return!0},afterGetRowHeaderRenderers:function(e){o.Grouping.groupIndicatorsFactory(e,"vertical")},afterGetColumnHeaderRenderers:function(e){o.Grouping.groupIndicatorsFactory(e,"horizontal")},hookProxy:function(t,n){return function(){return e.getSettings().groups?n?o.Grouping[t](n).apply(this,arguments):o.Grouping[t].apply(this,arguments):void 0}}}},D=(w=function(){var e=this;if(e.getSettings().groups){var t={};if(o.Grouping=new O(e),e.getSettings().rowHeaders||(t.rowHeaders=!0),e.getSettings().colHeaders||(t.colHeaders=!0),(t.colHeaders||t.rowHeaders)&&e.updateSettings(t),!o.Grouping.validateGroups())return;e.addHook("beforeInit",o.Grouping.hookProxy("init")),e.addHook("afterUpdateSettings",o.Grouping.hookProxy("updateGroups")),e.addHook("afterGetColumnHeaderRenderers",o.Grouping.hookProxy("afterGetColumnHeaderRenderers")),e.addHook("afterGetRowHeaderRenderers",o.Grouping.hookProxy("afterGetRowHeaderRenderers")),e.addHook("afterGetRowHeader",o.Grouping.hookProxy("afterGetRowHeader")),e.addHook("afterGetColHeader",o.Grouping.hookProxy("afterGetColHeader")),e.addHook("beforeOnCellMouseDown",o.Grouping.hookProxy("toggleGroupVisibility")),e.addHook("modifyTransformStart",o.Grouping.hookProxy("modifySelectionFactory","start")),e.addHook("modifyTransformEnd",o.Grouping.hookProxy("modifySelectionFactory","end")),e.addHook("modifyRowHeight",o.Grouping.hookProxy("modifyRowHeight"))}},function(){for(var e=document.querySelectorAll("colgroup"),t=0,n=e.length;t<n;t++){var r=e[t].querySelectorAll("col.rowHeader");if(0==r.length)return;for(var i=0,s=r.length+1;i<s;i++){if(2==s)return;i<o.Grouping.getLevels().rows+1&&(i==o.Grouping.getLevels().rows?o.Dom.addClass(r[i],"htGroupColClosest"):o.Dom.addClass(r[i],"htGroupCol"))}}});function _(){}function P(e){this.instance=e}function I(t,n){var o;if(n){this.instance=t,this.settings=n,this.main=document.createElement("div"),(o=this.main.style).position="absolute",o.top=0,o.left=0;for(var r=["top","left","bottom","right","corner"],i=0;i<5;i++){var s=r[i],a=document.createElement("DIV");a.className="wtBorder "+(this.settings.className||""),this.settings[s]&&this.settings[s].hide&&(a.className+=" hidden"),(o=a.style).backgroundColor=this.settings[s]&&this.settings[s].color?this.settings[s].color:n.border.color,o.height=this.settings[s]&&this.settings[s].width?this.settings[s].width+"px":n.border.width+"px",o.width=this.settings[s]&&this.settings[s].width?this.settings[s].width+"px":n.border.width+"px",this.main.appendChild(a)}this.top=this.main.childNodes[0],this.left=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.right=this.main.childNodes[3],this.topStyle=this.top.style,this.leftStyle=this.left.style,this.bottomStyle=this.bottom.style,this.rightStyle=this.right.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width="5px",this.cornerStyle.height="5px",this.cornerStyle.border="2px solid #FFF",this.disappear(),t.wtTable.bordersHolder||(t.wtTable.bordersHolder=document.createElement("div"),t.wtTable.bordersHolder.className="htBorders",t.wtTable.hider.appendChild(t.wtTable.bordersHolder)),t.wtTable.bordersHolder.insertBefore(this.main,t.wtTable.bordersHolder.firstChild);var l=!1,c=e(document.body);c.on("mousedown.walkontable."+t.guid,(function(){l=!0})),c.on("mouseup.walkontable."+t.guid,(function(){l=!1})),e(this.main.childNodes).on("mouseenter",(function(n){if(l&&t.getSetting("hideBorderOnMouseDownOver")){n.preventDefault(),n.stopImmediatePropagation();var o=this.getBoundingClientRect(),r=e(this);r.hide(),c.on("mousemove.border."+t.guid,(function(e){(function(e){return e.clientY<Math.floor(o.top)||e.clientY>Math.ceil(o.top+o.height)||e.clientX<Math.floor(o.left)||e.clientX>Math.ceil(o.left+o.width)||void 0})(e)&&(c.off("mousemove.border."+t.guid),r.show())}))}}))}}function H(e,t){void 0!==e&&void 0!==t?(this.row=e,this.col=t):(this.row=null,this.col=null)}function N(e,t,n){this.highlight=e,this.from=t,this.to=n}function M(e,t){this.total=e,this.countTH=t}function L(e,t,n,o){var r,i=0;for(P.apply(this,arguments),this.containerSizeFn=t,this.cellSizesSum=0,this.cellSizes=[],this.cellStretch=[],this.cellCount=0,this.visibleCellCount=0,this.remainingSize=0,this.strategy=o;void 0!==(r=n(i));)this.cellSizesSum<this.getContainerSize(this.cellSizesSum+r)&&this.visibleCellCount++,this.cellSizes.push(r),this.cellSizesSum+=r,this.cellCount++,i++;var s=this.getContainerSize(this.cellSizesSum);this.remainingSize=this.cellSizesSum-s}function j(e){var t=[];if(this.guid="wt_"+W(),e.cloneSource?(this.cloneSource=e.cloneSource,this.cloneOverlay=e.cloneOverlay,this.wtSettings=e.cloneSource.wtSettings,this.wtTable=new J(this,e.table),this.wtScroll=new q(this),this.wtViewport=e.cloneSource.wtViewport,this.wtEvent=new F(this),this.selections=this.cloneSource.selections):(this.wtSettings=new $(this,e),this.wtTable=new J(this,e.table),this.wtScroll=new q(this),this.wtViewport=new ee(this),this.wtEvent=new F(this),this.selections=this.getSetting("selections"),this.wtScrollbars=new Q(this)),this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(var n=0,r=this.wtTable.THEAD.childNodes[0].childNodes.length;n<r;n++)t.push(this.wtTable.THEAD.childNodes[0].childNodes[n].innerHTML);this.getSetting("columnHeaders").length||this.update("columnHeaders",[function(e,n){o.Dom.fastInnerText(n,t[e])}])}this.drawn=!1,this.drawInterrupted=!1}function B(t){this.instance=t,this.init(),this.clone=this.makeClone("debug"),this.clone.wtTable.holder.style.opacity=.4,this.clone.wtTable.holder.style.textShadow="0 0 2px #ff0000",this.lastTimeout=null;var n=this,r=0,i=0,s=n.clone.wtTable.holder.parentNode;e(document.body).on("mousemove."+this.instance.guid,(function(e){n.instance.wtTable.holder.parentNode&&(e.clientX-r>-5&&e.clientX-r<5&&e.clientY-i>-5&&e.clientY-i<5||(r=e.clientX,i=e.clientY,o.Dom.addClass(s,"wtDebugHidden"),o.Dom.removeClass(s,"wtDebugVisible"),clearTimeout(this.lastTimeout),this.lastTimeout=setTimeout((function(){o.Dom.removeClass(s,"wtDebugHidden"),o.Dom.addClass(s,"wtDebugVisible")}),1e3)))}))}function F(t){var r=this;this.instance=t;var i,s=[null,null];this.dblClickTimeout=[null,null],e(this.instance.wtTable.holder).on("mousedown",(function(e){var t=r.parentCell(e.target);o.Dom.hasClass(e.target,"corner")?r.instance.getSetting("onCellCornerMouseDown",e,e.target):t.TD&&r.instance.hasSetting("onCellMouseDown")&&r.instance.getSetting("onCellMouseDown",e,t.coords,t.TD,r.instance),2!==e.button&&t.TD&&(s[0]=t.TD,clearTimeout(r.dblClickTimeout[0]),r.dblClickTimeout[0]=setTimeout((function(){s[0]=null}),1e3))})),e(this.instance.wtTable.TABLE).on("mouseover",(function(e){if(r.instance.hasSetting("onCellMouseOver")){var t=r.instance.wtTable.TABLE,n=o.Dom.closest(e.target,["TD","TH"],t);n&&n!==i&&o.Dom.isChildOf(n,t)&&(i=n,r.instance.getSetting("onCellMouseOver",e,r.instance.wtTable.getCoords(n),n,r.instance))}})),e(this.instance.wtTable.holder).on("mouseup",(function(e){if(2!==e.button){var t=r.parentCell(e.target);t.TD===s[0]&&t.TD===s[1]?(o.Dom.hasClass(e.target,"corner")?r.instance.getSetting("onCellCornerDblClick",e,t.coords,t.TD,r.instance):r.instance.getSetting("onCellDblClick",e,t.coords,t.TD,r.instance),s[0]=null,s[1]=null):t.TD===s[0]&&(s[1]=t.TD,clearTimeout(r.dblClickTimeout[1]),r.dblClickTimeout[1]=setTimeout((function(){s[1]=null}),500))}})),e(n).on("resize."+this.instance.guid,(function(){r.instance.draw()}))}function W(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()}if(o.hooks.add("beforeInit",w),o.hooks.add("afterUpdateSettings",(function(){this.getSettings().groups&&!o.Grouping?w.call(this,arguments):!this.getSettings().groups&&o.Grouping&&(o.Grouping.resetGroups(),o.Grouping=void 0)})),o.plugins.Grouping=O,function(t){function n(){this.zeroClipboardInstance=null,this.instance=null}n.prototype.prepareZeroClipboard=function(){this.swfPath&&ZeroClipboard.config({swfPath:this.swfPath})},n.prototype.copy=function(){return this.instance.copyPaste.setCopyableText(),this.instance.copyPaste.copyPasteInstance.elTextarea.value},n.prototype.addToContextMenu=function(e){this.getSettings().contextMenuCopyPaste&&e.items.unshift({key:"copy",name:"Copy"},{key:"paste",name:"Paste",callback:function(){this.copyPaste.triggerPaste()}},t.ContextMenu.SEPARATOR)},n.prototype.setupZeroClipboard=function(e){var n=this;if(this.cmInstance=e,t.Dom.hasClass(this.cmInstance.rootElement[0],"htContextMenu"))for(var r=e.getData(),i=0,s=r.length;i<s;i++)if("copy"===r[i].key){this.zeroClipboardInstance=new ZeroClipboard(e.getCell(i,0)),this.zeroClipboardInstance.off(),this.zeroClipboardInstance.on("copy",(function(e){e.clipboardData.setData("text/plain",n.copy()),n.instance.getSettings().outsideClickDeselects=n.outsideClickDeselectsCache})),o.bindEvents();break}},n.prototype.bindEvents=function(){var n=this;n.cmInstance&&(e(document).off("mouseenter."+n.cmInstance.guid).on("mouseenter."+n.cmInstance.guid,"#global-zeroclipboard-flash-bridge",(function(e){var o=n.cmInstance.rootElement[0].querySelector("td.current");o&&t.Dom.removeClass(o,"current"),n.outsideClickDeselectsCache=n.instance.getSettings().outsideClickDeselects,n.instance.getSettings().outsideClickDeselects=!1})),e(document).off("mouseleave."+n.cmInstance.guid).on("mouseleave."+n.cmInstance.guid,"#global-zeroclipboard-flash-bridge",(function(e){var o=n.cmInstance.rootElement[0].querySelector("td.zeroclipboard-is-hover");o&&t.Dom.removeClass(o,"zeroclipboard-is-hover"),n.instance.getSettings().outsideClickDeselects=n.outsideClickDeselectsCache})))},n.prototype.init=function(){if(this.getSettings().contextMenuCopyPaste){if("object"==typeof this.getSettings().contextMenuCopyPaste&&(o.swfPath=this.getSettings().contextMenuCopyPaste.swfPath),"undefined"==typeof ZeroClipboard)throw new Error("To be able to use the Copy/Paste feature from the context menu, you need to manualy include ZeroClipboard.js file to your website.");try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){if(void 0===navigator.mimeTypes["application/x-shockwave-flash"])throw new Error("To be able to use the Copy/Paste feature from the context menu, your browser needs to have Flash Plugin installed.")}o.instance=this,o.prepareZeroClipboard()}};var o=new n;t.hooks.add("afterRender",(function(){o.setupZeroClipboard(this)})),t.hooks.add("afterInit",o.init),t.hooks.add("afterContextMenuDefaultOptions",o.addToContextMenu),t.ContextMenuCopyPaste=n}(o),_.prototype.init=function(){this.TABLE=this.instance.wtTable.TABLE,this.fixed=this.instance.wtTable.hider,this.fixedContainer=this.instance.wtTable.holder,this.scrollHandler=this.getScrollableElement(this.TABLE),this.$scrollHandler=e(this.scrollHandler)},_.prototype.makeClone=function(e){var t=document.createElement("DIV");t.className="ht_clone_"+e+" handsontable",t.style.position="absolute",t.style.overflow="hidden";var n=document.createElement("TABLE");return n.className=this.instance.wtTable.TABLE.className,t.appendChild(n),this.instance.wtTable.holder.parentNode.appendChild(t),new j({cloneSource:this.instance,cloneOverlay:this,table:n})},_.prototype.getScrollableElement=function(e){for(var t=e.parentNode;t&&t.style;){if("visible"!==t.style.overflow&&""!==t.style.overflow)return t;if(this instanceof K&&"visible"!==t.style.overflowX&&""!==t.style.overflowX)return t;t=t.parentNode}return n},_.prototype.refresh=function(e){this.clone&&this.clone.draw(e)},_.prototype.destroy=function(){this.$scrollHandler.off("."+this.clone.guid),e(n).off("."+this.clone.guid),e(document).off("."+this.clone.guid),e(document.body).off("."+this.clone.guid)},P.prototype.getSize=function(e){return this.cellSizes[e]},P.prototype.getContainerSize=function(e){return"function"==typeof this.containerSizeFn?this.containerSizeFn(e):this.containerSizeFn},P.prototype.countVisible=function(){return this.cellCount},P.prototype.isLastIncomplete=function(){return this.remainingSize>0},I.prototype.appear=function(e){var t,n,r,i,s,a,l,c,u,h,d,f;if(!this.disabled){var p,g,m,y,v,b,w,C=this.instance;for(b=C.cloneOverlay instanceof X||C.cloneOverlay instanceof G?C.getSetting("fixedRowsTop"):C.wtTable.getRowStrategy().countVisible(),v=0;v<b;v++)if((w=C.wtTable.rowFilter.visibleToSource(v))>=e[0]&&w<=e[2]){p=w;break}for(v=b-1;v>=0;v--)if((w=C.wtTable.rowFilter.visibleToSource(v))>=e[0]&&w<=e[2]){m=w;break}for(b=C.cloneOverlay instanceof K||C.cloneOverlay instanceof G?C.getSetting("fixedColumnsLeft"):C.wtTable.getColumnStrategy().cellCount,v=0;v<b;v++)if((w=C.wtTable.columnFilter.visibleToSource(v))>=e[1]&&w<=e[3]){g=w;break}for(v=b-1;v>=0;v--)if((w=C.wtTable.columnFilter.visibleToSource(v))>=e[1]&&w<=e[3]){y=w;break}if(void 0!==p&&void 0!==g){t=p!==m||g!==y,n=C.wtTable.getCell(new H(p,g)),r=t?C.wtTable.getCell(new H(m,y)):n,i=o.Dom.offset(n),s=t?o.Dom.offset(r):i,a=o.Dom.offset(C.wtTable.TABLE),c=i.top,d=s.top+o.Dom.outerHeight(r)-c,h=i.left,f=s.left+o.Dom.outerWidth(r)-h,l=c-a.top-1,u=h-a.left-1;var x=o.Dom.getComputedStyle(n);parseInt(x.borderTopWidth,10)>0&&(l+=1,d=d>0?d-1:0),parseInt(x.borderLeftWidth,10)>0&&(u+=1,f=f>0?f-1:0),this.topStyle.top=l+"px",this.topStyle.left=u+"px",this.topStyle.width=f+"px",this.topStyle.display="block",this.leftStyle.top=l+"px",this.leftStyle.left=u+"px",this.leftStyle.height=d+"px",this.leftStyle.display="block";var S=Math.floor(this.settings.border.width/2);this.bottomStyle.top=l+d-S+"px",this.bottomStyle.left=u+"px",this.bottomStyle.width=f+"px",this.bottomStyle.display="block",this.rightStyle.top=l+"px",this.rightStyle.left=u+f-S+"px",this.rightStyle.height=d+1+"px",this.rightStyle.display="block",this.hasSetting(this.settings.border.cornerVisible)?(this.cornerStyle.top=l+d-4+"px",this.cornerStyle.left=u+f-4+"px",this.cornerStyle.display="block"):this.cornerStyle.display="none"}else this.disappear()}},I.prototype.disappear=function(){this.topStyle.display="none",this.leftStyle.display="none",this.bottomStyle.display="none",this.rightStyle.display="none",this.cornerStyle.display="none"},I.prototype.hasSetting=function(e){return"function"==typeof e?e():!!e},H.prototype.isValid=function(e){return!(this.row<0||this.col<0||this.row>=e.getSetting("totalRows")||this.col>=e.getSetting("totalColumns"))},H.prototype.isEqual=function(e){return e===this||this.row===e.row&&this.col===e.col},H.prototype.isSouthEastOf=function(e){return this.row>=e.row&&this.col>=e.col},H.prototype.isNorthWestOf=function(e){return this.row<=e.row&&this.col<=e.col},H.prototype.isSouthWestOf=function(e){return this.row>=e.row&&this.col<=e.col},H.prototype.isNorthEastOf=function(e){return this.row<=e.row&&this.col>=e.col},n.WalkontableCellCoords=H,N.prototype.isValid=function(e){return this.from.isValid(e)&&this.to.isValid(e)},N.prototype.isSingle=function(){return this.from.row===this.to.row&&this.from.col===this.to.col},N.prototype.includes=function(e){var t=this.getTopLeftCorner(),n=this.getBottomRightCorner();return e.row<0&&(e.row=0),e.col<0&&(e.col=0),t.row<=e.row&&n.row>=e.row&&t.col<=e.col&&n.col>=e.col},N.prototype.includesRange=function(e){return this.includes(e.getTopLeftCorner())&&this.includes(e.getBottomRightCorner())},N.prototype.isEqual=function(e){return Math.min(this.from.row,this.to.row)==Math.min(e.from.row,e.to.row)&&Math.max(this.from.row,this.to.row)==Math.max(e.from.row,e.to.row)&&Math.min(this.from.col,this.to.col)==Math.min(e.from.col,e.to.col)&&Math.max(this.from.col,this.to.col)==Math.max(e.from.col,e.to.col)},N.prototype.overlaps=function(e){return e.isSouthEastOf(this.getTopLeftCorner())&&e.isNorthWestOf(this.getBottomRightCorner())},N.prototype.isSouthEastOf=function(e){return this.getTopLeftCorner().isSouthEastOf(e)||this.getBottomRightCorner().isSouthEastOf(e)},N.prototype.isNorthWestOf=function(e){return this.getTopLeftCorner().isNorthWestOf(e)||this.getBottomRightCorner().isNorthWestOf(e)},N.prototype.expand=function(e){var t=this.getTopLeftCorner(),n=this.getBottomRightCorner();return(e.row<t.row||e.col<t.col||e.row>n.row||e.col>n.col)&&(this.from=new H(Math.min(t.row,e.row),Math.min(t.col,e.col)),this.to=new H(Math.max(n.row,e.row),Math.max(n.col,e.col)),!0)},N.prototype.expandByRange=function(e){if(this.includesRange(e)||!this.overlaps(e))return!1;var t=this.getTopLeftCorner(),n=this.getBottomRightCorner(),o=(this.getTopRightCorner(),this.getBottomLeftCorner(),e.getTopLeftCorner()),r=e.getBottomRightCorner(),i=Math.min(t.row,o.row),s=Math.min(t.col,o.col),a=Math.max(n.row,r.row),l=Math.max(n.col,r.col),c=new H(i,s),u=new H(a,l),h=new N(c,c,u).isCorner(this.from,e),d=e.isEqual(new N(c,c,u));return h&&!d&&(this.from.col>c.col&&(c.col=l,u.col=s),this.from.row>c.row&&(c.row=a,u.row=i)),this.from=c,this.to=u,!0},N.prototype.getDirection=function(){return this.from.isNorthWestOf(this.to)?"NW-SE":this.from.isNorthEastOf(this.to)?"NE-SW":this.from.isSouthEastOf(this.to)?"SE-NW":this.from.isSouthWestOf(this.to)?"SW-NE":void 0},N.prototype.setDirection=function(e){switch(e){case"NW-SE":this.from=this.getTopLeftCorner(),this.to=this.getBottomRightCorner();break;case"NE-SW":this.from=this.getTopRightCorner(),this.to=this.getBottomLeftCorner();break;case"SE-NW":this.from=this.getBottomRightCorner(),this.to=this.getTopLeftCorner();break;case"SW-NE":this.from=this.getBottomLeftCorner(),this.to=this.getTopRightCorner()}},N.prototype.getTopLeftCorner=function(){return new H(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},N.prototype.getBottomRightCorner=function(){return new H(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},N.prototype.getTopRightCorner=function(){return new H(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},N.prototype.getBottomLeftCorner=function(){return new H(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},N.prototype.isCorner=function(e,t){return!!(t&&t.includes(e)&&(this.getTopLeftCorner().isEqual(new H(t.from.row,t.from.col))||this.getTopRightCorner().isEqual(new H(t.from.row,t.to.col))||this.getBottomLeftCorner().isEqual(new H(t.to.row,t.from.col))||this.getBottomRightCorner().isEqual(new H(t.to.row,t.to.col))))||e.isEqual(this.getTopLeftCorner())||e.isEqual(this.getTopRightCorner())||e.isEqual(this.getBottomLeftCorner())||e.isEqual(this.getBottomRightCorner())},N.prototype.getOppositeCorner=function(e,t){if(!(e instanceof H))return!1;if(t&&t.includes(e)){if(this.getTopLeftCorner().isEqual(new H(t.from.row,t.from.col)))return this.getBottomRightCorner();if(this.getTopRightCorner().isEqual(new H(t.from.row,t.to.col)))return this.getBottomLeftCorner();if(this.getBottomLeftCorner().isEqual(new H(t.to.row,t.from.col)))return this.getTopRightCorner();if(this.getBottomRightCorner().isEqual(new H(t.to.row,t.to.col)))return this.getTopLeftCorner()}return e.isEqual(this.getBottomRightCorner())?this.getTopLeftCorner():e.isEqual(this.getTopLeftCorner())?this.getBottomRightCorner():e.isEqual(this.getTopRightCorner())?this.getBottomLeftCorner():e.isEqual(this.getBottomLeftCorner())?this.getTopRightCorner():void 0},N.prototype.getBordersSharedWith=function(e){if(!this.includesRange(e))return[];var t=Math.min(this.from.row,this.to.row),n=Math.max(this.from.row,this.to.row),o=Math.min(this.from.col,this.to.col),r=Math.max(this.from.col,this.to.col),i=Math.min(e.from.row,e.to.row),s=Math.max(e.from.row,e.to.row),a=Math.min(e.from.col,e.to.col),l=Math.max(e.from.col,e.to.col),c=[];return t==i&&c.push("top"),r==l&&c.push("right"),n==s&&c.push("bottom"),o==a&&c.push("left"),c},N.prototype.getInner=function(){for(var e=this.getTopLeftCorner(),t=this.getBottomRightCorner(),n=[],o=e.row;o<=t.row;o++)for(var r=e.col;r<=t.col;r++)this.from.row===o&&this.from.col===r||this.to.row===o&&this.to.col===r||n.push(new H(o,r));return n},N.prototype.getAll=function(){for(var e=this.getTopLeftCorner(),t=this.getBottomRightCorner(),n=[],o=e.row;o<=t.row;o++)for(var r=e.col;r<=t.col;r++)e.row===o&&e.col===r?n.push(e):t.row===o&&t.col===r?n.push(t):n.push(new H(o,r));return n},N.prototype.forAll=function(e){for(var t=this.getTopLeftCorner(),n=this.getBottomRightCorner(),o=t.row;o<=n.row;o++)for(var r=t.col;r<=n.col;r++)if(!1===e(o,r))return},n.WalkontableCellRange=N,M.prototype.visibleToSource=function(e){return e},M.prototype.sourceToVisible=function(e){return e},M.prototype.offsettedTH=function(e){return e-this.countTH},M.prototype.unOffsettedTH=function(e){return e+this.countTH},M.prototype.visibleRowHeadedColumnToSourceColumn=function(e){return this.visibleToSource(this.offsettedTH(e))},M.prototype.sourceColumnToVisibleRowHeadedColumn=function(e){return this.unOffsettedTH(this.sourceToVisible(e))},L.prototype=new P,L.prototype.getSize=function(e){return this.cellSizes[e]+(this.cellStretch[e]||0)},L.prototype.stretch=function(){var e,t=0;if(e=this.instance.wtTable.allRowsInViewport()?this.getContainerSize():this.getContainerSize(1/0),this.remainingSize=this.cellSizesSum-e,this.cellStretch.length=0,"all"===this.strategy){if(this.remainingSize<0){for(var n,o=e/this.cellSizesSum;t<this.cellCount-1;)n=Math.floor(o*this.cellSizes[t]),this.remainingSize+=n-this.cellSizes[t],this.cellStretch[t]=n-this.cellSizes[t],t++;this.cellStretch[this.cellCount-1]=-this.remainingSize,this.remainingSize=0}}else"last"===this.strategy&&this.remainingSize<0&&e!==1/0&&(this.cellStretch[this.cellCount-1]=-this.remainingSize,this.remainingSize=0)},L.prototype.countVisible=function(){return this.visibleCellCount},L.prototype.isLastIncomplete=function(){var e=this.instance.wtTable.getFirstVisibleRow(),t=this.instance.wtTable.getLastVisibleColumn(),n=this.instance.wtTable.getCell(new H(e,t)),r=o.Dom.offset(n),i=o.Dom.outerWidth(n),s=r.left+i;return this.instance.wtScrollbars.vertical.getScrollPosition()+this.instance.wtViewport.getViewportWidth()>=s},j.prototype.draw=function(e){if(this.drawInterrupted=!1,e||o.Dom.isVisible(this.wtTable.TABLE)){e=e&&this.getSetting("offsetRow")===this.lastOffsetRow,this.lastOffsetRow=this.getSetting("offsetRow");var t=this.getSetting("totalRows");return this.lastOffsetRow>t&&t>0&&(this.scrollVertical(-1/0),this.scrollViewport(new H(t-1,0))),this.wtTable.draw(e),this}this.drawInterrupted=!0},j.prototype.update=function(e,t){return this.wtSettings.update(e,t)},j.prototype.scrollVertical=function(e){var t=this.wtScroll.scrollVertical(e);return this.getSetting("onScrollVertically"),t},j.prototype.scrollHorizontal=function(e){var t=this.wtScroll.scrollHorizontal(e);return this.getSetting("onScrollHorizontally"),t},j.prototype.scrollViewport=function(e){return this.wtScroll.scrollViewport(e),this},j.prototype.getViewport=function(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]},j.prototype.getSetting=function(e,t,n,o,r){return this.wtSettings.getSetting(e,t,n,o,r)},j.prototype.hasSetting=function(e){return this.wtSettings.has(e)},j.prototype.destroy=function(){e(n).off("."+this.guid),e(document.body).off("."+this.guid),this.wtScrollbars.destroy(),this.wtEvent&&this.wtEvent.destroy()},B.prototype=new _,B.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode,t=this.instance.wtTable.holder.getBoundingClientRect();e.style.top=Math.ceil(t.top,10)+"px",e.style.left=Math.ceil(t.left,10)+"px"}},B.prototype.destroy=function(){_.prototype.destroy.call(this),clearTimeout(this.lastTimeout)},F.prototype.parentCell=function(e){var t={},n=this.instance.wtTable.TABLE,r=o.Dom.closest(e,["TD","TH"],n);return r&&o.Dom.isChildOf(r,n)?(t.coords=this.instance.wtTable.getCoords(r),t.TD=r):o.Dom.hasClass(e,"wtBorder")&&o.Dom.hasClass(e,"current")?(t.coords=this.instance.selections[0].cellRange.highlight,t.TD=this.instance.wtTable.getCell(t.coords)):o.Dom.hasClass(e,"wtBorder")&&o.Dom.hasClass(e,"area")&&(t.coords=this.instance.selections[1].cellRange.to,t.TD=this.instance.wtTable.getCell(t.coords)),t},F.prototype.destroy=function(){clearTimeout(this.dblClickTimeout[0]),clearTimeout(this.dblClickTimeout[1])},n.requestAnimFrame=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(e,t){return n.setTimeout(e,1e3/60)},n.cancelRequestAnimFrame=n.cancelAnimationFrame||n.webkitCancelRequestAnimationFrame||n.mozCancelRequestAnimationFrame||n.oCancelRequestAnimationFrame||n.msCancelRequestAnimationFrame||clearTimeout,n.getComputedStyle||(R={getPropertyValue:function(e){return"float"==e&&(e="styleFloat"),k.currentStyle[e.toUpperCase()]||null}},n.getComputedStyle=function(e){return k=e,R}),!String.prototype.trim){var U=/^\s+|\s+$/g;String.prototype.trim=function(){return this.replace(U,"")}}function z(e,t,n){this.offset=e,this.total=t,this.countTH=n}function V(e,t,n){P.apply(this,arguments),this.containerSizeFn=t,this.sizeAtIndex=n,this.cellSizesSum=0,this.cellSizes=[],this.cellCount=0,this.visiblCellCount=0,this.remainingSize=-1/0,this.maxOuts=10,this.curOuts=this.maxOuts}function q(e){this.instance=e}function G(e){this.instance=e,this.type="corner",this.init(),this.clone=this.makeClone("corner")}function K(e){this.instance=e,this.type="horizontal",this.cellSize=50,this.offset=0,this.init(),this.clone=this.makeClone("left")}function X(e){this.instance=e,this.type="vertical",this.cellSize=this.instance.wtSettings.settings.defaultRowHeight,this.offset,this.total,this.init(),this.clone=this.makeClone("top")}function Q(e){this.instance=e,e.update("scrollbarWidth",o.Dom.getScrollbarWidth()),e.update("scrollbarHeight",o.Dom.getScrollbarWidth()),this.vertical=new X(e),this.horizontal=new K(e),this.corner=new G(e),e.getSetting("debug")&&(this.debug=new B(e)),this.registerListeners()}function Y(e,t){this.settings=e,this.cellRange=t||null,this.instanceBorders={}}function $(e,t){var n=this;for(var r in this.instance=e,this.defaults={table:void 0,debug:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,data:void 0,offsetRow:0,fixedColumnsLeft:0,fixedRowsTop:0,rowHeaders:function(){return[]},columnHeaders:function(){return[]},totalRows:void 0,totalColumns:void 0,width:null,height:null,cellRenderer:function(e,t,r){var i=n.getSetting("data",e,t);o.Dom.fastInnerText(r,null==i?"":i)},columnWidth:50,rowHeight:function(e){return 23},defaultRowHeight:23,selections:null,hideBorderOnMouseDownOver:!1,onCellMouseDown:null,onCellMouseOver:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeDrawBorders:null,onScrollVertically:null,onScrollHorizontally:null,scrollbarWidth:10,scrollbarHeight:10,renderAllRows:!1,groups:!1},this.settings={},this.defaults)if(this.defaults.hasOwnProperty(r))if(void 0!==t[r])this.settings[r]=t[r];else{if(void 0===this.defaults[r])throw new Error('A required setting "'+r+'" was not provided');this.settings[r]=this.defaults[r]}}function J(e,t){this.instance=e,this.TABLE=t,o.Dom.removeTextNodes(this.TABLE);var n=this.TABLE.parentNode;if(!n||1!==n.nodeType||!o.Dom.hasClass(n,"wtHolder")){var r=document.createElement("DIV");r.className="wtSpreader",n&&n.insertBefore(r,this.TABLE),r.appendChild(this.TABLE)}if(this.spreader=this.TABLE.parentNode,!(n=this.spreader.parentNode)||1!==n.nodeType||!o.Dom.hasClass(n,"wtHolder")){var i=document.createElement("DIV");i.className="wtHider",n&&n.insertBefore(i,this.spreader),i.appendChild(this.spreader)}if(this.hider=this.spreader.parentNode,this.hiderStyle=this.hider.style,this.hiderStyle.position="relative",!(n=this.hider.parentNode)||1!==n.nodeType||!o.Dom.hasClass(n,"wtHolder")){var s=document.createElement("DIV");s.style.position="relative",s.className="wtHolder",e.cloneSource||(s.className+=" ht_master"),n&&n.insertBefore(s,this.hider),s.appendChild(this.hider)}if(this.holder=this.hider.parentNode,this.TBODY=this.TABLE.getElementsByTagName("TBODY")[0],this.TBODY||(this.TBODY=document.createElement("TBODY"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.getElementsByTagName("THEAD")[0],this.THEAD||(this.THEAD=document.createElement("THEAD"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.getElementsByTagName("COLGROUP")[0],this.COLGROUP||(this.COLGROUP=document.createElement("COLGROUP"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD)),this.instance.getSetting("columnHeaders").length&&!this.THEAD.childNodes.length){var a=document.createElement("TR");this.THEAD.appendChild(a)}this.colgroupChildrenLength=this.COLGROUP.childNodes.length,this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0,this.tbodyChildrenLength=this.TBODY.childNodes.length,this.rowFilter=null,this.columnFilter=null,this.columnWidthCache=[]}function Z(e){this.wtTable=e,this.instance=e.instance,this.rowFilter=e.rowFilter,this.columnFilter=e.columnFilter,this.TABLE=e.TABLE,this.THEAD=e.THEAD,this.TBODY=e.TBODY,this.COLGROUP=e.COLGROUP,this.utils=Z.utils}function ee(t){this.instance=t,this.resetSettings();var o=this;e(n).on("resize.walkontable."+this.instance.guid,(function(){o.clientHeight=o.getWorkspaceHeight()}))}z.prototype.offsetted=function(e){return e+this.offset},z.prototype.unOffsetted=function(e){return e-this.offset},z.prototype.visibleToSource=function(e){return this.offsetted(e)},z.prototype.sourceToVisible=function(e){return this.unOffsetted(e)},z.prototype.offsettedTH=function(e){return e-this.countTH},z.prototype.visibleColHeadedRowToSourceRow=function(e){return this.visibleToSource(this.offsettedTH(e))},z.prototype.sourceRowToVisibleColHeadedRow=function(e){return this.unOffsettedTH(this.sourceToVisible(e))},V.prototype=new P,V.prototype.add=function(e,t){if(!this.canRenderMoreRows())return!1;var n=this.sizeAtIndex(e,t);if(void 0===n)return!1;var o=this.getContainerSize(this.cellSizesSum+n);return this.cellSizes.push(n),this.cellSizesSum+=n,this.cellCount++,this.remainingSize=this.cellSizesSum-o,this.remainingSize<=n&&this.visiblCellCount++,!0},V.prototype.canRenderMoreRows=function(){return this.remainingSize<=0||this.cellCount-this.visiblCellCount<this.curOuts},V.prototype.remove=function(){var e=this.cellSizes.pop();this.cellSizesSum-=e,this.cellCount--,this.remainingSize-=e},V.prototype.removeOutstanding=function(){for(;this.cellCount-this.visiblCellCount>this.curOuts;)this.remove()},V.prototype.countRendered=function(){return this.cellCount},V.prototype.countVisible=function(){return this.visiblCellCount},V.prototype.isLastIncomplete=function(){var e=this.instance.wtTable.getLastVisibleRow(),t=this.instance.wtTable.getFirstVisibleColumn(),n=this.instance.wtTable.getCell(new H(e,t)),r=o.Dom.offset(n).top+o.Dom.outerHeight(n);return this.instance.wtScrollbars.horizontal.scrollHandler.offsetTop+this.instance.wtScrollbars.vertical.getScrollPosition()+this.instance.wtViewport.getViewportHeight()<r},q.prototype.scrollVertical=function(e){if(!this.instance.drawn)throw new Error("scrollVertical can only be called after table was drawn to DOM");var t,n=this.instance,o=n.getSetting("offsetRow"),r=n.getSetting("fixedRowsTop"),i=n.getSetting("totalRows"),s=n.wtViewport.getViewportHeight();return(t=i>0&&!this.instance.wtTable.isLastRowFullyVisible()?this.scrollLogicVertical(e,o,i,r,s,(function(e){return e-o<r&&e-o>=0?n.getSetting("rowHeight",e-o):n.getSetting("rowHeight",e)})):0)!==o&&this.instance.wtScrollbars.vertical.scrollTo(t),n},q.prototype.scrollHorizontal=function(e){return this.instance.wtScrollbars.horizontal.scrollTo(e),this.instance},q.prototype.scrollLogicVertical=function(e,t,n,o,r,i){var s=t+e;return s>=n-o&&(s=n-o-1),s<0&&(s=0),s},q.prototype.scrollViewport=function(e){if(this.instance.drawn){this.instance.getSetting("offsetRow");var t=this.instance.getSetting("totalRows"),n=this.instance.getSetting("totalColumns");if(e.row<0||e.row>t-1)throw new Error("row "+e.row+" does not exist");if(e.col<0||e.col>n-1)throw new Error("column "+e.col+" does not exist");var o=this.instance.wtTable.getCell(e);"object"==typeof o?e.col>=this.instance.getSetting("fixedColumnsLeft")&&this.scrollToRenderedCell(o):e.row>=this.instance.wtTable.getLastVisibleRow()?(this.scrollVertical(e.row-this.instance.wtTable.getLastVisibleRow()),e.row==this.instance.wtTable.getLastVisibleRow()&&this.instance.wtTable.getRowStrategy().isLastIncomplete()&&this.scrollViewport(e)):e.row>=this.instance.getSetting("fixedRowsTop")&&this.scrollVertical(e.row-this.instance.wtTable.getFirstVisibleRow())}},q.prototype.scrollToRenderedCell=function(e){var t=o.Dom.offset(e),r=o.Dom.outerWidth(e),i=o.Dom.outerHeight(e),s=o.Dom.offset(this.instance.wtTable.TABLE),a=this.instance.wtScrollbars.horizontal.getScrollPosition(),l=this.instance.wtScrollbars.vertical.getScrollPosition(),c=this.instance.wtViewport.getWorkspaceWidth(),u=this.instance.wtViewport.getWorkspaceHeight(),h=o.Dom.outerWidth(this.instance.wtScrollbars.horizontal.clone.wtTable.TABLE),d=o.Dom.outerHeight(this.instance.wtScrollbars.vertical.clone.wtTable.TABLE);if(this.instance.wtScrollbars.horizontal.scrollHandler!==n&&(s.left=0,t.left-=o.Dom.offset(this.instance.wtScrollbars.horizontal.scrollHandler).left),this.instance.wtScrollbars.vertical.scrollHandler!==n&&(s.top=0,t.top=t.top-o.Dom.offset(this.instance.wtScrollbars.vertical.scrollHandler).top),r<c)if(t.left<a+h)this.instance.wtScrollbars.horizontal.setScrollPosition(t.left-h);else if(t.left+r>s.left+a+c){var f=t.left+r-(s.left+a+c);this.instance.wtScrollbars.horizontal.setScrollPosition(a+f)}i<u&&(t.top<l+d?(this.instance.wtScrollbars.vertical.setScrollPosition(t.top-d),this.instance.wtScrollbars.vertical.onScroll()):t.top+i>l+u&&(this.instance.wtScrollbars.vertical.setScrollPosition(t.top-u+i),this.instance.wtScrollbars.vertical.onScroll()))},G.prototype=new _,G.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===n){var t=this.instance.wtTable.holder.getBoundingClientRect(),r=Math.ceil(t.top),i=Math.ceil(t.left);e.style.left=i<0?-i+"px":"0",e.style.top=r<0?-r+"px":"0"}else e.style.top=this.instance.wtScrollbars.vertical.getScrollPosition()+"px",e.style.left=this.instance.wtScrollbars.horizontal.getScrollPosition()+"px";e.style.width=o.Dom.outerWidth(this.clone.wtTable.TABLE)+4+"px",e.style.height=o.Dom.outerHeight(this.clone.wtTable.TABLE)+4+"px"}},K.prototype=new _,K.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===n){var t=this.instance.wtTable.holder.getBoundingClientRect(),r=Math.ceil(t.left);e.style.left=r<0?-r+"px":"0",e.style.top=this.instance.wtTable.hider.style.top}else e.style.top=this.instance.wtTable.hider.style.top,e.style.left=this.getScrollPosition()+"px";e.style.height=o.Dom.outerHeight(this.clone.wtTable.TABLE)+"px",e.style.width=o.Dom.outerWidth(this.clone.wtTable.TABLE)+4+"px"}},K.prototype.refresh=function(e){_.prototype.refresh.call(this,e)},K.prototype.getScrollPosition=function(){return o.Dom.getScrollLeft(this.scrollHandler)},K.prototype.setScrollPosition=function(e){this.scrollHandler===n?n.scrollTo(e,o.Dom.getWindowScrollTop()):this.scrollHandler.scrollLeft=e},K.prototype.onScroll=function(){this.readSettings(),this.instance.getSetting("onScrollHorizontally")},K.prototype.getLastCell=function(){return this.instance.wtTable.getLastVisibleColumn()},K.prototype.applyToDOM=function(){},K.prototype.scrollTo=function(e){this.setScrollPosition(this.getTableParentOffset()+e*this.cellSize)},K.prototype.getTableParentOffset=function(){return this.scrollHandler===n?this.instance.wtTable.holderOffset.left:0},K.prototype.readSettings=function(){this.total=this.instance.getSetting("totalColumns")},X.prototype=new _,X.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===n){var t=this.instance.wtTable.holder.getBoundingClientRect(),r=Math.ceil(t.top);e.style.left="0",e.style.top=r<0?-r+"px":"0"}else e.style.top=this.getScrollPosition()+"px",e.style.left="0";this.instance.wtScrollbars.horizontal.scrollHandler===n?e.style.width=this.instance.wtViewport.getWorkspaceActualWidth()+"px":e.style.width=o.Dom.outerWidth(this.clone.wtTable.TABLE)+"px",e.style.height=o.Dom.outerHeight(this.clone.wtTable.TABLE)+4+"px"}},X.prototype.getScrollPosition=function(){return o.Dom.getScrollTop(this.scrollHandler)},X.prototype.setScrollPosition=function(e){this.scrollHandler===n?n.scrollTo(o.Dom.getWindowScrollLeft(),e):this.scrollHandler.scrollTop=e},X.prototype.onScroll=function(){this.readSettings(),this.instance.draw(!0),this.instance.getSetting("onScrollVertically")},X.prototype.getLastCell=function(){return this.instance.getSetting("offsetRow")+this.instance.wtTable.tbodyChildrenLength-1},X.prototype.sumCellSizes=function(e,t){for(var n,o=0;e<t;)o+=void 0!==(n=this.instance.wtSettings.settings.rowHeight(e))?n:this.instance.wtSettings.settings.defaultRowHeight,e++;return o},X.prototype.refresh=function(e){this.applyToDOM(),_.prototype.refresh.call(this,e)},X.prototype.applyToDOM=function(){var e=this.getLastCell();this.measureBefore=this.sumCellSizes(0,this.offset),this.measureAfter=-1===e?0:this.sumCellSizes(e,this.total-e);var t=this.instance.wtViewport.getColumnHeaderHeight();this.fixedContainer.style.height=t+this.sumCellSizes(0,this.total)+4+"px",this.fixed.style.top=this.measureBefore+"px",this.fixed.style.bottom=""},X.prototype.scrollTo=function(e){var t=this.getTableParentOffset()+e*this.cellSize;this.setScrollPosition(t),this.onScroll()},X.prototype.getTableParentOffset=function(){return this.scrollHandler===n?this.instance.wtTable.holderOffset.top:0},X.prototype.readSettings=function(){this.offset=this.instance.getSetting("offsetRow"),this.total=this.instance.getSetting("totalRows");for(var e,t=this.getScrollPosition()-this.getTableParentOffset(),n=0,o=0;o<this.total&&!((n+=void 0!==(e=this.instance.getSetting("rowHeight",o))?e:this.instance.wtSettings.settings.defaultRowHeight)-1>t);o++);this.offset=Math.min(o,this.total),this.instance.update("offsetRow",this.offset)},Q.prototype.registerListeners=function(){var t,o,r,i,s=this;function a(){s.instance.drawn&&(s.instance.wtTable.holder.parentNode?(s.vertical.windowScrollPosition=s.vertical.getScrollPosition(),s.horizontal.windowScrollPosition=s.horizontal.getScrollPosition(),s.box=s.instance.wtTable.hider.getBoundingClientRect(),s.vertical.windowScrollPosition===t&&s.horizontal.windowScrollPosition===o&&s.box.top===r&&s.box.left===i||(s.vertical.onScroll(),s.horizontal.onScroll(),t=s.vertical.windowScrollPosition,o=s.horizontal.windowScrollPosition,r=s.box.top,i=s.box.left)):s.destroy())}var l=e(n);this.vertical.$scrollHandler.on("scroll."+this.instance.guid,a),this.vertical.scrollHandler!==this.horizontal.scrollHandler&&this.horizontal.$scrollHandler.on("scroll."+this.instance.guid,a),this.vertical.scrollHandler!==n&&this.horizontal.scrollHandler!==n&&l.on("scroll."+this.instance.guid,a)},Q.prototype.destroy=function(){this.vertical&&(this.vertical.destroy(),this.vertical.$scrollHandler.off("scroll."+this.instance.guid)),this.horizontal&&(this.horizontal.destroy(),this.vertical.$scrollHandler.off("scroll."+this.instance.guid)),e(n).off("scroll."+this.instance.guid),this.corner&&this.corner.destroy(),this.debug&&this.debug.destroy()},Q.prototype.refresh=function(e){this.horizontal&&this.horizontal.readSettings(),this.vertical&&this.vertical.readSettings(),this.horizontal&&this.horizontal.refresh(e),this.vertical&&this.vertical.refresh(e),this.corner&&this.corner.refresh(e),this.debug&&this.debug.refresh(e)},Q.prototype.applyToDOM=function(){this.horizontal&&this.horizontal.applyToDOM(),this.vertical&&this.vertical.applyToDOM()},Y.prototype.getBorder=function(e){if(this.instanceBorders[e.guid])return this.instanceBorders[e.guid];this.instanceBorders[e.guid]=new I(e,this.settings)},Y.prototype.isEmpty=function(){return null===this.cellRange},Y.prototype.add=function(e){this.isEmpty()?this.cellRange=new N(e,e,e):this.cellRange.expand(e)},Y.prototype.replace=function(e,t){if(!this.isEmpty()){if(this.cellRange.from.isEqual(e))return this.cellRange.from=t,!0;if(this.cellRange.to.isEqual(e))return this.cellRange.to=t,!0}return!1},Y.prototype.clear=function(){this.cellRange=null},Y.prototype.getCorners=function(){var e=this.cellRange.getTopLeftCorner(),t=this.cellRange.getBottomRightCorner();return[e.row,e.col,t.row,t.col]},Y.prototype.addClassAtCoords=function(e,t,n,r){var i=e.wtTable.getCell(new H(t,n));"object"==typeof i&&o.Dom.addClass(i,r)},Y.prototype.draw=function(e){var t,n,r,i,s,a=e.wtTable.getRowStrategy().countVisible(),l=e.wtTable.getColumnStrategy().cellCount;if(this.isEmpty())this.settings.border&&(u=this.getBorder(e))&&u.disappear();else{for(t=this.getCorners(),n=0;n<a;n++)for(i=e.wtTable.rowFilter.visibleToSource(n),r=0;r<l;r++)if(s=e.wtTable.columnFilter.visibleToSource(r),i>=t[0]&&i<=t[2]&&s>=t[1]&&s<=t[3]){var c;this.settings.className&&this.addClassAtCoords(e,i,s,this.settings.className),s===t[1]&&(c=e.wtTable.getRowHeader(i))&&o.Dom.addClass(c,this.settings.highlightRowClassName),(i===t[0]||i>t[0]&&0==n)&&(c=e.wtTable.getColumnHeader(s))&&o.Dom.addClass(c,this.settings.highlightColumnClassName)}else i>=t[0]&&i<=t[2]?this.addClassAtCoords(e,i,s,this.settings.highlightRowClassName):s>=t[1]&&s<=t[3]&&this.addClassAtCoords(e,i,s,this.settings.highlightColumnClassName);var u;e.getSetting("onBeforeDrawBorders",t,this.settings.className),this.settings.border&&(u=this.getBorder(e))&&u.appear(t)}},$.prototype.update=function(e,t){if(void 0===t)for(var n in e)e.hasOwnProperty(n)&&(this.settings[n]=e[n]);else this.settings[e]=t;return this.instance},$.prototype.getSetting=function(e,t,n,o,r){return"function"==typeof this.settings[e]?this.settings[e](t,n,o,r):void 0!==t&&"[object Array]"===Object.prototype.toString.call(this.settings[e])?this.settings[e][t]:this.settings[e]},$.prototype.has=function(e){return!!this.settings[e]},J.prototype.getRowStrategy=function(){return this.isWorkingOnClone()?this.instance.cloneSource.wtTable.rowStrategy:this.rowStrategy},J.prototype.getColumnStrategy=function(){return this.isWorkingOnClone()?this.instance.cloneSource.wtTable.columnStrategy:this.columnStrategy},J.prototype.isWorkingOnClone=function(){return!!this.instance.cloneSource},J.prototype.refreshHiderDimensions=function(){var e=this.spreader.style;e.position="relative",e.width="auto",e.height="auto"},J.prototype.draw=function(e){var t;return e?this.instance.wtScrollbars&&this.instance.wtScrollbars.refresh(!0):(this.isWorkingOnClone()?this.tableOffset=this.instance.cloneSource.wtTable.tableOffset:(this.holderOffset=o.Dom.offset(this.holder),this.tableOffset=o.Dom.offset(this.TABLE),this.instance.wtScrollbars.vertical.readSettings(),this.instance.wtScrollbars.horizontal.readSettings(),this.instance.wtViewport.resetSettings()),t=this.instance.cloneOverlay instanceof B||this.instance.cloneOverlay instanceof X||this.instance.cloneOverlay instanceof G?0:this.instance.wtSettings.settings.offsetRow,this.rowFilter=new z(t,this.instance.getSetting("totalRows"),this.instance.getSetting("columnHeaders").length),this.columnFilter=new M(this.instance.getSetting("totalColumns"),this.instance.getSetting("rowHeaders").length),this._doDraw()),this.refreshPositions(e),this.isWorkingOnClone()||(this.instance.wtScrollbars.vertical.resetFixedPosition(),this.instance.wtScrollbars.horizontal.resetFixedPosition(),this.instance.wtScrollbars.corner.resetFixedPosition(),this.instance.wtScrollbars.debug&&this.instance.wtScrollbars.debug.resetFixedPosition()),this.instance.drawn=!0,this},J.prototype._doDraw=function(){new Z(this).render()},J.prototype.refreshPositions=function(e){this.refreshHiderDimensions(),this.refreshSelections(e)},J.prototype.removeClassFromCells=function(e){for(var t=this.TABLE.querySelectorAll("."+e),n=0,r=t.length;n<r;n++)o.Dom.removeClass(t[n],e)},J.prototype.refreshSelections=function(e){if(this.instance.selections){if(e)for(var t=0,n=this.instance.selections.length;t<n;t++)this.instance.selections[t].settings.className&&this.removeClassFromCells(this.instance.selections[t].settings.className),this.instance.selections[t].settings.highlightRowClassName&&this.removeClassFromCells(this.instance.selections[t].settings.highlightRowClassName),this.instance.selections[t].settings.highlightColumnClassName&&this.removeClassFromCells(this.instance.selections[t].settings.highlightColumnClassName);for(t=0,n=this.instance.selections.length;t<n;t++)this.instance.selections[t].draw(this.instance,e)}},J.prototype.getCell=function(e){if(this.isRowBeforeViewport(e.row))return-1;if(this.isRowAfterViewport(e.row))return-2;var t=this.TBODY.childNodes[this.rowFilter.sourceToVisible(e.row)];return t?t.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e.col)]:void 0},J.prototype.getColumnHeader=function(e){var t=this.THEAD.childNodes[0];if(t)return t.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e)]},J.prototype.getRowHeader=function(e){if(0==this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0))return null;var t=this.TBODY.childNodes[this.rowFilter.sourceToVisible(e)];return t?t.childNodes[0]:void 0},J.prototype.getCoords=function(e){var t=e.parentNode,n=o.Dom.index(t);return new H(n=t.parentNode===this.THEAD?this.rowFilter.visibleColHeadedRowToSourceRow(n):this.rowFilter.visibleToSource(n),this.columnFilter.visibleRowHeadedColumnToSourceColumn(e.cellIndex))},J.prototype.getTrForRow=function(e){return this.TBODY.childNodes[this.rowFilter.sourceToVisible(e)]},J.prototype.getFirstVisibleRow=function(){return this.rowFilter.visibleToSource(0)},J.prototype.getFirstVisibleColumn=function(){if(this.isWorkingOnClone())return this.instance.cloneOverlay instanceof K||this.instance.cloneOverlay instanceof G?0:this.instance.cloneSource.wtTable.getFirstVisibleColumn();var e=this.instance.wtScrollbars.horizontal.getScrollPosition(),t=this.getColumnStrategy().cellCount,n=this.TBODY.firstChild;if(!n)return 0;for(var o=0;o<t;o++)if((e-=n.childNodes[o].offsetWidth)<0)return o;return-1},J.prototype.getLastVisibleRow=function(){var e=this.rowFilter.visibleToSource(this.getRowStrategy().countVisible()-1),t=this.instance;if(t.cloneOverlay instanceof X||t.cloneOverlay instanceof G){var n=this.instance.getSetting("fixedRowsTop");return Math.min(n-1,e)}return e},J.prototype.getLastVisibleColumn=function(){var e=this.instance;if(this.isWorkingOnClone()){if(e.cloneOverlay instanceof K||e.cloneOverlay instanceof G){var t=this.getColumnStrategy().countVisible()-1,n=e.getSetting("fixedColumnsLeft");return Math.min(n-1,t)}return this.instance.cloneSource.wtTable.getLastVisibleColumn()}var o=this.instance.wtScrollbars.horizontal.getScrollPosition()+this.instance.wtViewport.getWorkspaceWidth(1/0),r=this.getColumnStrategy().cellCount,i=this.instance.getSetting("rowHeaders").length||0,s=this.TBODY.firstChild;if(!r)return-1;for(var a=0;a<r+i;a++)if((o-=s.childNodes[a].offsetWidth)<=0)return a-i;return a-i-1},J.prototype.isRowBeforeViewport=function(e){return this.rowFilter.sourceToVisible(e)<0&&e>=0},J.prototype.isRowAfterViewport=function(e){return e>this.getLastVisibleRow()},J.prototype.isColumnBeforeViewport=function(e){return this.columnFilter.sourceToVisible(e)<0&&e>=0},J.prototype.isColumnAfterViewport=function(e){return e>this.getLastVisibleColumn()},J.prototype.isRowInViewport=function(e){return!this.isRowBeforeViewport(e)&&!this.isRowAfterViewport(e)},J.prototype.isColumnInViewport=function(e){return!this.isColumnBeforeViewport(e)&&!this.isColumnAfterViewport(e)},J.prototype.isLastRowFullyVisible=function(){return this.getLastVisibleRow()===this.instance.getSetting("totalRows")-1&&!this.getRowStrategy().isLastIncomplete()},J.prototype.isLastColumnFullyVisible=function(){return this.getLastVisibleColumn()===this.instance.getSetting("totalColumns")-1&&!this.getColumnStrategy().isLastIncomplete()},J.prototype.getVisibleRowsCount=function(){return this.getRowStrategy().countVisible()},J.prototype.allRowsInViewport=function(){return this.getRowStrategy().cellCount==this.getVisibleRowsCount()},Z.prototype.render=function(){this.wtTable.isWorkingOnClone()||this.instance.getSetting("beforeDraw",!0),this.rowHeaders=this.instance.getSetting("rowHeaders"),this.rowHeaderCount=this.rowHeaders.length,this.fixedRowsTop=this.instance.getSetting("fixedRowsTop"),this.columnHeaders=this.instance.getSetting("columnHeaders"),this.columnHeaderCount=this.columnHeaders.length;var e,t,n,o,r=this.instance.getSetting("totalRows"),i=!1;if(this.instance.getSetting("totalColumns")>0&&(this.wtTable.isWorkingOnClone()&&(this.instance.cloneOverlay instanceof X||this.instance.cloneOverlay instanceof G?o=this.fixedRowsTop:this.instance.cloneOverlay instanceof K&&(o=this.wtTable.getRowStrategy().cellCount)),this.adjustAvailableNodes(),i=!0,this.renderColGroups(),this.renderColumnHeaders(),t=this.getColumnCount(),this.renderRows(r,o,t),this.wtTable.isWorkingOnClone()||(n=this.instance.wtViewport.getWorkspaceWidth(),this.instance.wtViewport.containerWidth=null,this.wtTable.getColumnStrategy().stretch()),this.adjustColumnWidths(t)),i||this.adjustAvailableNodes(),this.instance.cloneOverlay instanceof B||this.removeRedundantRows(),!this.wtTable.isWorkingOnClone()){if(this.markOversizedRows(),this.instance.wtScrollbars.applyToDOM(),n!==this.instance.wtViewport.getWorkspaceWidth()){this.instance.wtViewport.containerWidth=null,this.wtTable.getColumnStrategy().stretch();var s=this.instance.wtTable.columnWidthCache;for(e=0;e<this.wtTable.getColumnStrategy().cellCount;e++){var a=this.wtTable.getColumnStrategy().getSize(e);this.COLGROUP.childNodes[e+this.rowHeaderCount].style.width=a+"px",s[e]=a}}this.instance.wtScrollbars.refresh(!1),this.instance.getSetting("onDraw",!0)}},Z.prototype.removeRedundantRows=function(){for(var e=this.wtTable.getRowStrategy().countRendered();this.wtTable.tbodyChildrenLength>e;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--},Z.prototype.renderRows=function(e,t,n){this.instance.getSetting("offsetRow");for(var o,r,i=0,s=this.rowFilter.visibleToSource(i),a=this.wtTable.isWorkingOnClone();s<e&&s>=0;){if(i>1e3)throw new Error("Security brake: Too much TRs. Please define height for your table, which will enforce scrollbars.");if(void 0!==t&&i===t)break;if(r=this.getOrCreateTrForRow(i,r),this.renderRowHeaders(s,r),this.adjustColumns(r,n+this.rowHeaderCount),o=this.renderCells(s,r,n),this.instance.getSetting("offsetRow"),!a){if(!1===this.wtTable.getRowStrategy().add(i,o))break;this.resetOversizedRow(s)}if(r.firstChild){var l=this.instance.getSetting("rowHeight",s);r.firstChild.style.height=l?l+"px":""}i++,s=this.rowFilter.visibleToSource(i)}},Z.prototype.resetOversizedRow=function(e){this.instance.wtTable.oversizedRows&&this.instance.wtTable.oversizedRows[e]&&(this.instance.wtTable.oversizedRows[e]=void 0)},Z.prototype.markOversizedRows=function(){for(var e,t,n,r,i=this.instance.wtTable.TBODY.childNodes.length;i;)i--,n=this.instance.wtTable.rowFilter.visibleToSource(i),e=this.instance.wtSettings.settings.rowHeight(n),r=this.instance.wtTable.getTrForRow(n),t=o.Dom.innerHeight(r)-1,(!e&&this.instance.wtSettings.settings.defaultRowHeight<t||e<t)&&(this.instance.wtTable.oversizedRows||(this.instance.wtTable.oversizedRows={}),this.instance.wtTable.oversizedRows[n]=t)},Z.prototype.renderCells=function(e,t,n){for(var r,i,s=0;s<n;s++)i=this.columnFilter.visibleToSource(s),"TH"==(r=0===s?t.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(i)]:r.nextSibling).nodeName&&(r=this.utils.replaceThWithTd(r,t)),o.Dom.hasClass(r,"hide")||(r.className=""),r.removeAttribute("style"),this.instance.getSetting("cellRenderer",e,i,r);return r},Z.prototype.adjustColumnWidths=function(e){for(var t,n=this.instance.wtTable.columnWidthCache,o=0;o<e;o++)(t=this.wtTable.isWorkingOnClone()?this.instance.cloneSource.wtTable.columnWidthCache[o]:this.wtTable.getColumnStrategy().getSize(o))!==n[o]&&(this.COLGROUP.childNodes[o+this.rowHeaderCount].style.width=t+"px",n[o]=t)},Z.prototype.appendToTbody=function(e){this.TBODY.appendChild(e),this.wtTable.tbodyChildrenLength++},Z.prototype.getOrCreateTrForRow=function(e,t){var n;return e>=this.wtTable.tbodyChildrenLength?(n=this.createRow(),this.appendToTbody(n)):n=0===e?this.TBODY.firstChild:t.nextSibling,n},Z.prototype.createRow=function(){for(var e=document.createElement("TR"),t=0;t<this.rowHeaderCount;t++)e.appendChild(document.createElement("TH"));return e},Z.prototype.renderRowHeader=function(e,t,n){n.className="",n.removeAttribute("style"),this.rowHeaders[t](e,n,t)},Z.prototype.renderRowHeaders=function(e,t){for(var n=t.firstChild,o=0;o<this.rowHeaderCount;o++)n?"TD"==n.nodeName&&(n=this.utils.replaceTdWithTh(n,t)):(n=document.createElement("TH"),t.appendChild(n)),this.renderRowHeader(e,o,n),n=n.nextSibling},Z.prototype.adjustAvailableNodes=function(){this.refreshStretching(),this.adjustColGroups(),this.adjustThead()},Z.prototype.renderColumnHeaders=function(){if(this.columnHeaderCount)for(var e,t=this.getColumnCount(),n=0;n<this.columnHeaderCount;n++){e=this.getTrForColumnHeaders(n);for(var o=-1*this.rowHeaderCount;o<t;o++)this.renderColumnHeader(n,o,e.childNodes[o+this.rowHeaderCount])}},Z.prototype.adjustColGroups=function(){for(var e=this.getColumnCount();this.wtTable.colgroupChildrenLength<e+this.rowHeaderCount;)this.COLGROUP.appendChild(document.createElement("COL")),this.wtTable.colgroupChildrenLength++;for(;this.wtTable.colgroupChildrenLength>e+this.rowHeaderCount;)this.COLGROUP.removeChild(this.COLGROUP.lastChild),this.wtTable.colgroupChildrenLength--,this.wtTable.columnWidthCache&&this.wtTable.columnWidthCache.splice(-1,1)},Z.prototype.adjustThead=function(){var e=this.getColumnCount(),t=this.THEAD.firstChild;if(this.columnHeaders.length){for(var n=0,r=this.columnHeaders.length;n<r;n++){for((t=this.THEAD.childNodes[n])||(t=document.createElement("TR"),this.THEAD.appendChild(t)),this.theadChildrenLength=t.childNodes.length;this.theadChildrenLength<e+this.rowHeaderCount;)t.appendChild(document.createElement("TH")),this.theadChildrenLength++;for(;this.theadChildrenLength>e+this.rowHeaderCount;)t.removeChild(t.lastChild),this.theadChildrenLength--}var i=this.THEAD.childNodes.length;if(i>this.columnHeaders.length)for(n=this.columnHeaders.length;n<i;n++)this.THEAD.removeChild(this.THEAD.lastChild)}else t&&o.Dom.empty(t)},Z.prototype.getTrForColumnHeaders=function(e){return this.THEAD.childNodes[e]},Z.prototype.renderColumnHeader=function(e,t,n){return n.className="",n.removeAttribute("style"),this.columnHeaders[e](t,n,e)},Z.prototype.getColumnCount=function(){return this.wtTable.isWorkingOnClone()&&(this.instance.cloneOverlay instanceof K||this.instance.cloneOverlay instanceof G)?this.instance.getSetting("fixedColumnsLeft"):this.wtTable.getColumnStrategy().cellCount},Z.prototype.renderColGroups=function(){for(var e=0;e<this.wtTable.colgroupChildrenLength;e++)e<this.rowHeaderCount?o.Dom.addClass(this.COLGROUP.childNodes[e],"rowHeader"):o.Dom.removeClass(this.COLGROUP.childNodes[e],"rowHeader")},Z.prototype.adjustColumns=function(e,t){for(var n=e.childNodes.length;n<t;){var o=document.createElement("TD");e.appendChild(o),n++}for(;n>t;)e.removeChild(e.lastChild),n--},Z.prototype.refreshStretching=function(){if(!this.wtTable.isWorkingOnClone()){var e=this.instance,t=e.getSetting("stretchH"),n=(e.getSetting("totalRows"),e.getSetting("totalColumns")),o=this;this.wtTable.columnStrategy=new L(e,(function(e){return o.instance.wtViewport.getViewportWidth(e)}),(function(t){var r=o.columnFilter.visibleToSource(t);if(r<n)return e.getSetting("columnWidth",r)}),t),this.wtTable.rowStrategy=new V(e,(function(t){return o.instance.cloneOverlay instanceof B||e.wtSettings.settings.renderAllRows?1/0:o.instance.wtViewport.getViewportHeight(t)}),(function(t,n){return e.wtSettings.settings.defaultRowHeight}))}},Z.utils={},Z.utils.replaceTdWithTh=function(e,t){var n;return n=document.createElement("TH"),t.insertBefore(n,e),t.removeChild(e),n},Z.utils.replaceThWithTd=function(e,t){var n=document.createElement("TD");return t.insertBefore(n,e),t.removeChild(e),n},ee.prototype.getWorkspaceHeight=function(){var e=this.instance.wtScrollbars.vertical.scrollHandler;return e===n?document.documentElement.clientHeight:o.Dom.outerHeight(e)>0&&e.clientHeight>0?e.clientHeight:1/0},ee.prototype.getWorkspaceWidth=function(){var e=Math.min(this.getContainerFillWidth(),document.documentElement.offsetWidth-this.getWorkspaceOffset().left,document.documentElement.offsetWidth),t=this.instance.wtScrollbars.horizontal.scrollHandler;if(t!=n){var r=this.instance.wtScrollbars.horizontal.scrollHandler.style.overflow;if("scroll"==r||"hidden"==r||"auto"==r)return Math.max(e,t.clientWidth)}return Math.max(e,o.Dom.outerWidth(this.instance.wtTable.TABLE))},ee.prototype.getContainerFillWidth=function(){if(this.containerWidth)return this.containerWidth;for(var e,t,n=this.instance.wtTable.holder;n.parentNode!=document.body&&null!=n.parentNode&&-1===n.className.indexOf("handsontable");)n=n.parentNode;return(t=document.createElement("DIV")).style.width="100%",t.style.height="1px",n.appendChild(t),e=t.offsetWidth,this.containerWidth=e,n.removeChild(t),e},ee.prototype.getWorkspaceOffset=function(){return o.Dom.offset(this.instance.wtTable.TABLE)},ee.prototype.getWorkspaceActualHeight=function(){return o.Dom.outerHeight(this.instance.wtTable.TABLE)},ee.prototype.getWorkspaceActualWidth=function(){return o.Dom.outerWidth(this.instance.wtTable.TABLE)||o.Dom.outerWidth(this.instance.wtTable.TBODY)||o.Dom.outerWidth(this.instance.wtTable.THEAD)},ee.prototype.getColumnHeaderHeight=function(){return isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=o.Dom.outerHeight(this.instance.wtTable.THEAD)),this.columnHeaderHeight},ee.prototype.getViewportHeight=function(e){var t=this.getWorkspaceHeight(e);if(t===1/0)return t;var n=this.getColumnHeaderHeight();return n>0&&(t-=n),t},ee.prototype.getRowHeaderWidth=function(){if(this.instance.cloneSource)return this.instance.cloneSource.wtViewport.getRowHeaderWidth();if(isNaN(this.rowHeaderWidth)){var e=this.instance.getSetting("rowHeaders");if(e.length){var t=this.instance.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(var n=0,r=e.length;n<r;n++)t?(this.rowHeaderWidth+=o.Dom.outerWidth(t),t=t.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0}return this.rowHeaderWidth},ee.prototype.getViewportWidth=function(e){var t=this.getWorkspaceWidth(e);if(t===1/0)return t;var n=this.getRowHeaderWidth();return n>0?t-n:t},ee.prototype.resetSettings=function(){this.rowHeaderWidth=NaN,this.columnHeaderHeight=NaN}}(r,window,Handsontable),function(){var n,r={},i="en",s=null,a="0,0",l=e.exports;function c(e){this._value=e}function u(e,t,n,o){var r,i,s=Math.pow(10,t);return i=(n(e*s)/s).toFixed(t),o&&(r=new RegExp("0{1,"+o+"}$"),i=i.replace(r,"")),i}function h(e,t,n){var o,a,l,c,h,d,f=!1,p=!1,g=!1,m="",y=!1,v=!1,b=!1,w=!1,C=!1,x="",S="",T=Math.abs(e),E=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],A="",k=!1;if(0===e&&null!==s)return s;if(t.indexOf("(")>-1?(f=!0,t=t.slice(1,-1)):t.indexOf("+")>-1&&(p=!0,t=t.replace(/\+/g,"")),t.indexOf("a")>-1&&(y=t.indexOf("aK")>=0,v=t.indexOf("aM")>=0,b=t.indexOf("aB")>=0,w=t.indexOf("aT")>=0,C=y||v||b||w,t.indexOf(" a")>-1?(m=" ",t=t.replace(" a","")):t=t.replace("a",""),T>=Math.pow(10,12)&&!C||w?(m+=r[i].abbreviations.trillion,e/=Math.pow(10,12)):T<Math.pow(10,12)&&T>=Math.pow(10,9)&&!C||b?(m+=r[i].abbreviations.billion,e/=Math.pow(10,9)):T<Math.pow(10,9)&&T>=Math.pow(10,6)&&!C||v?(m+=r[i].abbreviations.million,e/=Math.pow(10,6)):(T<Math.pow(10,6)&&T>=Math.pow(10,3)&&!C||y)&&(m+=r[i].abbreviations.thousand,e/=Math.pow(10,3))),t.indexOf("b")>-1)for(t.indexOf(" b")>-1?(x=" ",t=t.replace(" b","")):t=t.replace("b",""),l=0;l<=E.length;l++)if(o=Math.pow(1024,l),a=Math.pow(1024,l+1),e>=o&&e<a){x+=E[l],o>0&&(e/=o);break}return t.indexOf("o")>-1&&(t.indexOf(" o")>-1?(S=" ",t=t.replace(" o","")):t=t.replace("o",""),S+=r[i].ordinal(e)),t.indexOf("[.]")>-1&&(g=!0,t=t.replace("[.]",".")),c=e.toString().split(".")[0],h=t.split(".")[1],d=t.indexOf(","),h?(c=(A=h.indexOf("[")>-1?u(e,(h=(h=h.replace("]","")).split("["))[0].length+h[1].length,n,h[1].length):u(e,h.length,n)).split(".")[0],A=A.split(".")[1].length?r[i].delimiters.decimal+A.split(".")[1]:"",g&&0===Number(A.slice(1))&&(A="")):c=u(e,null,n),c.indexOf("-")>-1&&(c=c.slice(1),k=!0),d>-1&&(c=c.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+r[i].delimiters.thousands)),0===t.indexOf(".")&&(c=""),(f&&k?"(":"")+(!f&&k?"-":"")+(!k&&p?"+":"")+c+A+(S||"")+(m||"")+(x||"")+(f&&k?")":"")}function d(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function f(){var e=Array.prototype.slice.call(arguments);return e.reduce((function(e,t){var n=d(e),o=d(t);return n>o?n:o}),-1/0)}(n=function(e){return n.isNumeral(e)?e=e.value():0===e||void 0===e?e=0:Number(e)||(e=n.fn.unformat(e)),new c(Number(e))}).version="1.5.3",n.isNumeral=function(e){return e instanceof c},n.language=function(e,t){if(!e)return i;if(e&&!t){if(!r[e])throw new Error("Unknown language : "+e);i=e}return!t&&r[e]||function(e,t){r[e]=t}(e,t),n},n.languageData=function(e){if(!e)return r[i];if(!r[e])throw new Error("Unknown language : "+e);return r[e]},n.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),n.zeroFormat=function(e){s="string"==typeof e?e:null},n.defaultFormat=function(e){a="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,o,r=this.length>>>0,i=!1;for(1<arguments.length&&(o=t,i=!0),n=0;r>n;++n)this.hasOwnProperty(n)&&(i?o=e(o,this[n],n,this):(o=this[n],i=!0));if(!i)throw new TypeError("Reduce of empty array with no initial value");return o}),n.fn=c.prototype={clone:function(){return n(this)},format:function(e,t){return function(e,t,n){return t.indexOf("$")>-1?function(e,t,n){var o,s,a=t.indexOf("$"),l=t.indexOf("("),c=t.indexOf("-"),u="";return t.indexOf(" $")>-1?(u=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(u=" ",t=t.replace("$ ","")):t=t.replace("$",""),s=h(e._value,t,n),a<=1?s.indexOf("(")>-1||s.indexOf("-")>-1?(o=1,(a<l||a<c)&&(o=0),(s=s.split("")).splice(o,0,r[i].currency.symbol+u),s=s.join("")):s=r[i].currency.symbol+u+s:s.indexOf(")")>-1?((s=s.split("")).splice(-1,0,u+r[i].currency.symbol),s=s.join("")):s=s+u+r[i].currency.symbol,s}(e,t,n):t.indexOf("%")>-1?function(e,t,n){var o,r="",i=100*e._value;return t.indexOf(" %")>-1?(r=" ",t=t.replace(" %","")):t=t.replace("%",""),(o=h(i,t,n)).indexOf(")")>-1?((o=o.split("")).splice(-1,0,r+"%"),o=o.join("")):o=o+r+"%",o}(e,t,n):t.indexOf(":")>-1?function(e){var t=Math.floor(e._value/60/60),n=Math.floor((e._value-60*t*60)/60),o=Math.round(e._value-60*t*60-60*n);return t+":"+(n<10?"0"+n:n)+":"+(o<10?"0"+o:o)}(e):h(e._value,t,n)}(this,e||a,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:function(e,t){var n,o,a,l,c,u=t,h=["KB","MB","GB","TB","PB","EB","ZB","YB"],d=!1;if(t.indexOf(":")>-1)e._value=function(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}(t);else if(t===s)e._value=0;else{for("."!==r[i].delimiters.decimal&&(t=t.replace(/\./g,"").replace(r[i].delimiters.decimal,".")),n=new RegExp("[^a-zA-Z]"+r[i].abbreviations.thousand+"(?:\\)|(\\"+r[i].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+r[i].abbreviations.million+"(?:\\)|(\\"+r[i].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+r[i].abbreviations.billion+"(?:\\)|(\\"+r[i].currency.symbol+")?(?:\\))?)?$"),l=new RegExp("[^a-zA-Z]"+r[i].abbreviations.trillion+"(?:\\)|(\\"+r[i].currency.symbol+")?(?:\\))?)?$"),c=0;c<=h.length&&!(d=t.indexOf(h[c])>-1&&Math.pow(1024,c+1));c++);e._value=(d||1)*(u.match(n)?Math.pow(10,3):1)*(u.match(o)?Math.pow(10,6):1)*(u.match(a)?Math.pow(10,9):1)*(u.match(l)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=d?Math.ceil(e._value):e._value}return e._value}(this,e||a)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){var t=f.call(null,this._value,e);return this._value=[this._value,e].reduce((function(e,n,o,r){return e+t*n}),0)/t,this},subtract:function(e){var t=f.call(null,this._value,e);return this._value=[e].reduce((function(e,n,o,r){return e-t*n}),this._value*t)/t,this},multiply:function(e){return this._value=[this._value,e].reduce((function(e,t,n,o){var r=f(e,t);return e*r*(t*r)/(r*r)}),1),this},divide:function(e){return this._value=[this._value,e].reduce((function(e,t,n,o){var r=f(e,t);return e*r/(t*r)})),this},difference:function(e){return Math.abs(n(this._value).subtract(e).value())}},l&&(e.exports=n),"undefined"==typeof ender&&(this.numeral=n),void 0===(o=function(){return n}.apply(t,[]))||(e.exports=o)}.call(this)},36761:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(o)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(r[s]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);o&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},75068:e=>{"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},95081:function(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(o,r){"use strict";var i=[],s=Object.getPrototypeOf,a=i.slice,l=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},c=i.push,u=i.indexOf,h={},d=h.toString,f=h.hasOwnProperty,p=f.toString,g=p.call(Object),m={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},v=function(e){return null!=e&&e===e.window},b=o.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function C(e,t,n){var o,r,i=(n=n||b).createElement("script");if(i.text=e,t)for(o in w)(r=t[o]||t.getAttribute&&t.getAttribute(o))&&i.setAttribute(o,r);n.head.appendChild(i).parentNode.removeChild(i)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[d.call(e)]||"object":typeof e}var S="3.5.1",T=function(e,t){return new T.fn.init(e,t)};function E(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!y(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}T.fn=T.prototype={jquery:S,constructor:T,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=T.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return T.each(this,e)},map:function(e){return this.pushStack(T.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(T.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:i.sort,splice:i.splice},T.extend=T.fn.extend=function(){var e,t,n,o,r,i,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||y(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)o=e[t],"__proto__"!==t&&s!==o&&(c&&o&&(T.isPlainObject(o)||(r=Array.isArray(o)))?(n=s[t],i=r&&!Array.isArray(n)?[]:r||T.isPlainObject(n)?n:{},r=!1,s[t]=T.extend(c,i,o)):void 0!==o&&(s[t]=o));return s},T.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e)||(t=s(e))&&("function"!=typeof(n=f.call(t,"constructor")&&t.constructor)||p.call(n)!==g))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){C(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,o=0;if(E(e))for(n=e.length;o<n&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(E(Object(e))?T.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,o=0,r=e.length;o<n;o++)e[r++]=t[o];return e.length=r,e},grep:function(e,t,n){for(var o=[],r=0,i=e.length,s=!n;r<i;r++)!t(e[r],r)!==s&&o.push(e[r]);return o},map:function(e,t,n){var o,r,i=0,s=[];if(E(e))for(o=e.length;i<o;i++)null!=(r=t(e[i],i,n))&&s.push(r);else for(i in e)null!=(r=t(e[i],i,n))&&s.push(r);return l(s)},guid:1,support:m}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=i[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var A=function(e){var t,n,o,r,i,s,a,l,c,u,h,d,f,p,g,m,y,v,b,w="sizzle"+1*new Date,C=e.document,x=0,S=0,T=le(),E=le(),A=le(),k=le(),R=function(e,t){return e===t&&(h=!0),0},O={}.hasOwnProperty,D=[],_=D.pop,P=D.push,I=D.push,H=D.slice,N=function(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\[[\\x20\\t\\r\\n\\f]*("+j+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+L+"*\\]",F=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",W=new RegExp(L+"+","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),z=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),V=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),q=new RegExp(L+"|>"),G=new RegExp(F),K=new RegExp("^"+j+"$"),X={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Q=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},oe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){d()},se=we((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{I.apply(D=H.call(C.childNodes),C.childNodes),D[C.childNodes.length].nodeType}catch(e){I={apply:D.length?function(e,t){P.apply(e,H.call(t))}:function(e,t){for(var n=e.length,o=0;e[n++]=t[o++];);e.length=n-1}}}function ae(e,t,o,r){var i,a,c,u,h,p,y,v=t&&t.ownerDocument,C=t?t.nodeType:9;if(o=o||[],"string"!=typeof e||!e||1!==C&&9!==C&&11!==C)return o;if(!r&&(d(t),t=t||f,g)){if(11!==C&&(h=Z.exec(e)))if(i=h[1]){if(9===C){if(!(c=t.getElementById(i)))return o;if(c.id===i)return o.push(c),o}else if(v&&(c=v.getElementById(i))&&b(t,c)&&c.id===i)return o.push(c),o}else{if(h[2])return I.apply(o,t.getElementsByTagName(e)),o;if((i=h[3])&&n.getElementsByClassName&&t.getElementsByClassName)return I.apply(o,t.getElementsByClassName(i)),o}if(n.qsa&&!k[e+" "]&&(!m||!m.test(e))&&(1!==C||"object"!==t.nodeName.toLowerCase())){if(y=e,v=t,1===C&&(q.test(e)||V.test(e))){for((v=ee.test(e)&&ye(t.parentNode)||t)===t&&n.scope||((u=t.getAttribute("id"))?u=u.replace(oe,re):t.setAttribute("id",u=w)),a=(p=s(e)).length;a--;)p[a]=(u?"#"+u:":scope")+" "+be(p[a]);y=p.join(",")}try{return I.apply(o,v.querySelectorAll(y)),o}catch(t){k(e,!0)}finally{u===w&&t.removeAttribute("id")}}}return l(e.replace(U,"$1"),t,o,r)}function le(){var e=[];return function t(n,r){return e.push(n+" ")>o.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function ce(e){return e[w]=!0,e}function ue(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var n=e.split("|"),r=n.length;r--;)o.attrHandle[n[r]]=t}function de(e,t){var n=t&&e,o=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(o)return o;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ce((function(t){return t=+t,ce((function(n,o){for(var r,i=e([],n.length,t),s=i.length;s--;)n[r=i[s]]&&(n[r]=!(o[r]=n[r]))}))}))}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},i=ae.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Q.test(t||n&&n.nodeName||"HTML")},d=ae.setDocument=function(e){var t,r,s=e?e.ownerDocument||e:C;return s!=f&&9===s.nodeType&&s.documentElement?(p=(f=s).documentElement,g=!i(f),C!=f&&(r=f.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ie,!1):r.attachEvent&&r.attachEvent("onunload",ie)),n.scope=ue((function(e){return p.appendChild(e).appendChild(f.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ue((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(f.getElementsByClassName),n.getById=ue((function(e){return p.appendChild(e).id=w,!f.getElementsByName||!f.getElementsByName(w).length})),n.getById?(o.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},o.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(o.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},o.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,o,r,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(r=t.getElementsByName(e),o=0;i=r[o++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),o.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,o=[],r=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[r++];)1===n.nodeType&&o.push(n);return o}return i},o.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},y=[],m=[],(n.qsa=J.test(f.querySelectorAll))&&(ue((function(e){var t;p.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+M+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),(t=f.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=J.test(v=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ue((function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),y.push("!=",F)})),m=m.length&&new RegExp(m.join("|")),y=y.length&&new RegExp(y.join("|")),t=J.test(p.compareDocumentPosition),b=t||J.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,o=t&&t.parentNode;return e===o||!(!o||1!==o.nodeType||!(n.contains?n.contains(o):e.compareDocumentPosition&&16&e.compareDocumentPosition(o)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},R=t?function(e,t){if(e===t)return h=!0,0;var o=!e.compareDocumentPosition-!t.compareDocumentPosition;return o||(1&(o=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===o?e==f||e.ownerDocument==C&&b(C,e)?-1:t==f||t.ownerDocument==C&&b(C,t)?1:u?N(u,e)-N(u,t):0:4&o?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,o=0,r=e.parentNode,i=t.parentNode,s=[e],a=[t];if(!r||!i)return e==f?-1:t==f?1:r?-1:i?1:u?N(u,e)-N(u,t):0;if(r===i)return de(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[o]===a[o];)o++;return o?de(s[o],a[o]):s[o]==C?-1:a[o]==C?1:0},f):f},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(d(e),n.matchesSelector&&g&&!k[t+" "]&&(!y||!y.test(t))&&(!m||!m.test(t)))try{var o=v.call(e,t);if(o||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return o}catch(e){k(t,!0)}return ae(t,f,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=f&&d(e),b(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=f&&d(e);var r=o.attrHandle[t.toLowerCase()],i=r&&O.call(o.attrHandle,t.toLowerCase())?r(e,t,!g):void 0;return void 0!==i?i:n.attributes||!g?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},ae.escape=function(e){return(e+"").replace(oe,re)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,o=[],r=0,i=0;if(h=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(R),h){for(;t=e[i++];)t===e[i]&&(r=o.push(i));for(;r--;)e.splice(o[r],1)}return u=null,e},r=ae.getText=function(e){var t,n="",o=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[o++];)n+=r(t);return n},(o=ae.selectors={cacheLength:50,createPseudo:ce,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+L+"|$)"))&&T(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(o){var r=ae.attr(o,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(W," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,o,r){var i="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===o&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,h,d,f,p,g=i!==s?"nextSibling":"previousSibling",m=t.parentNode,y=a&&t.nodeName.toLowerCase(),v=!l&&!a,b=!1;if(m){if(i){for(;g;){for(d=t;d=d[g];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?m.firstChild:m.lastChild],s&&v){for(b=(f=(c=(u=(h=(d=m)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===x&&c[1])&&c[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===t){u[e]=[x,f,b];break}}else if(v&&(b=f=(c=(u=(h=(d=t)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===x&&c[1]),!1===b)for(;(d=++f&&d&&d[g]||(b=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++b||(v&&((u=(h=d[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]=[x,b]),d!==t)););return(b-=r)===o||b%o==0&&b/o>=0}}},PSEUDO:function(e,t){var n,r=o.pseudos[e]||o.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],o.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var o,i=r(e,t),s=i.length;s--;)e[o=N(e,i[s])]=!(n[o]=i[s])})):function(e){return r(e,0,n)}):r}},pseudos:{not:ce((function(e){var t=[],n=[],o=a(e.replace(U,"$1"));return o[w]?ce((function(e,t,n,r){for(var i,s=o(e,null,r,[]),a=e.length;a--;)(i=s[a])&&(e[a]=!(t[a]=i))})):function(e,r,i){return t[0]=e,o(t,null,i,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return ae(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||r(t)).indexOf(e)>-1}})),lang:ce((function(e){return K.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!o.pseudos.empty(e)},header:function(e){return $.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,n){return[n<0?n+t:n]})),even:me((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:me((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:me((function(e,t,n){for(var o=n<0?n+t:n>t?t:n;--o>=0;)e.push(o);return e})),gt:me((function(e,t,n){for(var o=n<0?n+t:n;++o<t;)e.push(o);return e}))}}).pseudos.nth=o.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})o.pseudos[t]=pe(t);function ve(){}function be(e){for(var t=0,n=e.length,o="";t<n;t++)o+=e[t].value;return o}function we(e,t,n){var o=t.dir,r=t.next,i=r||o,s=n&&"parentNode"===i,a=S++;return t.first?function(t,n,r){for(;t=t[o];)if(1===t.nodeType||s)return e(t,n,r);return!1}:function(t,n,l){var c,u,h,d=[x,a];if(l){for(;t=t[o];)if((1===t.nodeType||s)&&e(t,n,l))return!0}else for(;t=t[o];)if(1===t.nodeType||s)if(u=(h=t[w]||(t[w]={}))[t.uniqueID]||(h[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[o]||t;else{if((c=u[i])&&c[0]===x&&c[1]===a)return d[2]=c[2];if(u[i]=d,d[2]=e(t,n,l))return!0}return!1}}function Ce(e){return e.length>1?function(t,n,o){for(var r=e.length;r--;)if(!e[r](t,n,o))return!1;return!0}:e[0]}function xe(e,t,n,o,r){for(var i,s=[],a=0,l=e.length,c=null!=t;a<l;a++)(i=e[a])&&(n&&!n(i,o,r)||(s.push(i),c&&t.push(a)));return s}function Se(e,t,n,o,r,i){return o&&!o[w]&&(o=Se(o)),r&&!r[w]&&(r=Se(r,i)),ce((function(i,s,a,l){var c,u,h,d=[],f=[],p=s.length,g=i||function(e,t,n){for(var o=0,r=t.length;o<r;o++)ae(e,t[o],n);return n}(t||"*",a.nodeType?[a]:a,[]),m=!e||!i&&t?g:xe(g,d,e,a,l),y=n?r||(i?e:p||o)?[]:s:m;if(n&&n(m,y,a,l),o)for(c=xe(y,f),o(c,[],a,l),u=c.length;u--;)(h=c[u])&&(y[f[u]]=!(m[f[u]]=h));if(i){if(r||e){if(r){for(c=[],u=y.length;u--;)(h=y[u])&&c.push(m[u]=h);r(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=r?N(i,h):d[u])>-1&&(i[c]=!(s[c]=h))}}else y=xe(y===s?y.splice(p,y.length):y),r?r(null,s,y,l):I.apply(s,y)}))}function Te(e){for(var t,n,r,i=e.length,s=o.relative[e[0].type],a=s||o.relative[" "],l=s?1:0,u=we((function(e){return e===t}),a,!0),h=we((function(e){return N(t,e)>-1}),a,!0),d=[function(e,n,o){var r=!s&&(o||n!==c)||((t=n).nodeType?u(e,n,o):h(e,n,o));return t=null,r}];l<i;l++)if(n=o.relative[e[l].type])d=[we(Ce(d),n)];else{if((n=o.filter[e[l].type].apply(null,e[l].matches))[w]){for(r=++l;r<i&&!o.relative[e[r].type];r++);return Se(l>1&&Ce(d),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(U,"$1"),n,l<r&&Te(e.slice(l,r)),r<i&&Te(e=e.slice(r)),r<i&&be(e))}d.push(n)}return Ce(d)}return ve.prototype=o.filters=o.pseudos,o.setFilters=new ve,s=ae.tokenize=function(e,t){var n,r,i,s,a,l,c,u=E[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=o.preFilter;a;){for(s in n&&!(r=z.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(i=[])),n=!1,(r=V.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(U," ")}),a=a.slice(n.length)),o.filter)!(r=X[s].exec(a))||c[s]&&!(r=c[s](r))||(n=r.shift(),i.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ae.error(e):E(e,l).slice(0)},a=ae.compile=function(e,t){var n,r=[],i=[],a=A[e+" "];if(!a){for(t||(t=s(e)),n=t.length;n--;)(a=Te(t[n]))[w]?r.push(a):i.push(a);(a=A(e,function(e,t){var n=t.length>0,r=e.length>0,i=function(i,s,a,l,u){var h,p,m,y=0,v="0",b=i&&[],w=[],C=c,S=i||r&&o.find.TAG("*",u),T=x+=null==C?1:Math.random()||.1,E=S.length;for(u&&(c=s==f||s||u);v!==E&&null!=(h=S[v]);v++){if(r&&h){for(p=0,s||h.ownerDocument==f||(d(h),a=!g);m=e[p++];)if(m(h,s||f,a)){l.push(h);break}u&&(x=T)}n&&((h=!m&&h)&&y--,i&&b.push(h))}if(y+=v,n&&v!==y){for(p=0;m=t[p++];)m(b,w,s,a);if(i){if(y>0)for(;v--;)b[v]||w[v]||(w[v]=_.call(l));w=xe(w)}I.apply(l,w),u&&!i&&w.length>0&&y+t.length>1&&ae.uniqueSort(l)}return u&&(x=T,c=C),b};return n?ce(i):i}(i,r))).selector=e}return a},l=ae.select=function(e,t,n,r){var i,l,c,u,h,d="function"==typeof e&&e,f=!r&&s(e=d.selector||e);if(n=n||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&g&&o.relative[l[1].type]){if(!(t=(o.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(i=X.needsContext.test(e)?0:l.length;i--&&(c=l[i],!o.relative[u=c.type]);)if((h=o.find[u])&&(r=h(c.matches[0].replace(te,ne),ee.test(l[0].type)&&ye(t.parentNode)||t))){if(l.splice(i,1),!(e=r.length&&be(l)))return I.apply(n,r),n;break}}return(d||a(e,f))(r,t,!g,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},n.sortStable=w.split("").sort(R).join("")===w,n.detectDuplicates=!!h,d(),n.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||he("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||he("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||he(M,(function(e,t,n){var o;if(!n)return!0===e[t]?t.toLowerCase():(o=e.getAttributeNode(t))&&o.specified?o.value:null})),ae}(o);T.find=A,T.expr=A.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=A.uniqueSort,T.text=A.getText,T.isXMLDoc=A.isXML,T.contains=A.contains,T.escapeSelector=A.escape;var k=function(e,t,n){for(var o=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&T(e).is(n))break;o.push(e)}return o},R=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},O=T.expr.match.needsContext;function D(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var _=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(e,t,n){return y(t)?T.grep(e,(function(e,o){return!!t.call(e,o,e)!==n})):t.nodeType?T.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?T.grep(e,(function(e){return u.call(t,e)>-1!==n})):T.filter(t,e,n)}T.filter=function(e,t,n){var o=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===o.nodeType?T.find.matchesSelector(o,e)?[o]:[]:T.find.matches(e,T.grep(t,(function(e){return 1===e.nodeType})))},T.fn.extend({find:function(e){var t,n,o=this.length,r=this;if("string"!=typeof e)return this.pushStack(T(e).filter((function(){for(t=0;t<o;t++)if(T.contains(r[t],this))return!0})));for(n=this.pushStack([]),t=0;t<o;t++)T.find(e,r[t],n);return o>1?T.uniqueSort(n):n},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"==typeof e&&O.test(e)?T(e):e||[],!1).length}});var I,H=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(e,t,n){var o,r;if(!e)return this;if(n=n||I,"string"==typeof e){if(!(o="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:H.exec(e))||!o[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(o[1]){if(t=t instanceof T?t[0]:t,T.merge(this,T.parseHTML(o[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),_.test(o[1])&&T.isPlainObject(t))for(o in t)y(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}return(r=b.getElementById(o[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(T):T.makeArray(e,this)}).prototype=T.fn,I=T(b);var N=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}T.fn.extend({has:function(e){var t=T(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(T.contains(this,t[e]))return!0}))},closest:function(e,t){var n,o=0,r=this.length,i=[],s="string"!=typeof e&&T(e);if(!O.test(e))for(;o<r;o++)for(n=this[o];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&T.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?T.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?u.call(T(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),T.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return R((e.parentNode||{}).firstChild,e)},children:function(e){return R(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(D(e,"template")&&(e=e.content||e),T.merge([],e.childNodes))}},(function(e,t){T.fn[e]=function(n,o){var r=T.map(this,t,n);return"Until"!==e.slice(-5)&&(o=n),o&&"string"==typeof o&&(r=T.filter(o,r)),this.length>1&&(M[e]||T.uniqueSort(r),N.test(e)&&r.reverse()),this.pushStack(r)}}));var j=/[^\x20\t\r\n\f]+/g;function B(e){return e}function F(e){throw e}function W(e,t,n,o){var r;try{e&&y(r=e.promise)?r.call(e).done(t).fail(n):e&&y(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(o))}catch(e){n.apply(void 0,[e])}}T.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return T.each(e.match(j)||[],(function(e,n){t[n]=!0})),t}(e):T.extend({},e);var t,n,o,r,i=[],s=[],a=-1,l=function(){for(r=r||e.once,o=t=!0;s.length;a=-1)for(n=s.shift();++a<i.length;)!1===i[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=i.length,n=!1);e.memory||(n=!1),t=!1,r&&(i=n?[]:"")},c={add:function(){return i&&(n&&!t&&(a=i.length-1,s.push(n)),function t(n){T.each(n,(function(n,o){y(o)?e.unique&&c.has(o)||i.push(o):o&&o.length&&"string"!==x(o)&&t(o)}))}(arguments),n&&!t&&l()),this},remove:function(){return T.each(arguments,(function(e,t){for(var n;(n=T.inArray(t,i,n))>-1;)i.splice(n,1),n<=a&&a--})),this},has:function(e){return e?T.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return r=s=[],i=n="",this},disabled:function(){return!i},lock:function(){return r=s=[],n||t||(i=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!o}};return c},T.extend({Deferred:function(e){var t=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return T.Deferred((function(n){T.each(t,(function(t,o){var r=y(e[o[4]])&&e[o[4]];i[o[1]]((function(){var e=r&&r.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this,r?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,r){var i=0;function s(e,t,n,r){return function(){var a=this,l=arguments,c=function(){var o,c;if(!(e<i)){if((o=n.apply(a,l))===t.promise())throw new TypeError("Thenable self-resolution");c=o&&("object"==typeof o||"function"==typeof o)&&o.then,y(c)?r?c.call(o,s(i,t,B,r),s(i,t,F,r)):(i++,c.call(o,s(i,t,B,r),s(i,t,F,r),s(i,t,B,t.notifyWith))):(n!==B&&(a=void 0,l=[o]),(r||t.resolveWith)(a,l))}},u=r?c:function(){try{c()}catch(o){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(o,u.stackTrace),e+1>=i&&(n!==F&&(a=void 0,l=[o]),t.rejectWith(a,l))}};e?u():(T.Deferred.getStackHook&&(u.stackTrace=T.Deferred.getStackHook()),o.setTimeout(u))}}return T.Deferred((function(o){t[0][3].add(s(0,o,y(r)?r:B,o.notifyWith)),t[1][3].add(s(0,o,y(e)?e:B)),t[2][3].add(s(0,o,y(n)?n:F))})).promise()},promise:function(e){return null!=e?T.extend(e,r):r}},i={};return T.each(t,(function(e,o){var s=o[2],a=o[5];r[o[1]]=s.add,a&&s.add((function(){n=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(o[3].fire),i[o[0]]=function(){return i[o[0]+"With"](this===i?void 0:this,arguments),this},i[o[0]+"With"]=s.fireWith})),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,n=t,o=Array(n),r=a.call(arguments),i=T.Deferred(),s=function(e){return function(n){o[e]=this,r[e]=arguments.length>1?a.call(arguments):n,--t||i.resolveWith(o,r)}};if(t<=1&&(W(e,i.done(s(n)).resolve,i.reject,!t),"pending"===i.state()||y(r[n]&&r[n].then)))return i.then();for(;n--;)W(r[n],s(n),i.reject);return i.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(e,t){o.console&&o.console.warn&&e&&U.test(e.name)&&o.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},T.readyException=function(e){o.setTimeout((function(){throw e}))};var z=T.Deferred();function V(){b.removeEventListener("DOMContentLoaded",V),o.removeEventListener("load",V),T.ready()}T.fn.ready=function(e){return z.then(e).catch((function(e){T.readyException(e)})),this},T.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==e&&--T.readyWait>0||z.resolveWith(b,[T]))}}),T.ready.then=z.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?o.setTimeout(T.ready):(b.addEventListener("DOMContentLoaded",V),o.addEventListener("load",V));var q=function(e,t,n,o,r,i,s){var a=0,l=e.length,c=null==n;if("object"===x(n))for(a in r=!0,n)q(e,t,a,n[a],!0,i,s);else if(void 0!==o&&(r=!0,y(o)||(s=!0),c&&(s?(t.call(e,o),t=null):(c=t,t=function(e,t,n){return c.call(T(e),n)})),t))for(;a<l;a++)t(e[a],n,s?o:o.call(e[a],a,t(e[a],n)));return r?e:c?t.call(e):l?t(e[0],n):i},G=/^-ms-/,K=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function Q(e){return e.replace(G,"ms-").replace(K,X)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function $(){this.expando=T.expando+$.uid++}$.uid=1,$.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var o,r=this.cache(e);if("string"==typeof t)r[Q(t)]=n;else for(o in t)r[Q(o)]=t[o];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Q(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,o=e[this.expando];if(void 0!==o){if(void 0!==t){n=(t=Array.isArray(t)?t.map(Q):(t=Q(t))in o?[t]:t.match(j)||[]).length;for(;n--;)delete o[t[n]]}(void 0===t||T.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!T.isEmptyObject(t)}};var J=new $,Z=new $,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var o;if(void 0===n&&1===e.nodeType)if(o="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(o))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}T.extend({hasData:function(e){return Z.hasData(e)||J.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),T.fn.extend({data:function(e,t){var n,o,r,i=this[0],s=i&&i.attributes;if(void 0===e){if(this.length&&(r=Z.get(i),1===i.nodeType&&!J.get(i,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(o=s[n].name).indexOf("data-")&&(o=Q(o.slice(5)),ne(i,o,r[o]));J.set(i,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each((function(){Z.set(this,e)})):q(this,(function(t){var n;if(i&&void 0===t)return void 0!==(n=Z.get(i,e))||void 0!==(n=ne(i,e))?n:void 0;this.each((function(){Z.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Z.remove(this,e)}))}}),T.extend({queue:function(e,t,n){var o;if(e)return t=(t||"fx")+"queue",o=J.get(e,t),n&&(!o||Array.isArray(n)?o=J.access(e,t,T.makeArray(n)):o.push(n)),o||[]},dequeue:function(e,t){t=t||"fx";var n=T.queue(e,t),o=n.length,r=n.shift(),i=T._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),o--),r&&("fx"===t&&n.unshift("inprogress"),delete i.stop,r.call(e,(function(){T.dequeue(e,t)}),i)),!o&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:T.Callbacks("once memory").add((function(){J.remove(e,[t+"queue",n])}))})}}),T.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?T.queue(this[0],e):void 0===t?this:this.each((function(){var n=T.queue(this,e,t);T._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&T.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){T.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,o=1,r=T.Deferred(),i=this,s=this.length,a=function(){--o||r.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=J.get(i[s],e+"queueHooks"))&&n.empty&&(o++,n.empty.add(a));return a(),r.promise(t)}});var oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+oe+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],se=b.documentElement,ae=function(e){return T.contains(e.ownerDocument,e)},le={composed:!0};se.getRootNode&&(ae=function(e){return T.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===T.css(e,"display")};function ue(e,t,n,o){var r,i,s=20,a=o?function(){return o.cur()}:function(){return T.css(e,t,"")},l=a(),c=n&&n[3]||(T.cssNumber[t]?"":"px"),u=e.nodeType&&(T.cssNumber[t]||"px"!==c&&+l)&&re.exec(T.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)T.style(e,t,u+c),(1-i)*(1-(i=a()/l||.5))<=0&&(s=0),u/=i;u*=2,T.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],o&&(o.unit=c,o.start=u,o.end=r)),r}var he={};function de(e){var t,n=e.ownerDocument,o=e.nodeName,r=he[o];return r||(t=n.body.appendChild(n.createElement(o)),r=T.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),he[o]=r,r)}function fe(e,t){for(var n,o,r=[],i=0,s=e.length;i<s;i++)(o=e[i]).style&&(n=o.style.display,t?("none"===n&&(r[i]=J.get(o,"display")||null,r[i]||(o.style.display="")),""===o.style.display&&ce(o)&&(r[i]=de(o))):"none"!==n&&(r[i]="none",J.set(o,"display",n)));for(i=0;i<s;i++)null!=r[i]&&(e[i].style.display=r[i]);return e}T.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ce(this)?T(this).show():T(this).hide()}))}});var pe,ge,me=/^(?:checkbox|radio)$/i,ye=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ve=/^$|^module$|\/(?:java|ecma)script/i;pe=b.createDocumentFragment().appendChild(b.createElement("div")),(ge=b.createElement("input")).setAttribute("type","radio"),ge.setAttribute("checked","checked"),ge.setAttribute("name","t"),pe.appendChild(ge),m.checkClone=pe.cloneNode(!0).cloneNode(!0).lastChild.checked,pe.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!pe.cloneNode(!0).lastChild.defaultValue,pe.innerHTML="<option></option>",m.option=!!pe.lastChild;var be={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function we(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&D(e,t)?T.merge([e],n):n}function Ce(e,t){for(var n=0,o=e.length;n<o;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}be.tbody=be.tfoot=be.colgroup=be.caption=be.thead,be.th=be.td,m.option||(be.optgroup=be.option=[1,"<select multiple='multiple'>","</select>"]);var xe=/<|&#?\w+;/;function Se(e,t,n,o,r){for(var i,s,a,l,c,u,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((i=e[f])||0===i)if("object"===x(i))T.merge(d,i.nodeType?[i]:i);else if(xe.test(i)){for(s=s||h.appendChild(t.createElement("div")),a=(ye.exec(i)||["",""])[1].toLowerCase(),l=be[a]||be._default,s.innerHTML=l[1]+T.htmlPrefilter(i)+l[2],u=l[0];u--;)s=s.lastChild;T.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(t.createTextNode(i));for(h.textContent="",f=0;i=d[f++];)if(o&&T.inArray(i,o)>-1)r&&r.push(i);else if(c=ae(i),s=we(h.appendChild(i),"script"),c&&Ce(s),n)for(u=0;i=s[u++];)ve.test(i.type||"")&&n.push(i);return h}var Te=/^key/,Ee=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ae=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Re(){return!1}function Oe(e,t){return e===function(){try{return b.activeElement}catch(e){}}()==("focus"===t)}function De(e,t,n,o,r,i){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(o=o||n,n=void 0),t)De(e,a,n,o,t[a],i);return e}if(null==o&&null==r?(r=n,o=n=void 0):null==r&&("string"==typeof n?(r=o,o=void 0):(r=o,o=n,n=void 0)),!1===r)r=Re;else if(!r)return e;return 1===i&&(s=r,(r=function(e){return T().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=T.guid++)),e.each((function(){T.event.add(this,t,r,o,n)}))}function _e(e,t,n){n?(J.set(e,t,!1),T.event.add(e,t,{namespace:!1,handler:function(e){var o,r,i=J.get(this,t);if(1&e.isTrigger&&this[t]){if(i.length)(T.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=a.call(arguments),J.set(this,t,i),o=n(this,t),this[t](),i!==(r=J.get(this,t))||o?J.set(this,t,!1):r={},i!==r)return e.stopImmediatePropagation(),e.preventDefault(),r.value}else i.length&&(J.set(this,t,{value:T.event.trigger(T.extend(i[0],T.Event.prototype),i.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===J.get(e,t)&&T.event.add(e,t,ke)}T.event={global:{},add:function(e,t,n,o,r){var i,s,a,l,c,u,h,d,f,p,g,m=J.get(e);if(Y(e))for(n.handler&&(n=(i=n).handler,r=i.selector),r&&T.find.matchesSelector(se,r),n.guid||(n.guid=T.guid++),(l=m.events)||(l=m.events=Object.create(null)),(s=m.handle)||(s=m.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(j)||[""]).length;c--;)f=g=(a=Ae.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=T.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=T.event.special[f]||{},u=T.extend({type:f,origType:g,data:o,handler:n,guid:n.guid,selector:r,needsContext:r&&T.expr.match.needsContext.test(r),namespace:p.join(".")},i),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,o,p,s)||e.addEventListener&&e.addEventListener(f,s)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),T.event.global[f]=!0)},remove:function(e,t,n,o,r){var i,s,a,l,c,u,h,d,f,p,g,m=J.hasData(e)&&J.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(j)||[""]).length;c--;)if(f=g=(a=Ae.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=T.event.special[f]||{},d=l[f=(o?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=i=d.length;i--;)u=d[i],!r&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||o&&o!==u.selector&&("**"!==o||!u.selector)||(d.splice(i,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,m.handle)||T.removeEvent(e,f,m.handle),delete l[f])}else for(f in l)T.event.remove(e,f+t[c],n,o,!0);T.isEmptyObject(l)&&J.remove(e,"handle events")}},dispatch:function(e){var t,n,o,r,i,s,a=new Array(arguments.length),l=T.event.fix(e),c=(J.get(this,"events")||Object.create(null))[l.type]||[],u=T.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(s=T.event.handlers.call(this,l,c),t=0;(r=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(i=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==i.namespace&&!l.rnamespace.test(i.namespace)||(l.handleObj=i,l.data=i.data,void 0!==(o=((T.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,a))&&!1===(l.result=o)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,o,r,i,s,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(i=[],s={},n=0;n<l;n++)void 0===s[r=(o=t[n]).selector+" "]&&(s[r]=o.needsContext?T(r,this).index(c)>-1:T.find(r,this,null,[c]).length),s[r]&&i.push(o);i.length&&a.push({elem:c,handlers:i})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[T.expando]?e:new T.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return me.test(t.type)&&t.click&&D(t,"input")&&_e(t,"click",ke),!1},trigger:function(e){var t=this||e;return me.test(t.type)&&t.click&&D(t,"input")&&_e(t,"click"),!0},_default:function(e){var t=e.target;return me.test(t.type)&&t.click&&D(t,"input")&&J.get(t,"click")||D(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},T.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},T.Event=function(e,t){if(!(this instanceof T.Event))return new T.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Re,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&T.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Re,isPropagationStopped:Re,isImmediatePropagationStopped:Re,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ee.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},(function(e,t){T.event.special[e]={setup:function(){return _e(this,e,Oe),!1},trigger:function(){return _e(this,e),!0},delegateType:t}})),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){T.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,o=this,r=e.relatedTarget,i=e.handleObj;return r&&(r===o||T.contains(o,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}})),T.fn.extend({on:function(e,t,n,o){return De(this,e,t,n,o)},one:function(e,t,n,o){return De(this,e,t,n,o,1)},off:function(e,t,n){var o,r;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,T(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Re),this.each((function(){T.event.remove(this,e,n,t)}))}});var Pe=/<script|<style|<link/i,Ie=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return D(e,"table")&&D(11!==t.nodeType?t:t.firstChild,"tr")&&T(e).children("tbody")[0]||e}function Me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Le(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function je(e,t){var n,o,r,i,s,a;if(1===t.nodeType){if(J.hasData(e)&&(a=J.get(e).events))for(r in J.remove(t,"handle events"),a)for(n=0,o=a[r].length;n<o;n++)T.event.add(t,r,a[r][n]);Z.hasData(e)&&(i=Z.access(e),s=T.extend({},i),Z.set(t,s))}}function Be(e,t){var n=t.nodeName.toLowerCase();"input"===n&&me.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Fe(e,t,n,o){t=l(t);var r,i,s,a,c,u,h=0,d=e.length,f=d-1,p=t[0],g=y(p);if(g||d>1&&"string"==typeof p&&!m.checkClone&&Ie.test(p))return e.each((function(r){var i=e.eq(r);g&&(t[0]=p.call(this,r,i.html())),Fe(i,t,n,o)}));if(d&&(i=(r=Se(t,e[0].ownerDocument,!1,e,o)).firstChild,1===r.childNodes.length&&(r=i),i||o)){for(a=(s=T.map(we(r,"script"),Me)).length;h<d;h++)c=r,h!==f&&(c=T.clone(c,!0,!0),a&&T.merge(s,we(c,"script"))),n.call(e[h],c,h);if(a)for(u=s[s.length-1].ownerDocument,T.map(s,Le),h=0;h<a;h++)c=s[h],ve.test(c.type||"")&&!J.access(c,"globalEval")&&T.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?T._evalUrl&&!c.noModule&&T._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):C(c.textContent.replace(He,""),c,u))}return e}function We(e,t,n){for(var o,r=t?T.filter(t,e):e,i=0;null!=(o=r[i]);i++)n||1!==o.nodeType||T.cleanData(we(o)),o.parentNode&&(n&&ae(o)&&Ce(we(o,"script")),o.parentNode.removeChild(o));return e}T.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var o,r,i,s,a=e.cloneNode(!0),l=ae(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||T.isXMLDoc(e)))for(s=we(a),o=0,r=(i=we(e)).length;o<r;o++)Be(i[o],s[o]);if(t)if(n)for(i=i||we(e),s=s||we(a),o=0,r=i.length;o<r;o++)je(i[o],s[o]);else je(e,a);return(s=we(a,"script")).length>0&&Ce(s,!l&&we(e,"script")),a},cleanData:function(e){for(var t,n,o,r=T.event.special,i=0;void 0!==(n=e[i]);i++)if(Y(n)){if(t=n[J.expando]){if(t.events)for(o in t.events)r[o]?T.event.remove(n,o):T.removeEvent(n,o,t.handle);n[J.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),T.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return q(this,(function(e){return void 0===e?T.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Fe(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)}))},prepend:function(){return Fe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Fe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Fe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(T.cleanData(we(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return T.clone(this,e,t)}))},html:function(e){return q(this,(function(e){var t=this[0]||{},n=0,o=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Pe.test(e)&&!be[(ye.exec(e)||["",""])[1].toLowerCase()]){e=T.htmlPrefilter(e);try{for(;n<o;n++)1===(t=this[n]||{}).nodeType&&(T.cleanData(we(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Fe(this,arguments,(function(t){var n=this.parentNode;T.inArray(this,e)<0&&(T.cleanData(we(this)),n&&n.replaceChild(t,this))}),e)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){T.fn[e]=function(e){for(var n,o=[],r=T(e),i=r.length-1,s=0;s<=i;s++)n=s===i?this:this.clone(!0),T(r[s])[t](n),c.apply(o,n.get());return this.pushStack(o)}}));var Ue=new RegExp("^("+oe+")(?!px)[a-z%]+$","i"),ze=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=o),t.getComputedStyle(e)},Ve=function(e,t,n){var o,r,i={};for(r in t)i[r]=e.style[r],e.style[r]=t[r];for(r in o=n.call(e),t)e.style[r]=i[r];return o},qe=new RegExp(ie.join("|"),"i");function Ge(e,t,n){var o,r,i,s,a=e.style;return(n=n||ze(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||ae(e)||(s=T.style(e,t)),!m.pixelBoxStyles()&&Ue.test(s)&&qe.test(t)&&(o=a.width,r=a.minWidth,i=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=o,a.minWidth=r,a.maxWidth=i)),void 0!==s?s+"":s}function Ke(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",se.appendChild(c).appendChild(u);var e=o.getComputedStyle(u);n="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",s=36===t(e.right),r=36===t(e.width),u.style.position="absolute",i=12===t(u.offsetWidth/3),se.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,s,a,l,c=b.createElement("div"),u=b.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,T.extend(m,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=b.createElement("table"),t=b.createElement("tr"),n=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",n.style.height="9px",se.appendChild(e).appendChild(t).appendChild(n),r=o.getComputedStyle(t),a=parseInt(r.height)>3,se.removeChild(e)),a}}))}();var Xe=["Webkit","Moz","ms"],Qe=b.createElement("div").style,Ye={};function $e(e){return T.cssProps[e]||Ye[e]||(e in Qe?e:Ye[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Xe.length;n--;)if((e=Xe[n]+t)in Qe)return e}(e)||e)}var Je=/^(none|table(?!-c[ea]).+)/,Ze=/^--/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"};function nt(e,t,n){var o=re.exec(t);return o?Math.max(0,o[2]-(n||0))+(o[3]||"px"):t}function ot(e,t,n,o,r,i){var s="width"===t?1:0,a=0,l=0;if(n===(o?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=T.css(e,n+ie[s],!0,r)),o?("content"===n&&(l-=T.css(e,"padding"+ie[s],!0,r)),"margin"!==n&&(l-=T.css(e,"border"+ie[s]+"Width",!0,r))):(l+=T.css(e,"padding"+ie[s],!0,r),"padding"!==n?l+=T.css(e,"border"+ie[s]+"Width",!0,r):a+=T.css(e,"border"+ie[s]+"Width",!0,r));return!o&&i>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-l-a-.5))||0),l}function rt(e,t,n){var o=ze(e),r=(!m.boxSizingReliable()||n)&&"border-box"===T.css(e,"boxSizing",!1,o),i=r,s=Ge(e,t,o),a="offset"+t[0].toUpperCase()+t.slice(1);if(Ue.test(s)){if(!n)return s;s="auto"}return(!m.boxSizingReliable()&&r||!m.reliableTrDimensions()&&D(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===T.css(e,"display",!1,o))&&e.getClientRects().length&&(r="border-box"===T.css(e,"boxSizing",!1,o),(i=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+ot(e,t,n||(r?"border":"content"),i,o,s)+"px"}function it(e,t,n,o,r){return new it.prototype.init(e,t,n,o,r)}T.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,i,s,a=Q(t),l=Ze.test(t),c=e.style;if(l||(t=$e(a)),s=T.cssHooks[t]||T.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(e,!1,o))?r:c[t];"string"==(i=typeof n)&&(r=re.exec(n))&&r[1]&&(n=ue(e,t,r),i="number"),null!=n&&n==n&&("number"!==i||l||(n+=r&&r[3]||(T.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,o))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,o){var r,i,s,a=Q(t);return Ze.test(t)||(t=$e(a)),(s=T.cssHooks[t]||T.cssHooks[a])&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=Ge(e,t,o)),"normal"===r&&t in tt&&(r=tt[t]),""===n||n?(i=parseFloat(r),!0===n||isFinite(i)?i||0:r):r}}),T.each(["height","width"],(function(e,t){T.cssHooks[t]={get:function(e,n,o){if(n)return!Je.test(T.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?rt(e,t,o):Ve(e,et,(function(){return rt(e,t,o)}))},set:function(e,n,o){var r,i=ze(e),s=!m.scrollboxSize()&&"absolute"===i.position,a=(s||o)&&"border-box"===T.css(e,"boxSizing",!1,i),l=o?ot(e,t,o,a,i):0;return a&&s&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-ot(e,t,"border",!1,i)-.5)),l&&(r=re.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=T.css(e,t)),nt(0,n,l)}}})),T.cssHooks.marginLeft=Ke(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),T.each({margin:"",padding:"",border:"Width"},(function(e,t){T.cssHooks[e+t]={expand:function(n){for(var o=0,r={},i="string"==typeof n?n.split(" "):[n];o<4;o++)r[e+ie[o]+t]=i[o]||i[o-2]||i[0];return r}},"margin"!==e&&(T.cssHooks[e+t].set=nt)})),T.fn.extend({css:function(e,t){return q(this,(function(e,t,n){var o,r,i={},s=0;if(Array.isArray(t)){for(o=ze(e),r=t.length;s<r;s++)i[t[s]]=T.css(e,t[s],!1,o);return i}return void 0!==n?T.style(e,t,n):T.css(e,t)}),e,t,arguments.length>1)}}),T.Tween=it,it.prototype={constructor:it,init:function(e,t,n,o,r,i){this.elem=e,this.prop=n,this.easing=r||T.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=o,this.unit=i||(T.cssNumber[n]?"":"px")},cur:function(){var e=it.propHooks[this.prop];return e&&e.get?e.get(this):it.propHooks._default.get(this)},run:function(e){var t,n=it.propHooks[this.prop];return this.options.duration?this.pos=t=T.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):it.propHooks._default.set(this),this}},it.prototype.init.prototype=it.prototype,it.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=T.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){T.fx.step[e.prop]?T.fx.step[e.prop](e):1!==e.elem.nodeType||!T.cssHooks[e.prop]&&null==e.elem.style[$e(e.prop)]?e.elem[e.prop]=e.now:T.style(e.elem,e.prop,e.now+e.unit)}}},it.propHooks.scrollTop=it.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},T.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},T.fx=it.prototype.init,T.fx.step={};var st,at,lt=/^(?:toggle|show|hide)$/,ct=/queueHooks$/;function ut(){at&&(!1===b.hidden&&o.requestAnimationFrame?o.requestAnimationFrame(ut):o.setTimeout(ut,T.fx.interval),T.fx.tick())}function ht(){return o.setTimeout((function(){st=void 0})),st=Date.now()}function dt(e,t){var n,o=0,r={height:e};for(t=t?1:0;o<4;o+=2-t)r["margin"+(n=ie[o])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function ft(e,t,n){for(var o,r=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),i=0,s=r.length;i<s;i++)if(o=r[i].call(n,t,e))return o}function pt(e,t,n){var o,r,i=0,s=pt.prefilters.length,a=T.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var t=st||ht(),n=Math.max(0,c.startTime+c.duration-t),o=1-(n/c.duration||0),i=0,s=c.tweens.length;i<s;i++)c.tweens[i].run(o);return a.notifyWith(e,[c,o,n]),o<1&&s?n:(s||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},n),originalProperties:t,originalOptions:n,startTime:st||ht(),duration:n.duration,tweens:[],createTween:function(t,n){var o=T.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(o),o},stop:function(t){var n=0,o=t?c.tweens.length:0;if(r)return this;for(r=!0;n<o;n++)c.tweens[n].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var n,o,r,i,s;for(n in e)if(r=t[o=Q(n)],i=e[n],Array.isArray(i)&&(r=i[1],i=e[n]=i[0]),n!==o&&(e[o]=i,delete e[n]),(s=T.cssHooks[o])&&"expand"in s)for(n in i=s.expand(i),delete e[o],i)n in e||(e[n]=i[n],t[n]=r);else t[o]=r}(u,c.opts.specialEasing);i<s;i++)if(o=pt.prefilters[i].call(c,e,u,c.opts))return y(o.stop)&&(T._queueHooks(c.elem,c.opts.queue).stop=o.stop.bind(o)),o;return T.map(u,ft,c),y(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),T.fx.timer(T.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}T.Animation=T.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,re.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(j);for(var n,o=0,r=e.length;o<r;o++)n=e[o],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var o,r,i,s,a,l,c,u,h="width"in t||"height"in t,d=this,f={},p=e.style,g=e.nodeType&&ce(e),m=J.get(e,"fxshow");for(o in n.queue||(null==(s=T._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,T.queue(e,"fx").length||s.empty.fire()}))}))),t)if(r=t[o],lt.test(r)){if(delete t[o],i=i||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[o])continue;g=!0}f[o]=m&&m[o]||T.style(e,o)}if((l=!T.isEmptyObject(t))||!T.isEmptyObject(f))for(o in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=J.get(e,"display")),"none"===(u=T.css(e,"display"))&&(c?u=c:(fe([e],!0),c=e.style.display||c,u=T.css(e,"display"),fe([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===T.css(e,"float")&&(l||(d.done((function(){p.display=c})),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),l=!1,f)l||(m?"hidden"in m&&(g=m.hidden):m=J.access(e,"fxshow",{display:c}),i&&(m.hidden=!g),g&&fe([e],!0),d.done((function(){for(o in g||fe([e]),J.remove(e,"fxshow"),f)T.style(e,o,f[o])}))),l=ft(g?m[o]:0,o,d),o in m||(m[o]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),T.speed=function(e,t,n){var o=e&&"object"==typeof e?T.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return T.fx.off?o.duration=0:"number"!=typeof o.duration&&(o.duration in T.fx.speeds?o.duration=T.fx.speeds[o.duration]:o.duration=T.fx.speeds._default),null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){y(o.old)&&o.old.call(this),o.queue&&T.dequeue(this,o.queue)},o},T.fn.extend({fadeTo:function(e,t,n,o){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,n,o)},animate:function(e,t,n,o){var r=T.isEmptyObject(e),i=T.speed(t,n,o),s=function(){var t=pt(this,T.extend({},e),i);(r||J.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||!1===i.queue?this.each(s):this.queue(i.queue,s)},stop:function(e,t,n){var o=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,r=null!=e&&e+"queueHooks",i=T.timers,s=J.get(this);if(r)s[r]&&s[r].stop&&o(s[r]);else for(r in s)s[r]&&s[r].stop&&ct.test(r)&&o(s[r]);for(r=i.length;r--;)i[r].elem!==this||null!=e&&i[r].queue!==e||(i[r].anim.stop(n),t=!1,i.splice(r,1));!t&&n||T.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=J.get(this),o=n[e+"queue"],r=n[e+"queueHooks"],i=T.timers,s=o?o.length:0;for(n.finish=!0,T.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<s;t++)o[t]&&o[t].finish&&o[t].finish.call(this);delete n.finish}))}}),T.each(["toggle","show","hide"],(function(e,t){var n=T.fn[t];T.fn[t]=function(e,o,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(dt(t,!0),e,o,r)}})),T.each({slideDown:dt("show"),slideUp:dt("hide"),slideToggle:dt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){T.fn[e]=function(e,n,o){return this.animate(t,e,n,o)}})),T.timers=[],T.fx.tick=function(){var e,t=0,n=T.timers;for(st=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||T.fx.stop(),st=void 0},T.fx.timer=function(e){T.timers.push(e),T.fx.start()},T.fx.interval=13,T.fx.start=function(){at||(at=!0,ut())},T.fx.stop=function(){at=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(e,t){return e=T.fx&&T.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var r=o.setTimeout(t,e);n.stop=function(){o.clearTimeout(r)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var gt,mt=T.expr.attrHandle;T.fn.extend({attr:function(e,t){return q(this,T.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){T.removeAttr(this,e)}))}}),T.extend({attr:function(e,t,n){var o,r,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?T.prop(e,t,n):(1===i&&T.isXMLDoc(e)||(r=T.attrHooks[t.toLowerCase()]||(T.expr.match.bool.test(t)?gt:void 0)),void 0!==n?null===n?void T.removeAttr(e,t):r&&"set"in r&&void 0!==(o=r.set(e,n,t))?o:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(o=r.get(e,t))?o:null==(o=T.find.attr(e,t))?void 0:o)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&D(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,o=0,r=t&&t.match(j);if(r&&1===e.nodeType)for(;n=r[o++];)e.removeAttribute(n)}}),gt={set:function(e,t,n){return!1===t?T.removeAttr(e,n):e.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=mt[t]||T.find.attr;mt[t]=function(e,t,o){var r,i,s=t.toLowerCase();return o||(i=mt[s],mt[s]=r,r=null!=n(e,t,o)?s:null,mt[s]=i),r}}));var yt=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;function bt(e){return(e.match(j)||[]).join(" ")}function wt(e){return e.getAttribute&&e.getAttribute("class")||""}function Ct(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(j)||[]}T.fn.extend({prop:function(e,t){return q(this,T.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[T.propFix[e]||e]}))}}),T.extend({prop:function(e,t,n){var o,r,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&T.isXMLDoc(e)||(t=T.propFix[t]||t,r=T.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(o=r.set(e,n,t))?o:e[t]=n:r&&"get"in r&&null!==(o=r.get(e,t))?o:e[t]},propHooks:{tabIndex:{get:function(e){var t=T.find.attr(e,"tabindex");return t?parseInt(t,10):yt.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(T.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){T.propFix[this.toLowerCase()]=this})),T.fn.extend({addClass:function(e){var t,n,o,r,i,s,a,l=0;if(y(e))return this.each((function(t){T(this).addClass(e.call(this,t,wt(this)))}));if((t=Ct(e)).length)for(;n=this[l++];)if(r=wt(n),o=1===n.nodeType&&" "+bt(r)+" "){for(s=0;i=t[s++];)o.indexOf(" "+i+" ")<0&&(o+=i+" ");r!==(a=bt(o))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,o,r,i,s,a,l=0;if(y(e))return this.each((function(t){T(this).removeClass(e.call(this,t,wt(this)))}));if(!arguments.length)return this.attr("class","");if((t=Ct(e)).length)for(;n=this[l++];)if(r=wt(n),o=1===n.nodeType&&" "+bt(r)+" "){for(s=0;i=t[s++];)for(;o.indexOf(" "+i+" ")>-1;)o=o.replace(" "+i+" "," ");r!==(a=bt(o))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e,o="string"===n||Array.isArray(e);return"boolean"==typeof t&&o?t?this.addClass(e):this.removeClass(e):y(e)?this.each((function(n){T(this).toggleClass(e.call(this,n,wt(this),t),t)})):this.each((function(){var t,r,i,s;if(o)for(r=0,i=T(this),s=Ct(e);t=s[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||((t=wt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,o=0;for(t=" "+e+" ";n=this[o++];)if(1===n.nodeType&&(" "+bt(wt(n))+" ").indexOf(t)>-1)return!0;return!1}});var xt=/\r/g;T.fn.extend({val:function(e){var t,n,o,r=this[0];return arguments.length?(o=y(e),this.each((function(n){var r;1===this.nodeType&&(null==(r=o?e.call(this,n,T(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=T.map(r,(function(e){return null==e?"":e+""}))),(t=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=T.valHooks[r.type]||T.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(xt,""):null==n?"":n:void 0}}),T.extend({valHooks:{option:{get:function(e){var t=T.find.attr(e,"value");return null!=t?t:bt(T.text(e))}},select:{get:function(e){var t,n,o,r=e.options,i=e.selectedIndex,s="select-one"===e.type,a=s?null:[],l=s?i+1:r.length;for(o=i<0?l:s?i:0;o<l;o++)if(((n=r[o]).selected||o===i)&&!n.disabled&&(!n.parentNode.disabled||!D(n.parentNode,"optgroup"))){if(t=T(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,o,r=e.options,i=T.makeArray(t),s=r.length;s--;)((o=r[s]).selected=T.inArray(T.valHooks.option.get(o),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),T.each(["radio","checkbox"],(function(){T.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=T.inArray(T(e).val(),t)>-1}},m.checkOn||(T.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.focusin="onfocusin"in o;var St=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};T.extend(T.event,{trigger:function(e,t,n,r){var i,s,a,l,c,u,h,d,p=[n||b],g=f.call(e,"type")?e.type:e,m=f.call(e,"namespace")?e.namespace.split("."):[];if(s=d=a=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!St.test(g+T.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),c=g.indexOf(":")<0&&"on"+g,(e=e[T.expando]?e:new T.Event(g,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:T.makeArray(t,[e]),h=T.event.special[g]||{},r||!h.trigger||!1!==h.trigger.apply(n,t))){if(!r&&!h.noBubble&&!v(n)){for(l=h.delegateType||g,St.test(l+g)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(n.ownerDocument||b)&&p.push(a.defaultView||a.parentWindow||o)}for(i=0;(s=p[i++])&&!e.isPropagationStopped();)d=s,e.type=i>1?l:h.bindType||g,(u=(J.get(s,"events")||Object.create(null))[e.type]&&J.get(s,"handle"))&&u.apply(s,t),(u=c&&s[c])&&u.apply&&Y(s)&&(e.result=u.apply(s,t),!1===e.result&&e.preventDefault());return e.type=g,r||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!Y(n)||c&&y(n[g])&&!v(n)&&((a=n[c])&&(n[c]=null),T.event.triggered=g,e.isPropagationStopped()&&d.addEventListener(g,Tt),n[g](),e.isPropagationStopped()&&d.removeEventListener(g,Tt),T.event.triggered=void 0,a&&(n[c]=a)),e.result}},simulate:function(e,t,n){var o=T.extend(new T.Event,n,{type:e,isSimulated:!0});T.event.trigger(o,null,t)}}),T.fn.extend({trigger:function(e,t){return this.each((function(){T.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return T.event.trigger(e,t,n,!0)}}),m.focusin||T.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){T.event.simulate(t,e.target,T.event.fix(e))};T.event.special[t]={setup:function(){var o=this.ownerDocument||this.document||this,r=J.access(o,t);r||o.addEventListener(e,n,!0),J.access(o,t,(r||0)+1)},teardown:function(){var o=this.ownerDocument||this.document||this,r=J.access(o,t)-1;r?J.access(o,t,r):(o.removeEventListener(e,n,!0),J.remove(o,t))}}}));var Et=o.location,At={guid:Date.now()},kt=/\?/;T.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new o.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+e),t};var Rt=/\[\]$/,Ot=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,_t=/^(?:input|select|textarea|keygen)/i;function Pt(e,t,n,o){var r;if(Array.isArray(t))T.each(t,(function(t,r){n||Rt.test(e)?o(e,r):Pt(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,o)}));else if(n||"object"!==x(t))o(e,t);else for(r in t)Pt(e+"["+r+"]",t[r],n,o)}T.param=function(e,t){var n,o=[],r=function(e,t){var n=y(t)?t():t;o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!T.isPlainObject(e))T.each(e,(function(){r(this.name,this.value)}));else for(n in e)Pt(n,e[n],t,r);return o.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=T.prop(this,"elements");return e?T.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!T(this).is(":disabled")&&_t.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!me.test(e))})).map((function(e,t){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,(function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}})):{name:t.name,value:n.replace(Ot,"\r\n")}})).get()}});var It=/%20/g,Ht=/#.*$/,Nt=/([?&])_=[^&]*/,Mt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,jt=/^\/\//,Bt={},Ft={},Wt="*/".concat("*"),Ut=b.createElement("a");function zt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var o,r=0,i=t.toLowerCase().match(j)||[];if(y(n))for(;o=i[r++];)"+"===o[0]?(o=o.slice(1)||"*",(e[o]=e[o]||[]).unshift(n)):(e[o]=e[o]||[]).push(n)}}function Vt(e,t,n,o){var r={},i=e===Ft;function s(a){var l;return r[a]=!0,T.each(e[a]||[],(function(e,a){var c=a(t,n,o);return"string"!=typeof c||i||r[c]?i?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)})),l}return s(t.dataTypes[0])||!r["*"]&&s("*")}function qt(e,t){var n,o,r=T.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:o||(o={}))[n]=t[n]);return o&&T.extend(!0,e,o),e}Ut.href=Et.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qt(qt(e,T.ajaxSettings),t):qt(T.ajaxSettings,e)},ajaxPrefilter:zt(Bt),ajaxTransport:zt(Ft),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,i,s,a,l,c,u,h,d,f=T.ajaxSetup({},t),p=f.context||f,g=f.context&&(p.nodeType||p.jquery)?T(p):T.event,m=T.Deferred(),y=T.Callbacks("once memory"),v=f.statusCode||{},w={},C={},x="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Mt.exec(i);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?i:null},setRequestHeader:function(e,t){return null==c&&(e=C[e.toLowerCase()]=C[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||x;return n&&n.abort(t),E(0,t),this}};if(m.promise(S),f.url=((e||f.url||Et.href)+"").replace(jt,Et.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(j)||[""],null==f.crossDomain){l=b.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Ut.protocol+"//"+Ut.host!=l.protocol+"//"+l.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=T.param(f.data,f.traditional)),Vt(Bt,f,t,S),c)return S;for(h in(u=T.event&&f.global)&&0==T.active++&&T.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Lt.test(f.type),r=f.url.replace(Ht,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(It,"+")):(d=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(kt.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(Nt,"$1"),d=(kt.test(r)?"&":"?")+"_="+At.guid+++d),f.url=r+d),f.ifModified&&(T.lastModified[r]&&S.setRequestHeader("If-Modified-Since",T.lastModified[r]),T.etag[r]&&S.setRequestHeader("If-None-Match",T.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&S.setRequestHeader("Content-Type",f.contentType),S.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Wt+"; q=0.01":""):f.accepts["*"]),f.headers)S.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,S,f)||c))return S.abort();if(x="abort",y.add(f.complete),S.done(f.success),S.fail(f.error),n=Vt(Ft,f,t,S)){if(S.readyState=1,u&&g.trigger("ajaxSend",[S,f]),c)return S;f.async&&f.timeout>0&&(a=o.setTimeout((function(){S.abort("timeout")}),f.timeout));try{c=!1,n.send(w,E)}catch(e){if(c)throw e;E(-1,e)}}else E(-1,"No Transport");function E(e,t,s,l){var h,d,b,w,C,x=t;c||(c=!0,a&&o.clearTimeout(a),n=void 0,i=l||"",S.readyState=e>0?4:0,h=e>=200&&e<300||304===e,s&&(w=function(e,t,n){for(var o,r,i,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(r in a)if(a[r]&&a[r].test(o)){l.unshift(r);break}if(l[0]in n)i=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){i=r;break}s||(s=r)}i=i||s}if(i)return i!==l[0]&&l.unshift(i),n[i]}(f,S,s)),!h&&T.inArray("script",f.dataTypes)>-1&&(f.converters["text script"]=function(){}),w=function(e,t,n,o){var r,i,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(i=u.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&o&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=u.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(s=c[l+" "+i]||c["* "+i]))for(r in c)if((a=r.split(" "))[1]===i&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(i=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}(f,w,S,h),h?(f.ifModified&&((C=S.getResponseHeader("Last-Modified"))&&(T.lastModified[r]=C),(C=S.getResponseHeader("etag"))&&(T.etag[r]=C)),204===e||"HEAD"===f.type?x="nocontent":304===e?x="notmodified":(x=w.state,d=w.data,h=!(b=w.error))):(b=x,!e&&x||(x="error",e<0&&(e=0))),S.status=e,S.statusText=(t||x)+"",h?m.resolveWith(p,[d,x,S]):m.rejectWith(p,[S,x,b]),S.statusCode(v),v=void 0,u&&g.trigger(h?"ajaxSuccess":"ajaxError",[S,f,h?d:b]),y.fireWith(p,[S,x]),u&&(g.trigger("ajaxComplete",[S,f]),--T.active||T.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return T.get(e,t,n,"json")},getScript:function(e,t){return T.get(e,void 0,t,"script")}}),T.each(["get","post"],(function(e,t){T[t]=function(e,n,o,r){return y(n)&&(r=r||o,o=n,n=void 0),T.ajax(T.extend({url:e,type:t,dataType:r,data:n,success:o},T.isPlainObject(e)&&e))}})),T.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),T._evalUrl=function(e,t,n){return T.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){T.globalEval(e,t,n)}})},T.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=T(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){T(this).wrapInner(e.call(this,t))})):this.each((function(){var t=T(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(n){T(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){T(this).replaceWith(this.childNodes)})),this}}),T.expr.pseudos.hidden=function(e){return!T.expr.pseudos.visible(e)},T.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new o.XMLHttpRequest}catch(e){}};var Gt={0:200,1223:204},Kt=T.ajaxSettings.xhr();m.cors=!!Kt&&"withCredentials"in Kt,m.ajax=Kt=!!Kt,T.ajaxTransport((function(e){var t,n;if(m.cors||Kt&&!e.crossDomain)return{send:function(r,i){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(s,r[s]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?i(0,"error"):i(a.status,a.statusText):i(Gt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&o.setTimeout((function(){t&&n()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),T.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return T.globalEval(e),e}}}),T.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),T.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(o,r){t=T("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Xt,Qt=[],Yt=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Qt.pop()||T.expando+"_"+At.guid++;return this[e]=!0,e}}),T.ajaxPrefilter("json jsonp",(function(e,t,n){var r,i,s,a=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+r):!1!==e.jsonp&&(e.url+=(kt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||T.error(r+" was not called"),s[0]},e.dataTypes[0]="json",i=o[r],o[r]=function(){s=arguments},n.always((function(){void 0===i?T(o).removeProp(r):o[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Qt.push(r)),s&&y(i)&&i(s[0]),s=i=void 0})),"script"})),m.createHTMLDocument=((Xt=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xt.childNodes.length),T.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((o=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(o)):t=b),i=!n&&[],(r=_.exec(e))?[t.createElement(r[1])]:(r=Se([e],t,i),i&&i.length&&T(i).remove(),T.merge([],r.childNodes)));var o,r,i},T.fn.load=function(e,t,n){var o,r,i,s=this,a=e.indexOf(" ");return a>-1&&(o=bt(e.slice(a)),e=e.slice(0,a)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&T.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){i=arguments,s.html(o?T("<div>").append(T.parseHTML(e)).find(o):e)})).always(n&&function(e,t){s.each((function(){n.apply(this,i||[e.responseText,t,e])}))}),this},T.expr.pseudos.animated=function(e){return T.grep(T.timers,(function(t){return e===t.elem})).length},T.offset={setOffset:function(e,t,n){var o,r,i,s,a,l,c=T.css(e,"position"),u=T(e),h={};"static"===c&&(e.style.position="relative"),a=u.offset(),i=T.css(e,"top"),l=T.css(e,"left"),("absolute"===c||"fixed"===c)&&(i+l).indexOf("auto")>-1?(s=(o=u.position()).top,r=o.left):(s=parseFloat(i)||0,r=parseFloat(l)||0),y(t)&&(t=t.call(e,n,T.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):("number"==typeof h.top&&(h.top+="px"),"number"==typeof h.left&&(h.left+="px"),u.css(h))}},T.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){T.offset.setOffset(this,e,t)}));var t,n,o=this[0];return o?o.getClientRects().length?(t=o.getBoundingClientRect(),n=o.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,o=this[0],r={top:0,left:0};if("fixed"===T.css(o,"position"))t=o.getBoundingClientRect();else{for(t=this.offset(),n=o.ownerDocument,e=o.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===T.css(e,"position");)e=e.parentNode;e&&e!==o&&1===e.nodeType&&((r=T(e).offset()).top+=T.css(e,"borderTopWidth",!0),r.left+=T.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-T.css(o,"marginTop",!0),left:t.left-r.left-T.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===T.css(e,"position");)e=e.offsetParent;return e||se}))}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;T.fn[e]=function(o){return q(this,(function(e,o,r){var i;if(v(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===r)return i?i[t]:e[o];i?i.scrollTo(n?i.pageXOffset:r,n?r:i.pageYOffset):e[o]=r}),e,o,arguments.length)}})),T.each(["top","left"],(function(e,t){T.cssHooks[t]=Ke(m.pixelPosition,(function(e,n){if(n)return n=Ge(e,t),Ue.test(n)?T(e).position()[t]+"px":n}))})),T.each({Height:"height",Width:"width"},(function(e,t){T.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,o){T.fn[o]=function(r,i){var s=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return q(this,(function(t,n,r){var i;return v(t)?0===o.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?T.css(t,n,a):T.style(t,n,r,a)}),t,s?r:void 0,s)}}))})),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){T.fn[t]=function(e){return this.on(t,e)}})),T.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,o){return this.on(t,e,n,o)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){T.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var $t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;T.proxy=function(e,t){var n,o,r;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return o=a.call(arguments,2),(r=function(){return e.apply(t||this,o.concat(a.call(arguments)))}).guid=e.guid=e.guid||T.guid++,r},T.holdReady=function(e){e?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=D,T.isFunction=y,T.isWindow=v,T.camelCase=Q,T.type=x,T.now=Date.now,T.isNumeric=function(e){var t=T.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},T.trim=function(e){return null==e?"":(e+"").replace($t,"")},void 0===(n=function(){return T}.apply(t,[]))||(e.exports=n);var Jt=o.jQuery,Zt=o.$;return T.noConflict=function(e){return o.$===T&&(o.$=Zt),e&&o.jQuery===T&&(o.jQuery=Jt),T},void 0===r&&(o.jQuery=o.$=T),T}))},1646:(e,t,n)=>{var o,r;!function e(t,n,o){function r(s,a){if(!n[s]){if(!t[s]){if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){return r(t[s][1][e]||e)}),c,c.exports,e,t,n,o)}return n[s].exports}for(var i=void 0,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){"use strict";var o=e("md5"),r=e("random-js"),i=e("extend"),s=e("../deps/utils/base64").btoa,a=e("../deps/promise"),l=e("../auth/oauth2"),c={computeAuthenticationHeaders:function(){},authenticateURL:function(e){return e},canRefreshAuthentication:function(){return!1},refreshAuthentication:function(e,t){return new a((function(e){return e(t)}))}},u={},h={registerAuthenticator:function(e,t){var n=i(!0,{},c,t);u[e]=n},computeAuthenticationHeaders:function(e){if(e){var t=u[e.method];if(t)return t.computeAuthenticationHeaders(e)}return{}},authenticateURL:function(e,t){if(t){var n=u[t.method];if(n)return n.authenticateURL(e,t)}return e},canRefreshAuthentication:function(e){if(e){var t=u[e.method];if(t)return t.canRefreshAuthentication()}return!1},refreshAuthentication:function(e,t){if(t){var n=u[t.method];if(n)return n.refreshAuthentication(e,t)}return new a((function(e){return e(t)}))}},d={computeAuthenticationHeaders:function(e){var t={};if(e.username&&e.password){var n=s("".concat(e.username,":").concat(e.password)),o="Basic ".concat(n);t.Authorization=o}return t},authenticateURL:function(e,t){return t.username&&t.password?e.replace("://","://".concat(t.username,":").concat(t.password,"@")):e}},f={computeAuthenticationHeaders:function(e){var t={};if(e.token){var n=e.token.access_token||e.token;t.Authorization="Bearer ".concat(n)}return t},authenticateURL:function(e,t){if(t.token){var n=t.token.access_token||t.token;return"".concat(e).concat(-1===e.indexOf("?")?"?":"&","access_token=").concat(n)}return e},canRefreshAuthentication:function(){return!0},refreshAuthentication:function(e,t){return new a((function(n,o){return t.token.refresh_token&&t.clientId?l.refreshAccessToken(e,t.clientId,t.token.refresh_token).then((function(e){var o=i(!0,{},t,{token:e});return n(o)})).catch((function(e){return o(e)})):n(t)}))}},p=r.engines.mt19937().autoSeed(),g={computeAuthenticationHeaders:function(e){var t={};if(e.secret&&e.username){var n=new Date,r=p(),i=[n.getTime(),r,e.secret,e.username].join(":"),a=s(o(i,{asBytes:!0}));t.NX_RD=r,t.NX_TS=n.getTime(),t.NX_TOKEN=a,t.NX_USER=e.username}return t}};h.basicAuthenticator=d,h.tokenAuthenticator={computeAuthenticationHeaders:function(e){var t={};return e.token&&(t["X-Authentication-Token"]=e.token),t},authenticateURL:function(e,t){return t.token?"".concat(e).concat(-1===e.indexOf("?")?"?":"&","token=").concat(t.token):e}},h.bearerTokenAuthenticator=f,h.portalAuthenticator=g,t.exports=h},{"../auth/oauth2":2,"../deps/promise":8,"../deps/utils/base64":9,extend:40,md5:43,"random-js":49}],2:[function(e,t,n){"use strict";var o=e("extend"),r=e("querystring"),i=e("../deps/fetch"),s=e("../deps/promise"),a=function(e,t){var n=e.endsWith("/")?e:"".concat(e,"/");return new s((function(e,o){return i("".concat(n,"/oauth2/token"),{method:"POST",body:r.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return e.json()})).then((function(t){return t.error?o(t.error):e(t)})).catch((function(e){return o(e)}))}))},l=function(e){switch(e.length){case 0:return{params:{}};case 1:return{params:e[0]};case 2:default:return{code:e[0],params:e[1]}}},c={getAuthorizationURL:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("Missing `baseURL` argument");if(!t)throw new Error("Missing `clientId` argument");var i=o(!0,{client_id:t,response_type:"code"},n),s=e.endsWith("/")?e:"".concat(e,"/");return"".concat(s,"oauth2/authorize?").concat(r.stringify(i))},fetchAccessToken:function(e,t){if(!e)throw new Error("Missing `baseURL` argument");if(!t)throw new Error("Missing `clientId` argument");for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=l(r),c=s.code,u=s.params,h=c?{code:c,grant_type:"authorization_code"}:{},d=o(!0,{client_id:t},h,u);return a(e,d)},fetchAccessTokenFromAuthorizationCode:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!n)throw new Error("Missing `code` argument");var i=o(!0,{code:n,grant_type:"authorization_code"},r);return c.fetchAccessToken(e,t,i)},fetchAccessTokenFromJWTToken:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!n)throw new Error("Missing `jwtToken` argument");var i=o(!0,{assertion:n,grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer"},r);return c.fetchAccessToken(e,t,i)},refreshAccessToken:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!e)throw new Error("Missing `baseURL` argument");if(!t)throw new Error("Missing `clientId` argument");if(!n)throw new Error("Missing `refreshToken` argument");var i={refresh_token:n,grant_type:"refresh_token",client_id:t},s=o(!0,i,r);return a(e,s)}};t.exports=c},{"../deps/fetch":6,"../deps/promise":8,extend:40,querystring:48}],3:[function(e,t,n){"use strict";function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=e("extend"),a={repositoryName:void 0,schemas:[],enrichers:{},fetchProperties:{},translateProperties:{},headers:{},httpTimeout:3e4},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=s(!0,{},a,t);this._baseOptions={},this._baseOptions.repositoryName=n.repositoryName,this._baseOptions.schemas=n.schemas,this._baseOptions.enrichers=n.enrichers,this._baseOptions.fetchProperties=n.fetchProperties,this._baseOptions.translateProperties=n.translateProperties,this._baseOptions.depth=n.depth,this._baseOptions.headers=n.headers,this._baseOptions.timeout=n.timeout,this._baseOptions.transactionTimeout=n.transationTimeout,this._baseOptions.httpTimeout=n.httpTimeout}var t,n;return t=e,(n=[{key:"repositoryName",value:function(e){return this._baseOptions.repositoryName=e,this}},{key:"schemas",value:function(e){return this._baseOptions.schemas=o(e),this}},{key:"enrichers",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._baseOptions.enrichers=t?{}:this._baseOptions.enrichers;for(var n=0,r=Object.keys(e);n<r.length;n++){var i,s=r[n];t?this._baseOptions.enrichers[s]=o(e[s]):(this._baseOptions.enrichers[s]=this._baseOptions.enrichers[s]||[],(i=this._baseOptions.enrichers[s]).push.apply(i,o(e[s])))}return this}},{key:"enricher",value:function(e,t){var n=this._baseOptions.enrichers[e]||[];return n.push(t),this._baseOptions.enrichers[e]=n,this}},{key:"fetchProperties",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._baseOptions.fetchProperties=t?{}:this._baseOptions.fetchProperties;for(var n=0,r=Object.keys(e);n<r.length;n++){var i,s=r[n];t?this._baseOptions.fetchProperties[s]=o(e[s]):(this._baseOptions.fetchProperties[s]=this._baseOptions.fetchProperties[s]||[],(i=this._baseOptions.fetchProperties[s]).push.apply(i,o(e[s])))}return this}},{key:"fetchProperty",value:function(e,t){var n=this._baseOptions.fetchProperties[e]||[];return n.push(t),this._baseOptions.fetchProperties[e]=n,this}},{key:"translateProperties",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._baseOptions.translateProperties=t?{}:this._baseOptions.translateProperties;for(var n=0,r=Object.keys(e);n<r.length;n++){var i,s=r[n];t?this._baseOptions.translateProperties[s]=o(e[s]):(this._baseOptions.translateProperties[s]=this._baseOptions.translateProperties[s]||[],(i=this._baseOptions.translateProperties[s]).push.apply(i,o(e[s])))}return this}},{key:"translateProperty",value:function(e,t){var n=this._baseOptions.translateProperties[e]||[];return n.push(t),this._baseOptions.translateProperties[e]=n,this}},{key:"depth",value:function(e){return this._baseOptions.depth=e,this}},{key:"headers",value:function(e){this._baseOptions.headers={};for(var t=0,n=Object.keys(e);t<n.length;t++){var o=n[t];this._baseOptions.headers[o]=e[o]}return this}},{key:"header",value:function(e,t){return this._baseOptions.headers[e]=t,this}},{key:"timeout",value:function(e){return this._baseOptions.timeout=e,this}},{key:"transactionTimeout",value:function(e){return this._baseOptions.transactionTimeout=e,this}},{key:"httpTimeout",value:function(e){return this._baseOptions.httpTimeout=e,this}},{key:"_computeOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s(!0,{},this._baseOptions,e);return e.schemas&&(t.schemas=o(e.schemas)),e.enrichers&&(t.enrichers={},Object.keys(e.enrichers).forEach((function(n){t.enrichers[n]=e.enrichers[n]}))),e.fetchProperties&&(t.fetchProperties={},Object.keys(e.fetchProperties).forEach((function(n){t.fetchProperties[n]=e.fetchProperties[n]}))),e.translateProperties&&(t.translateProperties={},Object.keys(e.translateProperties).forEach((function(n){t.translateProperties[n]=e.translateProperties[n]}))),e.headers&&(t.headers={},Object.keys(e.headers).forEach((function(n){t.headers[n]=e.headers[n]}))),t}}])&&i(t.prototype,n),e}();t.exports=l},{extend:40}],4:[function(e,t,n){"use strict";t.exports=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content=t.content,this.name=t.name||this.content.name,this.mimeType=t.mimeType||this.content.type,this.size=t.size||this.content.size}},{}],5:[function(e,t,n){"use strict";t.exports={depth:{ROOT:"root",CHILDREN:"children",MAX:"max"},enricher:{document:{ACLS:"acls",BREADCRUMB:"breadcrumb",CHILDREN:"children",DOCUMENT_URL:"documentURL",PERMISSIONS:"permissions",PREVIEW:"preview"}}}},{}],6:[function(e,t,n){"use strict";e("whatwg-fetch"),t.exports=self.fetch.bind(self)},{"whatwg-fetch":50}],7:[function(e,t,n){"use strict";t.exports=FormData},{}],8:[function(e,t,n){"use strict";var o=e("es6-promise");"undefined"==typeof Promise&&o.polyfill(),t.exports=Promise},{"es6-promise":39}],9:[function(e,t,n){"use strict";var o=e("./buffer");t.exports={btoa:function(e){return o.from(e).toString("base64")}}},{"./buffer":10}],10:[function(e,t,n){"use strict";t.exports=e("buffer/").Buffer},{"buffer/":36}],11:[function(e,t,n){"use strict";t.exports=function(e){var t=encodeURIComponent(e);return(t=t.replace(/%2F/g,"/")).replace(/%40/g,"@")}},{}],12:[function(e,t,n){"use strict";t.exports=function e(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)?e(n):n)}),[])}},{}],13:[function(e,t,n){"use strict";t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t.join("/");return o.replace(/(^\/+)|([^:])\/\/+/g,"$2/")}},{}],14:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=e("../base"),l=e("../deps/utils/join"),c=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(t).call(this,e)))._nuxeo=e.nuxeo,n._directoryName=e.directoryName,n._path=l("directory",n._directoryName),n}var n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),n=t,(a=[{key:"fetchAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._computeOptions(e),n=this._path;return t.directory=this,this._nuxeo.request(n).get(t)}},{key:"fetch",value:function(e,t){var n=this._computeOptions(t),o=l(this._path,e);return n.directory=this,this._nuxeo.request(o).get(n)}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.body={"entity-type":"directoryEntry",directoryName:this._directoryName,properties:e.properties};var n=this._computeOptions(t),o=this._path;return n.directory=this,this._nuxeo.request(o).post(n)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id||e.properties.id;t.body={id:n,"entity-type":"directoryEntry",directoryName:this._directoryName,properties:e.properties};var o=this._computeOptions(t),r=l(this._path,n);return o.directory=this,this._nuxeo.request(r).put(o)}},{key:"delete",value:function(e,t){var n=this._computeOptions(t),o=l(this._path,e);return this._nuxeo.request(o).delete(n)}}])&&r(n.prototype,a),t}(a);t.exports=c},{"../base":3,"../deps/utils/join":13}],15:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=e("extend"),c=e("../base"),u=e("../server-version").LTS_2017,h=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}(this,i(t).call(this,n)))._directory=n.directory,r.properties={},r._dirtyProperties={};var a=r._directory._nuxeo.serverVersion;return a&&!a.lt(u)||(r._dirtyProperties=l({},e.properties)),l(!0,s(r),e),r}var n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),n=t,(c=[{key:"set",value:function(e){return this._dirtyProperties=l(!0,{},this._dirtyProperties,e),this}},{key:"get",value:function(e){return this._dirtyProperties[e]||this.properties[e]}},{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._computeOptions(e);return this._directory.update({id:this.id,properties:this._dirtyProperties},t)}}])&&r(n.prototype,c),t}(c);t.exports=h},{"../base":3,"../server-version":26,extend:40}],16:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=e("extend"),c=e("querystring"),u=e("./deps/utils/join"),h=e("./base"),d=e("./deps/constants"),f=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}(this,i(t).call(this,n)))._nuxeo=n.nuxeo,r._repository=n.repository||r._nuxeo.repository(e.repository,n),r.properties={},r._dirtyProperties={},l(!0,s(r),e),r}var n,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),n=t,(h=[{key:"set",value:function(e){return this._dirtyProperties=l(!0,{},this._dirtyProperties,e),this}},{key:"get",value:function(e){return this._dirtyProperties[e]||this.properties[e]}},{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._computeOptions(e);return this._repository.update({"entity-type":"document",uid:this.uid,properties:this._dirtyProperties},t)}},{key:"isFolder",value:function(){return this.hasFacet("Folderish")}},{key:"hasFacet",value:function(e){return-1!==this.facets.indexOf(e)}},{key:"isCollection",value:function(){return this.hasFacet("Collection")}},{key:"isCollectable",value:function(){return!this.hasFacet("NotCollectionMember")}},{key:"fetchBlob",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"blobholder:0",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t,r=e;"object"===o(e)&&(n=e,r="blobholder:0"),n=this._computeOptions(n);var i=u("id",this.uid,"@blob",r);return this._nuxeo.request(i).get(n)}},{key:"move",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this._computeOptions(n);return o.repository=this._repository,this._nuxeo.operation("Document.Move").input(this.uid).params({name:t,target:e}).execute(o)}},{key:"followTransition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t);return n.repository=this._repository,this._nuxeo.operation("Document.FollowLifecycleTransition").input(this.uid).params({value:e}).execute(n)}},{key:"convert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t),o=e.xpath||"blobholder:0",r=u("id",this.uid,"@blob",o,"@convert");return this._nuxeo.request(r).queryParams({converter:e.converter,type:e.type,format:e.format}).get(n)}},{key:"scheduleConversion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={async:!0,converter:e.converter,type:e.type,format:e.format};t.body=c.stringify(n);var o=this._computeOptions(t);o.headers["Content-Type"]="multipart/form-data";var r=e.xpath||"blobholder:0",i=u("id",this.uid,"@blob",r,"@convert");return this._nuxeo.request(i).post(o)}},{key:"startWorkflow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.body={workflowModelName:e,"entity-type":"workflow"};var n=this._computeOptions(t),o=u("id",this.uid,"@workflow");return n.documentId=this.uid,this._nuxeo.request(o).post(n)}},{key:"fetchWorkflows",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._computeOptions(e),n=u("id",this.uid,"@workflow");return t.documentId=this.uid,this._nuxeo.request(n).get(t)}},{key:"fetchRenditions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this._nuxeo.Promise;if(this.contextParameters&&this.contextParameters.renditions)return n.resolve(this.contextParameters.renditions);var o=this._computeOptions(t);return o.enrichers={document:["renditions"]},this._repository.fetch(this.uid,o).then((function(t){return e.contextParameters||(e.contextParameters={}),e.contextParameters.renditions=t.contextParameters.renditions,e.contextParameters.renditions}))}},{key:"fetchRendition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t),o=u("id",this.uid,"@rendition",e);return this._nuxeo.request(o).get(n)}},{key:"fetchACLs",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this._nuxeo.Promise;if(this.contextParameters&&this.contextParameters.acls)return n.resolve(this.contextParameters.acls);var o=this._computeOptions(t);return o.enrichers={document:[d.enricher.document.ACLS]},this._repository.fetch(this.uid,o).then((function(t){return e.contextParameters||(e.contextParameters={}),e.contextParameters.acls=t.contextParameters.acls,e.contextParameters.acls}))}},{key:"hasPermission",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this._nuxeo.Promise;if(this.contextParameters&&this.contextParameters.permissions)return o.resolve(-1!==this.contextParameters.permissions.indexOf(e));var r=this._computeOptions(n);return r.enrichers={document:[d.enricher.document.PERMISSIONS]},this._repository.fetch(this.uid,r).then((function(n){return t.contextParameters||(t.contextParameters={}),t.contextParameters.permissions=n.contextParameters.permissions,-1!==t.contextParameters.permissions.indexOf(e)}))}},{key:"addPermission",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t);return n.repository=this._repository,this._nuxeo.operation("Document.AddPermission").input(this.uid).params(e).execute(n)}},{key:"removePermission",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t);return n.repository=this._repository,this._nuxeo.operation("Document.RemovePermission").input(this.uid).params(e).execute(n)}},{key:"fetchLockStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._computeOptions(e);return t.fetchProperties={document:["lock"]},this._repository.fetch(this.uid,t).then((function(e){return{lockOwner:e.lockOwner,lockCreated:e.lockCreated}}))}},{key:"lock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._computeOptions(e);return t.repository=this._repository,this._nuxeo.operation("Document.Lock").input(this.uid).execute(t)}},{key:"unlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._computeOptions(e);return t.repository=this._repository,this._nuxeo.operation("Document.Unlock").input(this.uid).execute(t)}},{key:"fetchAudit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t),o=u("id",this.uid,"@audit");return this._nuxeo.request(o).queryParams(e).get(n)}}])&&r(n.prototype,h),t}(h);t.exports=f},{"./base":3,"./deps/constants":5,"./deps/utils/join":13,extend:40,querystring:48}],17:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=e("extend"),c=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}(this,i(t).call(this,n)))._groups=n.groups,l(!0,s(r),e),r}var n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),n=t,(c=[{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._computeOptions(e);return this._groups.update({"entity-type":"group",groupname:this.groupname,grouplabel:this.grouplabel,memberUsers:this.memberUsers,memberGroups:this.memberGroups},t)}}])&&r(n.prototype,c),t}(e("../base"));t.exports=c},{"../base":3,extend:40}],18:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=e("../base"),l=e("../deps/utils/join"),c="group",u=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(t).call(this,e)))._nuxeo=e.nuxeo,n}var n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),n=t,(a=[{key:"fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t),o=l(c,e);return n.groups=this,this._nuxeo.request(o).get(n)}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.body={"entity-type":"group",groupname:e.groupname,grouplabel:e.grouplabel,memberUsers:e.memberUsers,memberGroups:e.memberGroups};var n=this._computeOptions(t);return n.groups=this,this._nuxeo.request(c).post(n)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id||e.groupname;t.body={id:n,"entity-type":"group",groupname:e.groupname,grouplabel:e.grouplabel,memberUsers:e.memberUsers,memberGroups:e.memberGroups};var o=this._computeOptions(t),r=l(c,e.groupname);return o.groups=this,this._nuxeo.request(r).put(o)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t),o=l(c,e);return this._nuxeo.request(o).delete(n)}}])&&r(n.prototype,a),t}(a);t.exports=u},{"../base":3,"../deps/utils/join":13}],19:[function(e,t,n){"use strict";var o=e("extend"),r=e("./index");o(!0,r,window.Nuxeo||{}),window.Nuxeo=r},{"./index":20,extend:40}],20:[function(e,t,n){"use strict";var o=e("./nuxeo"),r=e("./base"),i=e("./operation"),s=e("./request"),a=e("./repository"),l=e("./document"),c=e("./upload/batch"),u=e("./blob"),h=e("./upload/blob"),d=e("./user/users"),f=e("./user/user"),p=e("./group/groups"),g=e("./group/group"),m=e("./directory/directory"),y=e("./directory/entry"),v=e("./workflow/workflows"),b=e("./workflow/workflow"),w=e("./workflow/task"),C=e("./deps/constants"),x=e("./deps/promise"),S=e("./auth/auth"),T=S.basicAuthenticator,E=S.tokenAuthenticator,A=S.bearerTokenAuthenticator,k=S.portalAuthenticator,R=e("./unmarshallers/unmarshallers"),O=R.documentUnmarshaller,D=R.documentsUnmarshaller,_=R.workflowUnmarshaller,P=R.workflowsUnmarshaller,I=R.taskUnmarshaller,H=R.tasksUnmarshaller,N=R.directoryEntryUnmarshaller,M=R.directoryEntriesUnmarshaller,L=R.userUnmarshaller,j=R.groupUnmarshaller,B=e("./nuxeo-versions"),F=e("./server-version").SERVER_VERSIONS,W=e("./auth/oauth2"),U=e("../package.json");o.Base=r,o.Operation=i,o.Request=s,o.Repository=a,o.Document=l,o.BatchUpload=c,o.Blob=u,o.BatchBlob=h,o.Users=d,o.User=f,o.Groups=p,o.Group=g,o.Directory=m,o.DirectoryEntry=y,o.Workflows=v,o.Workflow=b,o.Task=w,o.constants=C,o.version=U.version,o.VERSIONS=B,o.SERVER_VERSIONS=F,o.oauth2=W,o.promiseLibrary(x),o.registerAuthenticator("basic",T),o.registerAuthenticator("token",E),o.registerAuthenticator("bearerToken",A),o.registerAuthenticator("portal",k),o.registerUnmarshaller("document",O),o.registerUnmarshaller("documents",D),o.registerUnmarshaller("workflow",_),o.registerUnmarshaller("workflows",P),o.registerUnmarshaller("task",I),o.registerUnmarshaller("tasks",H),o.registerUnmarshaller("directoryEntry",N),o.registerUnmarshaller("directoryEntries",M),o.registerUnmarshaller("user",L),o.registerUnmarshaller("group",j),o.registerUnmarshaller("worflows",P),t.exports=o},{"../package.json":51,"./auth/auth":1,"./auth/oauth2":2,"./base":3,"./blob":4,"./deps/constants":5,"./deps/promise":8,"./directory/directory":14,"./directory/entry":15,"./document":16,"./group/group":17,"./group/groups":18,"./nuxeo":22,"./nuxeo-versions":21,"./operation":23,"./repository":24,"./request":25,"./server-version":26,"./unmarshallers/unmarshallers":27,"./upload/batch":28,"./upload/blob":29,"./user/user":30,"./user/users":31,"./workflow/task":32,"./workflow/workflow":33,"./workflow/workflows":34}],21:[function(e,t,n){"use strict";t.exports={LTS_2015:"7.10",LTS_2016:"8.10",LTS_2017:"9.10"}},{}],22:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=e("extend"),u=e("querystring"),h=e("./base"),d=e("./server-version"),f=e("./operation"),p=e("./request"),g=e("./repository"),m=e("./upload/batch"),y=e("./user/users"),v=e("./group/groups"),b=e("./directory/directory"),w=e("./workflow/workflows"),C=e("./deps/utils/join"),x=e("./deps/promise"),S=e("./deps/form-data"),T=e("./auth/auth"),E=e("./unmarshallers/unmarshallers"),A=e("./deps/fetch"),k="automation/",R={baseURL:"http://localhost:8080/nuxeo/",apiPath:"api/v1/",promiseLibrary:null,auth:null},O=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var o=c(!0,{},R,n);return(e=s(this,a(t).call(this,o)))._baseURL=o.baseURL,e._restURL=C(e._baseURL,o.apiPath),e._automationURL=C(e._restURL,k),e._auth=o.auth,e._authenticationRefreshedListeners=[],e.connected=!1,e.Promise=t.Promise||x,e._activeRequests=0,e}var n,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(h=[{key:"connect",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={method:"GET",url:C(this._baseURL,"json/cmis")};return n=c(!0,n,t),n=this._computeOptions(n),this.http(n).then((function(t){return t&&t.default&&t.default.productVersion&&(e.serverVersion=new d(t.default.productVersion),e.nuxeoVersion=t.default.productVersion),n.method="POST",n.url=C(e._automationURL,"login"),e.http(n)})).then((function(t){return e.users({enrichers:{user:["userprofile"]}}).fetch(t.username)})).then((function(t){return e.user=t,e.connected=!0,e}))}},{key:"login",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.connect(e)}},{key:"http",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this._computeFetchOptions(t);return new this.Promise((function(o,r){e._activeRequests+=1;var i={method:n.method,headers:n.headers,body:n.body,signal:n.signal};t.credentials?i.credentials=t.credentials:e._auth||(i.credentials="include"),A(n.url,i).then((function(i){if(e._activeRequests-=1,401===i.status&&!t.refreshedAuthentication&&T.canRefreshAuthentication(e._auth))return t.refreshedAuthentication=!0,T.refreshAuthentication(e._baseURL,e._auth).then((function(n){return e._auth=n,e._notifyAuthenticationRefreshed(n),o(e.http(t))})).catch((function(){var e=new Error(i.statusText);return e.response=i,r(e)}));if(!/^2/.test("".concat(i.status))){var s=new Error(i.statusText);return s.response=i,r(s)}if(n.resolveWithFullResponse||204===i.status)return o(i);var a=i.headers.get("content-type");return a&&0===a.indexOf("application/json")?(n.nuxeo=e,o(i.json().then((function(e){return E.unmarshall(e,n,i)})))):o(i)})).catch((function(t){return e._activeRequests-=1,r(t)}))}))}},{key:"_http",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http(e)}},{key:"_computeFetchOptions",value:function(e){var t={method:"GET",headers:{},json:!0,cache:!1,resolveWithFullResponse:!1};t=c(!0,{},t,e);var n=T.computeAuthenticationHeaders(this._auth);t.headers=c(t.headers,n),t.schemas&&t.schemas.length>0&&(t.headers.properties=t.schemas.join(",")),void 0!==e.repositoryName&&(t.headers["X-NXRepository"]=t.repositoryName),e.enrichers&&Object.keys(e.enrichers).forEach((function(e){t.headers["enrichers-".concat(e)]=t.enrichers[e].join(",")})),e.fetchProperties&&Object.keys(e.fetchProperties).forEach((function(e){t.headers["fetch-".concat(e)]=t.fetchProperties[e].join(",")})),e.translateProperties&&Object.keys(e.translateProperties).forEach((function(e){t.headers["translate-".concat(e)]=t.translateProperties[e].join(",")})),t.depth&&(t.headers.depth=t.depth);var r=this._computeTimeouts(t),i=r.httpTimeout,s=r.transactionTimeout;return s&&(t.headers["Nuxeo-Transaction-Timeout"]=s),t.timeout=i,t.json&&(t.headers.Accept="application/json",t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json","object"!==o(t.body)||t.body instanceof S||(t.body=JSON.stringify(t.body))),"GET"===t.method&&delete t.headers["Content-Type"],t.queryParams&&Object.keys(t.queryParams).length>0&&(t.url+=-1===t.url.indexOf("?")?"?":"",t.url+=u.stringify(t.queryParams)),t}},{key:"_computeTimeouts",value:function(e){var t=e.transactionTimeout||e.timeout,n=e.httpTimeout;return!n&&t&&(n=5+t),{httpTimeout:n,transactionTimeout:t}}},{key:"operation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={id:e,nuxeo:this,url:this._automationURL};return n=c(!0,n,t),n=this._computeOptions(n),new f(n)}},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={path:e,nuxeo:this,url:this._restURL};return n=c(!0,n,t),n=this._computeOptions(n),new p(n)}},{key:"repository",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e,r=t;"object"===o(n)&&(r=n,n=null);var i={nuxeo:this};return n&&(i.repositoryName=n),i=c(!0,i,r),i=this._computeOptions(i),new g(i)}},{key:"batchUpload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={nuxeo:this,url:this._restURL};return t=c(!0,t,e),t=this._computeOptions(t),new m(t)}},{key:"users",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={nuxeo:this};return t=c(!0,t,e),t=this._computeOptions(t),new y(t)}},{key:"groups",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={nuxeo:this};return t=c(!0,t,e),t=this._computeOptions(t),new v(t)}},{key:"directory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={directoryName:e,nuxeo:this};return n=c(!0,n,t),n=this._computeOptions(n),new b(n)}},{key:"workflows",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._repositoryName,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={repositoryName:e,nuxeo:this};return n=c(!0,n,t),n=this._computeOptions(n),new w(n)}},{key:"requestAuthenticationToken",value:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i={method:"GET",url:C(this._baseURL,"authentication","token"),queryParams:{applicationName:e,deviceId:t,deviceDescription:n,permission:o}};return i=c(!0,i,r),i=this._computeOptions(i),this.http(i).then((function(e){return e.text()}))}},{key:"computeAuthenticationHeaders",value:function(){return T.computeAuthenticationHeaders(this._auth)}},{key:"authenticateURL",value:function(e){return T.authenticateURL(e,this._auth)}},{key:"onAuthenticationRefreshed",value:function(e){this._authenticationRefreshedListeners.push(e)}},{key:"_notifyAuthenticationRefreshed",value:function(e){var t=this;this._authenticationRefreshedListeners.forEach((function(n){return n.call(t,e)}))}}])&&i(n.prototype,h),t}(h);O.promiseLibrary=function(e){O.Promise=e},O.registerAuthenticator=function(e,t){T.registerAuthenticator(e,t)},O.registerUnmarshaller=function(e,t){E.registerUnmarshaller(e,t)},t.exports=O},{"./auth/auth":1,"./base":3,"./deps/fetch":6,"./deps/form-data":7,"./deps/promise":8,"./deps/utils/join":13,"./directory/directory":14,"./group/groups":18,"./operation":23,"./repository":24,"./request":25,"./server-version":26,"./unmarshallers/unmarshallers":27,"./upload/batch":28,"./user/users":31,"./workflow/workflows":34,extend:40,querystring:48}],23:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=e("extend"),l=e("./base"),c=e("./deps/utils/join"),u=e("./deps/utils/encodePath"),h=e("./blob"),d=e("./upload/blob"),f=e("./upload/batch"),p=e("./document"),g=e("./deps/form-data"),m=function(e){return e instanceof p||"object"===s(e)&&"document"===e["entity-type"]},y=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=a(!0,{},e);return(n=function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,r(t).call(this,o)))._nuxeo=o.nuxeo,n._id=o.id,n._url=o.url,n._automationParams={params:{},context:{},input:void 0},n}var n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,e),n=t,(l=[{key:"param",value:function(e,t){return this._automationParams.params[e]=t,this}},{key:"params",value:function(e){return this._automationParams.params=a(!0,{},this._automationParams.params,e),this}},{key:"context",value:function(e){return this._automationParams.context=e,this}},{key:"input",value:function(e){return this._automationParams.input=e,this}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.headers=e.headers||{},e.headers["Content-Type"]=this._computeContentTypeHeader(this._automationParams.input);var t=this._computeOptions(e),n={method:"POST",url:this._computeRequestURL(),body:this._computeRequestBody()};return n=a(!0,n,t),this._nuxeo.http(n)}},{key:"_computeContentTypeHeader",value:function(e){return this._isMultipartInput(e)?"multipart/form-data":"application/json"}},{key:"_computeRequestURL",value:function(){var e=this._automationParams.input;return e instanceof d?c(this._nuxeo._restURL,"upload",e["upload-batch"],e["upload-fileId"],"execute",this._id):e instanceof f?c(this._nuxeo._restURL,"upload",e._batchId,"execute",this._id):c(this._url,u(this._id))}},{key:"_computeRequestBody",value:function(){var e=this._automationParams.input;if(this._isBatchInput(e)){var t=a(!0,{},this._automationParams);return t.input=void 0,t}if(e instanceof Array){if(e.length>0){var n=e[0];if(m(n)){var o=e.map((function(e){return e.uid}));return this._automationParams.input="docs:".concat(o.join(",")),this._automationParams}if("string"==typeof n)return this._automationParams.input="docs:".concat(e.join(",")),this._automationParams;if(n instanceof h){var r={params:this._automationParams.params,context:this._automationParams.context},i=new g;i.append("params",JSON.stringify(r));var s=0,l=!0,c=!1,u=void 0;try{for(var d,f=e[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;i.append("input#".concat(s),p.content,p.name),s+=1}}catch(e){c=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}return i}}}else{if(m(e))return this._automationParams.input=e.uid||e,this._automationParams;if(e instanceof h){var y={params:this._automationParams.params,context:this._automationParams.context},v=new g;return v.append("params",JSON.stringify(y)),v.append("input",e.content,e.name),v}}return this._automationParams}},{key:"_isMultipartInput",value:function(e){if(e instanceof Array){if(e.length>0&&e[0]instanceof h)return!0}else if(e instanceof h)return!0;return!1}},{key:"_isBatchInput",value:function(e){return e instanceof f||e instanceof d}}])&&o(n.prototype,l),t}(l);t.exports=y},{"./base":3,"./blob":4,"./deps/form-data":7,"./deps/utils/encodePath":11,"./deps/utils/join":13,"./document":16,"./upload/batch":28,"./upload/blob":29,extend:40}],24:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=e("./base"),u=e("./deps/utils/join");function h(e,t){var n=u(0===e.indexOf("/")?"path":"id",e),o=t.repositoryName;return void 0!==o&&(n=u("repo",o,n)),n}var d=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,t),(e=s(this,a(t).call(this,n)))._nuxeo=n.nuxeo,e}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(o=[{key:"fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t),o=h(e,n);return n.repository=this,this._nuxeo.request(o).get(n)}},{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.body={"entity-type":"document",type:t.type,name:t.name,properties:t.properties};var o=this._computeOptions(n),r=h(e,o);return o.repository=this,this._nuxeo.request(r).post(o)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.body={"entity-type":"document",uid:e.uid,properties:e.properties};var n=this._computeOptions(t),o=h(e.uid,n);return n.repository=this,this._nuxeo.request(o).put(n)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t),o=h(e,n);return this._nuxeo.request(o).delete(n)}},{key:"query",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t),o=this._computeQueryPath(e);return n.repository=this,this._nuxeo.request(o).queryParams(e).get(n)}},{key:"_computeQueryPath",value:function(e){return u("search",e.query?"lang/NXQL":"pp/".concat(e.pageProvider),"execute")}}])&&i(n.prototype,o),t}(c);t.exports=d},{"./base":3,"./deps/utils/join":13}],25:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=e("extend"),u=e("./deps/utils/join"),h=e("./deps/utils/encodePath"),d=e("./base"),f={path:"",queryParams:{}},p=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var o=c(!0,{},f,n);return(e=s(this,a(t).call(this,o)))._nuxeo=o.nuxeo,e._path=o.path,e._queryParams=o.queryParams,e._url=o.url,e}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(o=[{key:"path",value:function(e){return this._path=u(this._path,e),this}},{key:"queryParams",value:function(e){return this._queryParams=c(!0,{},this._queryParams,e),this}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.method="GET",this.execute(e)}},{key:"post",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.method="POST",this.execute(e)}},{key:"put",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.method="PUT",this.execute(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.method="DELETE",this.execute(e)}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._computeOptions(e),n=u(this._url,h(this._path)),o={url:n,queryParams:this._queryParams};return o=c(!0,o,t),this._nuxeo.http(o)}}])&&i(n.prototype,o),t}(d);t.exports=p},{"./base":3,"./deps/utils/encodePath":11,"./deps/utils/join":13,extend:40}],26:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=/(\d+)\.(\d+)(?:-HF(\d+))?/,i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.match(r);if(!n)throw new Error("Unknown Nuxeo Server version: ".concat(t));this.major=parseInt(n[1],10),this.minor=parseInt(n[2],10),this.hotfix=parseInt(n[3],10)||-1,this.version=t}var t,n,i;return t=e,i=[{key:"create",value:function(t){return"string"==typeof t?new e(t):t}}],(n=[{key:"eq",value:function(t){var n=e.create(t);return this.major===n.major&&this.minor===n.minor&&this.hotfix===n.hotfix}},{key:"gt",value:function(t){var n=e.create(t);return this.major>n.major||this.major===n.major&&this.minor>n.minor||this.major===n.major&&this.minor===n.minor&&this.hotfix>n.hotfix}},{key:"lt",value:function(t){var n=e.create(t);return this.major<n.major||this.major===n.major&&this.minor<n.minor||this.major===n.major&&this.minor===n.minor&&this.hotfix<n.hotfix}},{key:"gte",value:function(t){var n=e.create(t);return this.eq(n)||this.gt(n)}},{key:"lte",value:function(t){var n=e.create(t);return this.eq(n)||this.lt(n)}},{key:"toString",value:function(){return this.version}}])&&o(t.prototype,n),i&&o(t,i),e}(),s=new i("8.10"),a=new i("9.10"),l=new i("10.10");i.LTS_2016=s,i.LTS_2017=a,i.LTS_2019=l,i.SERVER_VERSIONS={LTS_2016:s,LTS_2017:a,LTS_2019:l},t.exports=i},{}],27:[function(e,t,n){"use strict";var o=e("../document"),r=e("../workflow/workflow"),i=e("../workflow/task"),s=e("../user/user"),a=e("../group/group"),l=e("../directory/entry"),c={},u={registerUnmarshaller:function(e,t){c[e]=t},unmarshall:function(e,t){var n=e["entity-type"],o=c[n];return o&&o(e,t)||e},documentUnmarshaller:function(e,t){return new o(e,t)},documentsUnmarshaller:function(e,t){var n=e.entries.map((function(e){return new o(e,t)}));return e.entries=n,e},workflowUnmarshaller:function(e,t){return new r(e,t)},workflowsUnmarshaller:function(e,t){var n=e.entries.map((function(e){return new r(e,t)}));return e.entries=n,e},taskUnmarshaller:function(e,t){return new i(e,t)},tasksUnmarshaller:function(e,t){var n=e.entries.map((function(e){return new i(e,t)}));return e.entries=n,e},directoryEntryUnmarshaller:function(e,t){return new l(e,t)},directoryEntriesUnmarshaller:function(e,t){var n=e.entries.map((function(e){return new l(e,t)}));return e.entries=n,e},userUnmarshaller:function(e,t){return new s(e,t)},groupUnmarshaller:function(e,t){return new a(e,t)}};t.exports=u},{"../directory/entry":15,"../document":16,"../group/group":17,"../user/user":30,"../workflow/task":32,"../workflow/workflow":33}],28:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=e("extend"),u=e("promise-queue"),h=e("../base"),d=e("../deps/utils/join"),f=e("../deps/utils/flatten"),p=e("./blob"),g={concurrency:5},m=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var o=c(!0,{},g,n);return(e=s(this,a(t).call(this,o)))._url=d(o.url,"upload/"),e._nuxeo=o.nuxeo,e._uploadIndex=0,u.configure(e._nuxeo.Promise),e._queue=new u(o.concurrency,1/0),e._batchIdPromise=null,e._batchId=null,e._promises=[],e}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(o=[{key:"upload",value:function(){for(var e=this,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=f(n),i=r.map((function(t){var n=e._queue.add(e._upload.bind(e,t));return e._promises.push(n),n}));if(1===i.length)return i[0];var s=this._nuxeo.Promise;return s.all(i).then((function(t){return{blobs:t.map((function(e){return e.blob})),batch:e}}))}},{key:"_upload",value:function(e){var t=this;this._batchIdPromise||(this._batchIdPromise=this._fetchBatchId());var n=this._uploadIndex;return this._uploadIndex+=1,this._batchIdPromise.then((function(){var o={json:!1,method:"POST",url:d(t._url,t._batchId,n),body:e.content,headers:{"Cache-Control":"no-cache","X-File-Name":encodeURIComponent(e.name),"X-File-Size":e.size,"X-File-Type":e.mimeType,"Content-Length":e.size}},r=t._computeOptions(o);return t._nuxeo.http(r)})).then((function(e){return e.batchId=t._batchId,e.index=n,{blob:new p(e),batch:t}}))}},{key:"_fetchBatchId",value:function(){var e=this,t={method:"POST",url:this._url},n=this._nuxeo.Promise;if(this._batchId)return n.resolve(this);var o=this._computeOptions(t);return this._nuxeo.http(o).then((function(t){return e._batchId=t.batchId,e}))}},{key:"done",value:function(){var e=this;return this._nuxeo.Promise.all(this._promises).then((function(t){return{blobs:t.map((function(e){return e.blob})),batch:e}}))}},{key:"isFinished",value:function(){return 0===this._queue.getQueueLength()&&0===this._queue.getPendingLength()}},{key:"cancel",value:function(e){var t=this,n=this._nuxeo.Promise;if(!this._batchIdPromise)return n.resolve(this);var o=d("upload",this._batchId);return this._batchIdPromise.then((function(){var n=t._computeOptions(e);return t._nuxeo.request(o).delete(n)})).then((function(){return t._batchIdPromise=null,t._batchId=null,t}))}},{key:"fetchBlob",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this._nuxeo.Promise;if(!this._batchId)return o.reject(new Error("No 'batchId' set"));var r={method:"GET",url:d(this._url,this._batchId,e)};return r=c(!0,r,n),r=this._computeOptions(r),this._nuxeo.http(r).then((function(n){return n.batchId=t._batchId,n.index=e,{batch:t,blob:new p(n)}}))}},{key:"removeBlob",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._nuxeo.Promise;if(!this._batchId)return n.reject(new Error("No 'batchId' set"));var o={method:"DELETE",url:d(this._url,this._batchId,e)};return o=c(!0,o,t),o=this._computeOptions(o),this._nuxeo.http(o)}},{key:"fetchBlobs",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this._nuxeo.Promise;if(!this._batchId)return n.reject(new Error("No 'batchId' set"));var o={method:"GET",url:d(this._url,this._batchId)};return o=c(!0,o,t),o=this._computeOptions(o),this._nuxeo.http(o).then((function(t){var n=t.map((function(t,n){return t.batchId=e._batchId,t.index=n,new p(t)}));return{batch:e,blobs:n}}))}}])&&i(n.prototype,o),t}(h);t.exports=m},{"../base":3,"../deps/utils/flatten":12,"../deps/utils/join":13,"./blob":29,extend:40,"promise-queue":45}],29:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=e("extend");t.exports=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this["upload-batch"]=t.batchId,this["upload-fileId"]="".concat(t.index),delete t.batchId,delete t.index,r(this,t)}},{extend:40}],30:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=e("extend"),c=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}(this,i(t).call(this,n)))._users=n.users,r.properties={},r._dirtyProperties={},l(!0,s(r),e),r}var n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),n=t,(c=[{key:"set",value:function(e){return this._dirtyProperties=l(!0,{},this._dirtyProperties,e),this}},{key:"get",value:function(e){return this._dirtyProperties[e]||this.properties[e]}},{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._computeOptions(e);return this._users.update({id:this.id,properties:this._dirtyProperties},t)}}])&&r(n.prototype,c),t}(e("../base"));t.exports=c},{"../base":3,extend:40}],31:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=e("../base"),l=e("../deps/utils/join"),c="user",u=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(t).call(this,e)))._nuxeo=e.nuxeo,n}var n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),n=t,(a=[{key:"fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t),o=l(c,e);return n.users=this,this._nuxeo.request(o).get(n)}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.body={"entity-type":"user",properties:e.properties};var n=this._computeOptions(t);return n.users=this,this._nuxeo.request(c).post(n)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.body={"entity-type":"user",id:e.id,properties:e.properties};var n=this._computeOptions(t),o=l(c,e.id);return n.users=this,this._nuxeo.request(o).put(n)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t),o=l(c,e);return this._nuxeo.request(o).delete(n)}}])&&r(n.prototype,a),t}(a);t.exports=u},{"../base":3,"../deps/utils/join":13}],32:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=e("extend"),c=e("../base"),u=e("../deps/utils/join"),h="task",d=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}(this,i(t).call(this,n)))._nuxeo=n.nuxeo,r._documentId=n.documentId,l(!0,s(r),e),r}var n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),n=t,(c=[{key:"variable",value:function(e,t){return this.variables[e]=t,this}},{key:"complete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.variables||this.variables;n.body={variables:o,"entity-type":"task",id:this.id,comment:t.comment};var r=this._computeOptions(n),i=u(h,this.id,e);return this._nuxeo.request(i).put(r)}},{key:"reassign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this._computeOptions(n),r=u(h,this.id,"reassign");return this._nuxeo.request(r).queryParams({actors:e,comment:t.comment}).put(o)}},{key:"delegate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this._computeOptions(n),r=u(h,this.id,"delegate");return this._nuxeo.request(r).queryParams({delegatedActors:e,comment:t.comment}).put(o)}}])&&r(n.prototype,c),t}(c);t.exports=d},{"../base":3,"../deps/utils/join":13,extend:40}],33:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=e("extend"),c=e("../base"),u=e("../deps/utils/join"),h="workflow",d=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}(this,i(t).call(this,n)))._nuxeo=n.nuxeo,r._documentId=n.documentId,l(!0,s(r),e),r}var n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),n=t,(c=[{key:"fetchTasks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._computeOptions(e);return t.documentId=this.uid,this._buildTasksRequest().get(t)}},{key:"fetchGraph",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._computeOptions(e),n=u(h,this.id,"graph");return this._nuxeo.request(n).get(t)}},{key:"_buildTasksRequest",value:function(){if(this._documentId){var e=u("id",this._documentId,"@workflow",this.id,"task");return this._nuxeo.request(e)}return this._nuxeo.request("task").queryParams({workflowInstanceId:this.id})}}])&&r(n.prototype,c),t}(c);t.exports=d},{"../base":3,"../deps/utils/join":13,extend:40}],34:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=e("../base"),u=e("../deps/utils/join"),h="workflow",d="task",f=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,t),(e=s(this,a(t).call(this,n)))._nuxeo=n.nuxeo,e}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(o=[{key:"start",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.body={workflowModelName:e,"entity-type":"workflow",attachedDocumentIds:t.attachedDocumentIds,variables:t.variables};var o=this._computeOptions(n);return this._nuxeo.request(h).post(o)}},{key:"fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t),o=u(h,e);return this._nuxeo.request(o).get(n)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t),o=u(h,e);return this._nuxeo.request(o).delete(n)}},{key:"fetchStartedWorkflows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t);return this._nuxeo.request(h).queryParams({workflowModelName:e}).get(n)}},{key:"fetchTasks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._computeOptions(t);return this._nuxeo.request(d).queryParams({userId:e.actorId,workflowInstanceId:e.workflowInstanceId,workflowModelName:e.workflowModelName}).get(n)}}])&&i(n.prototype,o),t}(c);t.exports=f},{"../base":3,"../deps/utils/join":13}],35:[function(e,t,n){"use strict";n.byteLength=function(e){var t=c(e),n=t[0],o=t[1];return 3*(n+o)/4-o},n.toByteArray=function(e){var t,n,o=c(e),s=o[0],a=o[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),u=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],s=16383,a=0,l=n-r;a<l;a+=s)i.push(u(e,a,a+s>l?l:a+s));return 1===r?(t=e[n-1],i.push(o[t>>2]+o[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),i.join("")};for(var o=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)o[a]=s[a],r[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var r,i,s=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(o[(i=r)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],36:[function(e,t,n){(function(t){"use strict";var o=e("base64-js"),r=e("ieee754"),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=t,n.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},n.INSPECT_MAX_BYTES=50;var s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=new Uint8Array(e);return Object.setPrototypeOf(n,t.prototype),n}function t(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,n)}function l(e,n,o){if("string"==typeof e)return function(e,n){if("string"==typeof n&&""!==n||(n="utf8"),!t.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o=0|f(e,n),r=a(o),i=r.write(e,n);return i!==o&&(r=r.slice(0,i)),r}(e,n);if(ArrayBuffer.isView(e))return h(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(F(e,ArrayBuffer)||e&&F(e.buffer,ArrayBuffer))return function(e,n,o){if(n<0||e.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<n+(o||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===n&&void 0===o?new Uint8Array(e):void 0===o?new Uint8Array(e,n):new Uint8Array(e,n,o),Object.setPrototypeOf(r,t.prototype),r}(e,n,o);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return t.from(r,n,o);var i=function(e){if(t.isBuffer(e)){var n=0|d(e.length),o=a(n);return 0===o.length||e.copy(o,0,0,n),o}return void 0!==e.length?"number"!=typeof e.length||W(e.length)?a(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),n,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),a(e<0?0:0|d(e))}function h(e){for(var t=e.length<0?0:0|d(e.length),n=a(t),o=0;o<t;o+=1)n[o]=255&e[o];return n}function d(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function f(e,n){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||F(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var o=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===o)return 0;for(var i=!1;;)switch(n){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return j(e).length;default:if(i)return r?-1:L(e).length;n=(""+n).toLowerCase(),i=!0}}function p(e,t,n){var o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function g(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function m(e,n,o,r,i){if(0===e.length)return-1;if("string"==typeof o?(r=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),W(o=+o)&&(o=i?0:e.length-1),o<0&&(o=e.length+o),o>=e.length){if(i)return-1;o=e.length-1}else if(o<0){if(!i)return-1;o=0}if("string"==typeof n&&(n=t.from(n,r)),t.isBuffer(n))return 0===n.length?-1:y(e,n,o,r,i);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,n,o):Uint8Array.prototype.lastIndexOf.call(e,n,o):y(e,[n],o,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,o,r){var i,s=1,a=e.length,l=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){var u=-1;for(i=n;i<a;i++)if(c(e,i)===c(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===l)return u*s}else-1!==u&&(i-=i-u),u=-1}else for(n+l>a&&(n=a-l),i=n;i>=0;i--){for(var h=!0,d=0;d<l;d++)if(c(e,i+d)!==c(t,d)){h=!1;break}if(h)return i}return-1}function v(e,t,n,o){n=Number(n)||0;var r=e.length-n;o?(o=Number(o))>r&&(o=r):o=r;var i=t.length;o>i/2&&(o=i/2);for(var s=0;s<o;++s){var a=parseInt(t.substr(2*s,2),16);if(W(a))return s;e[n+s]=a}return s}function b(e,t,n,o){return B(L(t,e.length-n),e,n,o)}function w(e,t,n,o){return B(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,o)}function C(e,t,n,o){return w(e,t,n,o)}function x(e,t,n,o){return B(j(t),e,n,o)}function S(e,t,n,o){return B(function(e,t){for(var n,o,r,i=[],s=0;s<e.length&&!((t-=2)<0);++s)o=(n=e.charCodeAt(s))>>8,r=n%256,i.push(r),i.push(o);return i}(t,e.length-n),e,n,o)}function T(e,t,n){return 0===t&&n===e.length?o.fromByteArray(e):o.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var o=[],r=t;r<n;){var i,s,a,l,c=e[r],u=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(i=e[r+1]))&&(l=(31&c)<<6|63&i)>127&&(u=l);break;case 3:i=e[r+1],s=e[r+2],128==(192&i)&&128==(192&s)&&(l=(15&c)<<12|(63&i)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:i=e[r+1],s=e[r+2],a=e[r+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,o.push(u>>>10&1023|55296),u=56320|1023&u),o.push(u),r+=h}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);for(var n="",o=0;o<t;)n+=String.fromCharCode.apply(String,e.slice(o,o+=A));return n}(o)}n.kMaxLength=s,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},t.allocUnsafe=function(e){return u(e)},t.allocUnsafeSlow=function(e){return u(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,n){if(F(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),F(n,Uint8Array)&&(n=t.from(n,n.offset,n.byteLength)),!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var o=e.length,r=n.length,i=0,s=Math.min(o,r);i<s;++i)if(e[i]!==n[i]){o=e[i],r=n[i];break}return o<r?-1:r<o?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var o;if(void 0===n)for(n=0,o=0;o<e.length;++o)n+=e[o].length;var r=t.allocUnsafe(n),i=0;for(o=0;o<e.length;++o){var s=e[o];if(F(s,Uint8Array)&&(s=t.from(s)),!t.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},t.byteLength=f,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):p.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},i&&(t.prototype[i]=t.prototype.inspect),t.prototype.compare=function(e,n,o,r,i){if(F(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=0),void 0===o&&(o=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),n<0||o>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&n>=o)return 0;if(r>=i)return-1;if(n>=o)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(r>>>=0),a=(o>>>=0)-(n>>>=0),l=Math.min(s,a),c=this.slice(r,i),u=e.slice(n,o),h=0;h<l;++h)if(c[h]!==u[h]){s=c[h],a=u[h];break}return s<a?-1:a<s?1:0},t.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},t.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},t.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},t.prototype.write=function(e,t,n,o){if(void 0===t)o="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)o=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var i=!1;;)switch(o){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return C(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),i=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function k(e,t,n){var o="";n=Math.min(e.length,n);for(var r=t;r<n;++r)o+=String.fromCharCode(127&e[r]);return o}function R(e,t,n){var o="";n=Math.min(e.length,n);for(var r=t;r<n;++r)o+=String.fromCharCode(e[r]);return o}function O(e,t,n){var o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);for(var r="",i=t;i<n;++i)r+=U[e[i]];return r}function D(e,t,n){for(var o=e.slice(t,n),r="",i=0;i<o.length;i+=2)r+=String.fromCharCode(o[i]+256*o[i+1]);return r}function _(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,n,o,r,i,s){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>i||n<s)throw new RangeError('"value" argument is out of bounds');if(o+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,o,r,i){if(n+o>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(e,t,n,o,i){return t=+t,n>>>=0,i||I(e,0,n,4),r.write(e,t,n,o,23,4),n+4}function N(e,t,n,o,i){return t=+t,n>>>=0,i||I(e,0,n,8),r.write(e,t,n,o,52,8),n+8}t.prototype.slice=function(e,n){var o=this.length;(e=~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),(n=void 0===n?o:~~n)<0?(n+=o)<0&&(n=0):n>o&&(n=o),n<e&&(n=e);var r=this.subarray(e,n);return Object.setPrototypeOf(r,t.prototype),r},t.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||_(e,t,this.length);for(var o=this[e],r=1,i=0;++i<t&&(r*=256);)o+=this[e+i]*r;return o},t.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||_(e,t,this.length);for(var o=this[e+--t],r=1;t>0&&(r*=256);)o+=this[e+--t]*r;return o},t.prototype.readUInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||_(e,t,this.length);for(var o=this[e],r=1,i=0;++i<t&&(r*=256);)o+=this[e+i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},t.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||_(e,t,this.length);for(var o=t,r=1,i=this[e+--o];o>0&&(r*=256);)i+=this[e+--o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},t.prototype.readInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||_(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(e,t){e>>>=0,t||_(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||_(e,4,this.length),r.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||_(e,4,this.length),r.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||_(e,8,this.length),r.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||_(e,8,this.length),r.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,n,o){e=+e,t>>>=0,n>>>=0,o||P(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,i=0;for(this[t]=255&e;++i<n&&(r*=256);)this[t+i]=e/r&255;return t+n},t.prototype.writeUIntBE=function(e,t,n,o){e=+e,t>>>=0,n>>>=0,o||P(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,i=1;for(this[t+r]=255&e;--r>=0&&(i*=256);)this[t+r]=e/i&255;return t+n},t.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t>>>=0,!o){var r=Math.pow(2,8*n-1);P(this,e,t,n,r-1,-r)}var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},t.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t>>>=0,!o){var r=Math.pow(2,8*n-1);P(this,e,t,n,r-1,-r)}var i=n-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},t.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,n){return H(this,e,t,!0,n)},t.prototype.writeFloatBE=function(e,t,n){return H(this,e,t,!1,n)},t.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},t.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},t.prototype.copy=function(e,n,o,r){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(o||(o=0),r||0===r||(r=this.length),n>=e.length&&(n=e.length),n||(n=0),r>0&&r<o&&(r=o),r===o)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-n<r-o&&(r=e.length-n+o);var i=r-o;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,o,r);else if(this===e&&o<n&&n<r)for(var s=i-1;s>=0;--s)e[s+n]=this[s+o];else Uint8Array.prototype.set.call(e,this.subarray(o,r),n);return i},t.prototype.fill=function(e,n,o,r){if("string"==typeof e){if("string"==typeof n?(r=n,n=0,o=this.length):"string"==typeof o&&(r=o,o=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!t.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(n<0||this.length<n||this.length<o)throw new RangeError("Out of range index");if(o<=n)return this;var s;if(n>>>=0,o=void 0===o?this.length:o>>>0,e||(e=0),"number"==typeof e)for(s=n;s<o;++s)this[s]=e;else{var a=t.isBuffer(e)?e:t.from(e,r),l=a.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<o-n;++s)this[s+n]=a[s%l]}return this};var M=/[^+/0-9A-Za-z-_]/g;function L(e,t){var n;t=t||1/0;for(var o=e.length,r=null,i=[],s=0;s<o;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===o){(t-=3)>-1&&i.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&i.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function j(e){return o.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,n,o){for(var r=0;r<o&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function F(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function W(e){return e!=e}var U=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var o=16*n,r=0;r<16;++r)t[o+r]=e[n]+e[r];return t}()}).call(this,e("buffer").Buffer)},{"base64-js":35,buffer:36,ieee754:41}],37:[function(e,t,n){var o={utf8:{stringToBytes:function(e){return o.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(o.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};t.exports=o},{}],38:[function(e,t,n){var o,r;o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,o=0;n<e.length;n++,o+=8)t[o>>>5]|=e[n]<<24-o%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var r=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?t.push(o.charAt(r>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,r=0;n<e.length;r=++n%4)0!=r&&t.push((o.indexOf(e.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|o.indexOf(e.charAt(n))>>>6-2*r);return t}},t.exports=r},{}],39:[function(e,t,i){(function(s,a){var l;l=function(){"use strict";function t(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,r=void 0,i=void 0,l=function(e,t){g[o]=e,g[o+1]=t,2===(o+=2)&&(i?i(m):C())},c="undefined"!=typeof window?window:void 0,u=c||{},h=u.MutationObserver||u.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==s&&"[object process]"==={}.toString.call(s),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(m,1)}}var g=new Array(1e3);function m(){for(var e=0;e<o;e+=2)(0,g[e])(g[e+1]),g[e]=void 0,g[e+1]=void 0;o=0}var y,v,b,w,C=void 0;function x(e,t){var n=this,o=new this.constructor(E);void 0===o[T]&&M(o);var r=n._state;if(r){var i=arguments[r-1];l((function(){return H(r,o,i,n._result)}))}else P(n,o,e,t);return o}function S(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(E);return R(t,e),t}d?C=function(){return s.nextTick(m)}:h?(v=0,b=new h(m),w=document.createTextNode(""),b.observe(w,{characterData:!0}),C=function(){w.data=v=++v%2}):f?((y=new MessageChannel).port1.onmessage=m,C=function(){return y.port2.postMessage(0)}):C=void 0===c&&"function"==typeof e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(r=e.runOnLoop||e.runOnContext)?function(){r(m)}:p()}catch(e){return p()}}():p();var T=Math.random().toString(36).substring(2);function E(){}var A=void 0;function k(e,n,o){n.constructor===e.constructor&&o===x&&n.constructor.resolve===S?function(e,t){1===t._state?D(e,t._result):2===t._state?_(e,t._result):P(t,void 0,(function(t){return R(e,t)}),(function(t){return _(e,t)}))}(e,n):void 0===o?D(e,n):t(o)?function(e,t,n){l((function(e){var o=!1,r=function(n,r,i,s){try{n.call(r,(function(n){o||(o=!0,t!==n?R(e,n):D(e,n))}),(function(t){o||(o=!0,_(e,t))}))}catch(e){return e}}(n,t,0,0,e._label);!o&&r&&(o=!0,_(e,r))}),e)}(e,n,o):D(e,n)}function R(e,t){if(e===t)_(e,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof(o=t),null===o||"object"!==r&&"function"!==r)D(e,t);else{var n=void 0;try{n=t.then}catch(t){return void _(e,t)}k(e,t,n)}var o,r}function O(e){e._onerror&&e._onerror(e._result),I(e)}function D(e,t){e._state===A&&(e._result=t,e._state=1,0!==e._subscribers.length&&l(I,e))}function _(e,t){e._state===A&&(e._state=2,e._result=t,l(O,e))}function P(e,t,n,o){var r=e._subscribers,i=r.length;e._onerror=null,r[i]=t,r[i+1]=n,r[i+2]=o,0===i&&e._state&&l(I,e)}function I(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var o=void 0,r=void 0,i=e._result,s=0;s<t.length;s+=3)o=t[s],r=t[s+n],o?H(n,o,r,i):r(i);e._subscribers.length=0}}function H(e,n,o,r){var i=t(o),s=void 0,a=void 0,l=!0;if(i){try{s=o(r)}catch(e){l=!1,a=e}if(n===s)return void _(n,new TypeError("A promises callback cannot return that same promise."))}else s=r;n._state!==A||(i&&l?R(n,s):!1===l?_(n,a):1===e?D(n,s):2===e&&_(n,s))}var N=0;function M(e){e[T]=N++,e._state=void 0,e._result=void 0,e._subscribers=[]}var L=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[T]||M(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&D(this.promise,this._result))):_(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===A&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,o=n.resolve;if(o===S){var r=void 0,i=void 0,s=!1;try{r=e.then}catch(e){s=!0,i=e}if(r===x&&e._state!==A)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===j){var a=new n(E);s?_(a,i):k(a,e,r),this._willSettleAt(a,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(o(e),t)},e.prototype._settledAt=function(e,t,n){var o=this.promise;o._state===A&&(this._remaining--,2===e?_(o,n):this._result[t]=n),0===this._remaining&&D(o,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;P(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},e}(),j=function(){function e(t){this[T]=N++,this._result=this._state=void 0,this._subscribers=[],E!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t((function(t){R(e,t)}),(function(t){_(e,t)}))}catch(t){_(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var n=this,o=n.constructor;return t(e)?n.then((function(t){return o.resolve(e()).then((function(){return t}))}),(function(t){return o.resolve(e()).then((function(){throw t}))})):n.then(e,e)},e}();return j.prototype.then=x,j.all=function(e){return new L(this,e).promise},j.race=function(e){var t=this;return n(e)?new t((function(n,o){for(var r=e.length,i=0;i<r;i++)t.resolve(e[i]).then(n,o)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},j.resolve=S,j.reject=function(e){var t=new this(E);return _(t,e),t},j._setScheduler=function(e){i=e},j._setAsap=function(e){l=e},j._asap=l,j.polyfill=function(){var e=void 0;if(void 0!==a)e=a;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=j},j.Promise=j,j},"object"==typeof i&&void 0!==t?t.exports=l():void 0===(r="function"==typeof(o=l)?o.call(i,n,i,t):o)||(t.exports=r)}).call(this,e("_process"),void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:44}],40:[function(e,t,n){"use strict";var o=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===r.call(e)},l=function(e){if(!e||"[object Object]"!==r.call(e))return!1;var t,n=o.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&o.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!i)return!1;for(t in e);return void 0===t||o.call(e,t)},c=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},u=function(e,t){if("__proto__"===t){if(!o.call(e,t))return;if(s)return s(e,t).value}return e[t]};t.exports=function e(){var t,n,o,r,i,s,h=arguments[0],d=1,f=arguments.length,p=!1;for("boolean"==typeof h&&(p=h,h=arguments[1]||{},d=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});d<f;++d)if(null!=(t=arguments[d]))for(n in t)o=u(h,n),h!==(r=u(t,n))&&(p&&r&&(l(r)||(i=a(r)))?(i?(i=!1,s=o&&a(o)?o:[]):s=o&&l(o)?o:{},c(h,{name:n,newValue:e(p,s,r)})):void 0!==r&&c(h,{name:n,newValue:r}));return h}},{}],41:[function(e,t,n){n.read=function(e,t,n,o,r){var i,s,a=8*r-o-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?r-1:0,d=n?-1:1,f=e[t+h];for(h+=d,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=256*i+e[t+h],h+=d,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=o;u>0;s=256*s+e[t+h],h+=d,u-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,o),i-=c}return(f?-1:1)*s*Math.pow(2,i-o)},n.write=function(e,t,n,o,r,i){var s,a,l,c=8*i-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=o?0:i-1,p=o?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(t*l-1)*Math.pow(2,r),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;e[n+f]=255&a,f+=p,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;e[n+f]=255&s,f+=p,s/=256,c-=8);e[n+f-p]|=128*g}},{}],42:[function(e,t,n){function o(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(o(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&o(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],43:[function(e,t,n){var o,r,i,s,a;o=e("crypt"),r=e("charenc").utf8,i=e("is-buffer"),s=e("charenc").bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):r.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var n=o.bytesToWords(e),l=8*e.length,c=1732584193,u=-271733879,h=-1732584194,d=271733878,f=0;f<n.length;f++)n[f]=16711935&(n[f]<<8|n[f]>>>24)|4278255360&(n[f]<<24|n[f]>>>8);n[l>>>5]|=128<<l%32,n[14+(l+64>>>9<<4)]=l;var p=a._ff,g=a._gg,m=a._hh,y=a._ii;for(f=0;f<n.length;f+=16){var v=c,b=u,w=h,C=d;c=p(c,u,h,d,n[f+0],7,-680876936),d=p(d,c,u,h,n[f+1],12,-389564586),h=p(h,d,c,u,n[f+2],17,606105819),u=p(u,h,d,c,n[f+3],22,-1044525330),c=p(c,u,h,d,n[f+4],7,-176418897),d=p(d,c,u,h,n[f+5],12,1200080426),h=p(h,d,c,u,n[f+6],17,-1473231341),u=p(u,h,d,c,n[f+7],22,-45705983),c=p(c,u,h,d,n[f+8],7,1770035416),d=p(d,c,u,h,n[f+9],12,-1958414417),h=p(h,d,c,u,n[f+10],17,-42063),u=p(u,h,d,c,n[f+11],22,-1990404162),c=p(c,u,h,d,n[f+12],7,1804603682),d=p(d,c,u,h,n[f+13],12,-40341101),h=p(h,d,c,u,n[f+14],17,-1502002290),c=g(c,u=p(u,h,d,c,n[f+15],22,1236535329),h,d,n[f+1],5,-165796510),d=g(d,c,u,h,n[f+6],9,-1069501632),h=g(h,d,c,u,n[f+11],14,643717713),u=g(u,h,d,c,n[f+0],20,-373897302),c=g(c,u,h,d,n[f+5],5,-701558691),d=g(d,c,u,h,n[f+10],9,38016083),h=g(h,d,c,u,n[f+15],14,-660478335),u=g(u,h,d,c,n[f+4],20,-405537848),c=g(c,u,h,d,n[f+9],5,568446438),d=g(d,c,u,h,n[f+14],9,-1019803690),h=g(h,d,c,u,n[f+3],14,-187363961),u=g(u,h,d,c,n[f+8],20,1163531501),c=g(c,u,h,d,n[f+13],5,-1444681467),d=g(d,c,u,h,n[f+2],9,-51403784),h=g(h,d,c,u,n[f+7],14,1735328473),c=m(c,u=g(u,h,d,c,n[f+12],20,-1926607734),h,d,n[f+5],4,-378558),d=m(d,c,u,h,n[f+8],11,-2022574463),h=m(h,d,c,u,n[f+11],16,1839030562),u=m(u,h,d,c,n[f+14],23,-35309556),c=m(c,u,h,d,n[f+1],4,-1530992060),d=m(d,c,u,h,n[f+4],11,1272893353),h=m(h,d,c,u,n[f+7],16,-155497632),u=m(u,h,d,c,n[f+10],23,-1094730640),c=m(c,u,h,d,n[f+13],4,681279174),d=m(d,c,u,h,n[f+0],11,-358537222),h=m(h,d,c,u,n[f+3],16,-722521979),u=m(u,h,d,c,n[f+6],23,76029189),c=m(c,u,h,d,n[f+9],4,-640364487),d=m(d,c,u,h,n[f+12],11,-421815835),h=m(h,d,c,u,n[f+15],16,530742520),c=y(c,u=m(u,h,d,c,n[f+2],23,-995338651),h,d,n[f+0],6,-198630844),d=y(d,c,u,h,n[f+7],10,1126891415),h=y(h,d,c,u,n[f+14],15,-1416354905),u=y(u,h,d,c,n[f+5],21,-57434055),c=y(c,u,h,d,n[f+12],6,1700485571),d=y(d,c,u,h,n[f+3],10,-1894986606),h=y(h,d,c,u,n[f+10],15,-1051523),u=y(u,h,d,c,n[f+1],21,-2054922799),c=y(c,u,h,d,n[f+8],6,1873313359),d=y(d,c,u,h,n[f+15],10,-30611744),h=y(h,d,c,u,n[f+6],15,-1560198380),u=y(u,h,d,c,n[f+13],21,1309151649),c=y(c,u,h,d,n[f+4],6,-145523070),d=y(d,c,u,h,n[f+11],10,-1120210379),h=y(h,d,c,u,n[f+2],15,718787259),u=y(u,h,d,c,n[f+9],21,-343485551),c=c+v>>>0,u=u+b>>>0,h=h+w>>>0,d=d+C>>>0}return o.endian([c,u,h,d])})._ff=function(e,t,n,o,r,i,s){var a=e+(t&n|~t&o)+(r>>>0)+s;return(a<<i|a>>>32-i)+t},a._gg=function(e,t,n,o,r,i,s){var a=e+(t&o|n&~o)+(r>>>0)+s;return(a<<i|a>>>32-i)+t},a._hh=function(e,t,n,o,r,i,s){var a=e+(t^n^o)+(r>>>0)+s;return(a<<i|a>>>32-i)+t},a._ii=function(e,t,n,o,r,i,s){var a=e+(n^(t|~o))+(r>>>0)+s;return(a<<i|a>>>32-i)+t},a._blocksize=16,a._digestsize=16,t.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=o.wordsToBytes(a(e,t));return t&&t.asBytes?n:t&&t.asString?s.bytesToString(n):o.bytesToHex(n)}},{charenc:37,crypt:38,"is-buffer":42}],44:[function(e,t,n){var o,r,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(e){if(o===setTimeout)return setTimeout(e,0);if((o===s||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(t){return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:s}catch(e){o=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],h=!1,d=-1;function f(){h&&c&&(h=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!h){var e=l(f);h=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new g(e,t)),1!==u.length||h||l(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],45:[function(e,t,i){!function(s,a){"use strict";"object"==typeof t&&t.exports&&"function"==typeof e?t.exports=a():void 0===(r="function"==typeof(o=a)?o.call(i,n,i,t):o)||(t.exports=r)}(0,(function(){"use strict";var e="undefined"!=typeof Promise?Promise:function(){return{then:function(){throw new Error("Queue.configure() before use Queue")}}},t=function(){};function n(e,t,n){this.options=n=n||{},this.pendingPromises=0,this.maxPendingPromises=void 0!==e?e:1/0,this.maxQueuedPromises=void 0!==t?t:1/0,this.queue=[]}return n.configure=function(t){e=t},n.prototype.add=function(n){var o=this;return new e((function(e,r,i){o.queue.length>=o.maxQueuedPromises?r(new Error("Queue limit reached")):(o.queue.push({promiseGenerator:n,resolve:e,reject:r,notify:i||t}),o._dequeue())}))},n.prototype.getPendingLength=function(){return this.pendingPromises},n.prototype.getQueueLength=function(){return this.queue.length},n.prototype._dequeue=function(){var t=this;if(this.pendingPromises>=this.maxPendingPromises)return!1;var n,o=this.queue.shift();if(!o)return this.options.onEmpty&&this.options.onEmpty(),!1;try{this.pendingPromises++,(n=o.promiseGenerator(),n&&"function"==typeof n.then?n:new e((function(e){e(n)}))).then((function(e){t.pendingPromises--,o.resolve(e),t._dequeue()}),(function(e){t.pendingPromises--,o.reject(e),t._dequeue()}),(function(e){o.notify(e)}))}catch(e){t.pendingPromises--,o.reject(e),t._dequeue()}return!0},n}))},{}],46:[function(e,t,n){"use strict";function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,i){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var l=1e3;i&&"number"==typeof i.maxKeys&&(l=i.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var h,d,f,p,g=e[u].replace(a,"%20"),m=g.indexOf(n);m>=0?(h=g.substr(0,m),d=g.substr(m+1)):(h=g,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),o(s,f)?r(s[f])?s[f].push(p):s[f]=[s[f],p]:s[f]=p}return s};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],47:[function(e,t,n){"use strict";var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(s(e),(function(s){var a=encodeURIComponent(o(s))+n;return r(e[s])?i(e[s],(function(e){return a+encodeURIComponent(o(e))})).join(t):a+encodeURIComponent(o(e[s]))})).join(t):a?encodeURIComponent(o(a))+n+encodeURIComponent(o(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],o=0;o<e.length;o++)n.push(t(e[o],o));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],48:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":46,"./encode":47}],49:[function(e,t,o){!function(e){"use strict";var i="function"!=typeof Math.imul||-5!==Math.imul(4294967295,5)?function(e,t){var n=65535&e,o=65535&t;return n*o+((e>>>16&65535)*o+n*(t>>>16&65535)<<16>>>0)|0}:Math.imul,s="function"==typeof String.prototype.repeat&&"xxx"==="x".repeat(3)?function(e,t){return e.repeat(t)}:function(e,t){for(var n="";t>0;)1&t&&(n+=e),t>>=1,e+=e;return n};function a(e){if(!(this instanceof a))return new a(e);if(null==e)e=a.engines.nativeMath;else if("function"!=typeof e)throw new TypeError("Expected engine to be a function, got "+typeof e);this.engine=e}var l,c,u=a.prototype;function h(e){return function(){return e}}function d(e,t){return 0===t?e:function(n){return e(n)+t}}function f(e){var t=+e;return t<0?Math.ceil(t):Math.floor(t)}function p(e,t){return e<0?Math.max(e+t,0):Math.min(e,t)}function g(){}a.engines={nativeMath:function(){return 4294967296*Math.random()|0},mt19937:function(e){function t(e){for(var t=0,n=0;(0|t)<227;t=t+1|0)n=2147483648&e[t]|2147483647&e[t+1|0],e[t]=e[t+397|0]^n>>>1^(1&n?2567483615:0);for(;(0|t)<623;t=t+1|0)n=2147483648&e[t]|2147483647&e[t+1|0],e[t]=e[t-227|0]^n>>>1^(1&n?2567483615:0);n=2147483648&e[623]|2147483647&e[0],e[623]=e[396]^n>>>1^(1&n?2567483615:0)}return function(){var n=new e(624),o=0,r=0;function s(){(0|o)>=624&&(t(n),o=0);var e=n[o];return o=o+1|0,r+=1,0|function(e){return e^=e>>>11,e^=e<<7&2636928640,(e^=e<<15&4022730752)^e>>>18}(e)}return s.getUseCount=function(){return r},s.discard=function(e){for(r+=e,(0|o)>=624&&(t(n),o=0);e-o>624;)e-=624-o,t(n),o=0;return o=o+e|0,s},s.seed=function(e){var t=0;n[0]=t=0|e;for(var a=1;a<624;a=a+1|0)n[a]=t=i(t^t>>>30,1812433253)+a|0;return o=624,r=0,s},s.seedWithArray=function(e){return s.seed(19650218),function(e,t){for(var n=1,o=0,r=t.length,s=0|Math.max(r,624),a=0|e[0];(0|s)>0;--s)e[n]=a=(e[n]^i(a^a>>>30,1664525))+(0|t[o])+(0|o)|0,++o,(0|(n=n+1|0))>623&&(e[0]=e[623],n=1),o>=r&&(o=0);for(s=623;(0|s)>0;--s)e[n]=a=(e[n]^i(a^a>>>30,1566083941))-n|0,(0|(n=n+1|0))>623&&(e[0]=e[623],n=1);e[0]=2147483648}(n,e),s},s.autoSeed=function(){return s.seedWithArray(a.generateEntropyArray())},s}}("function"==typeof Int32Array?Int32Array:Array),browserCrypto:"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof Int32Array?(l=null,c=128,function(){return c>=128&&(null===l&&(l=new Int32Array(128)),crypto.getRandomValues(l),c=0),0|l[c++]}):null},a.generateEntropyArray=function(){for(var e=[],t=a.engines.nativeMath,n=0;n<16;++n)e[n]=0|t();return e.push(0|(new Date).getTime()),e},a.int32=function(e){return 0|e()},u.int32=function(){return a.int32(this.engine)},a.uint32=function(e){return e()>>>0},u.uint32=function(){return a.uint32(this.engine)},a.uint53=function(e){return 4294967296*(2097151&e())+(e()>>>0)},u.uint53=function(){return a.uint53(this.engine)},a.uint53Full=function(e){for(;;){var t=0|e();if(!(2097152&t))return 4294967296*(2097151&t)+(e()>>>0);if(2097152==(4194303&t)&&0==(0|e()))return 9007199254740992}},u.uint53Full=function(){return a.uint53Full(this.engine)},a.int53=function(e){var t=0|e();return 4294967296*(2097151&t)+(e()>>>0)+(2097152&t?-9007199254740992:0)},u.int53=function(){return a.int53(this.engine)},a.int53Full=function(e){for(;;){var t=0|e();if(!(4194304&t))return 4294967296*(2097151&t)+(e()>>>0)+(2097152&t?-9007199254740992:0);if(4194304==(8388607&t)&&0==(0|e()))return 9007199254740992}},u.int53Full=function(){return a.int53Full(this.engine)},a.integer=function(){function e(e){return 0==(e+1&e)}function t(e,t){return function(n){var o=0;do{var r=0|n();o=4294967296*(2097151&r)+(n()>>>0)+(2097152&r?-9007199254740992:0)}while(o<e||o>t);return o}}return function(n,o){if(n=Math.floor(n),o=Math.floor(o),n<-9007199254740992||!isFinite(n))throw new RangeError("Expected min to be at least -9007199254740992");if(o>9007199254740992||!isFinite(o))throw new RangeError("Expected max to be at most 9007199254740992");var r=o-n;return r<=0||!isFinite(r)?h(n):4294967295===r?0===n?a.uint32:d(a.int32,n+2147483648):r<4294967295?d(function(t){return e(t)?(n=t,function(e){return e()&n}):function(e){var t=e+1,n=t*Math.floor(4294967296/t);return function(e){var o=0;do{o=e()>>>0}while(o>=n);return o%t}}(t);var n}(r),n):9007199254740991===r?d(a.uint53,n):r<9007199254740991?d(function(t){var n,o=t+1;if(0==(0|o)){var r=(o/4294967296|0)-1;if(e(r))return n=r,function(e){return 4294967296*(e()&n)+(e()>>>0)}}return function(e){var t=e*Math.floor(9007199254740992/e);return function(n){var o=0;do{o=4294967296*(2097151&n())+(n()>>>0)}while(o>=t);return o%e}}(o)}(r),n):o-1-n==9007199254740991?d(a.uint53Full,n):-9007199254740992===n&&9007199254740992===o?a.int53Full:-9007199254740992===n&&9007199254740991===o?a.int53:-9007199254740991===n&&9007199254740992===o?d(a.int53,1):9007199254740992===o?d(t(n-1,o-1),1):t(n,o)}}(),u.integer=function(e,t){return a.integer(e,t)(this.engine)},a.realZeroToOneInclusive=function(e){return a.uint53Full(e)/9007199254740992},u.realZeroToOneInclusive=function(){return a.realZeroToOneInclusive(this.engine)},a.realZeroToOneExclusive=function(e){return a.uint53(e)/9007199254740992},u.realZeroToOneExclusive=function(){return a.realZeroToOneExclusive(this.engine)},a.real=function(e,t,n){if(!isFinite(e))throw new RangeError("Expected left to be a finite number");if(!isFinite(t))throw new RangeError("Expected right to be a finite number");return d((o=n?a.realZeroToOneInclusive:a.realZeroToOneExclusive,1==(r=t-e)?o:0===r?function(){return 0}:function(e){return o(e)*r}),e);var o,r},u.real=function(e,t,n){return a.real(e,t,n)(this.engine)},a.bool=function(){function e(e){return 1==(1&e())}function t(e,t){return function(n){return e(n)<t}}return function(n,o){return null==o?null==n?e:function(e){if(e<=0)return h(!1);if(e>=1)return h(!0);var n=4294967296*e;return n%1==0?t(a.int32,n-2147483648|0):t(a.uint53,Math.round(9007199254740992*e))}(n):n<=0?h(!1):n>=o?h(!0):t(a.integer(0,o-1),n)}}(),u.bool=function(e,t){return a.bool(e,t)(this.engine)},a.pick=function(e,t,n,o){var r=t.length,i=null==n?0:p(f(n),r),s=void 0===o?r:p(f(o),r);if(!(i>=s))return t[a.integer(i,s-1)(e)]},u.pick=function(e,t,n){return a.pick(this.engine,e,t,n)};var m,y,v,b=Array.prototype.slice;a.picker=function(e,t,n){var o=b.call(e,t,n);if(!o.length)return g;var r=a.integer(0,o.length-1);return function(e){return o[r(e)]}},a.shuffle=function(e,t,n){var o=t.length;if(o){null==n&&(n=0);for(var r=o-1>>>0;r>n;--r){var i=a.integer(0,r)(e);if(r!==i){var s=t[r];t[r]=t[i],t[i]=s}}}return t},u.shuffle=function(e){return a.shuffle(this.engine,e)},a.sample=function(e,t,n){if(n<0||n>t.length||!isFinite(n))throw new RangeError("Expected sampleSize to be within 0 and the length of the population");if(0===n)return[];var o=b.call(t),r=o.length;if(r===n)return a.shuffle(e,o,0);var i=r-n;return a.shuffle(e,o,i-1).slice(i)},u.sample=function(e,t){return a.sample(this.engine,e,t)},a.die=function(e){return a.integer(1,e)},u.die=function(e){return a.die(e)(this.engine)},a.dice=function(e,t){var n=a.die(e);return function(e){var o=[];o.length=t;for(var r=0;r<t;++r)o[r]=n(e);return o}},u.dice=function(e,t){return a.dice(e,t)(this.engine)},a.uuid4=function(){function e(e,t){return s("0",t-e.length)+e}return function(t){var n=t()>>>0,o=0|t(),r=0|t(),i=t()>>>0;return e(n.toString(16),8)+"-"+e((65535&o).toString(16),4)+"-"+e((o>>4&4095|16384).toString(16),4)+"-"+e((16383&r|32768).toString(16),4)+"-"+e((r>>4&65535).toString(16),4)+e(i.toString(16),8)}}(),u.uuid4=function(){return a.uuid4(this.engine)},a.string=function(e){null==e&&(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-");var t=e.length;if(!t)throw new Error("Expected pool not to be an empty string");var n=a.integer(0,t-1);return function(t,o){for(var r="",i=0;i<o;++i){var s=n(t);r+=e.charAt(s)}return r}},u.string=function(e,t){return a.string(t)(this.engine,e)},a.hex=(m="0123456789abcdef",y=a.string(m),v=a.string(m.toUpperCase()),function(e){return e?v:y}),u.hex=function(e,t){return a.hex(t)(this.engine,e)},a.date=function(e,t){if(!(e instanceof Date))throw new TypeError("Expected start to be a Date, got "+typeof e);if(!(t instanceof Date))throw new TypeError("Expected end to be a Date, got "+typeof t);var n=a.integer(e.getTime(),t.getTime());return function(e){return new Date(n(e))}},u.date=function(e,t){return a.date(e,t)(this.engine)},void 0===(r=function(){return a}.call(o,n,o,t))||(t.exports=r)}()},{}],50:[function(e,t,n){!function(e){"use strict";if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,o="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),r="FormData"in e,i="ArrayBuffer"in e;if(i)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(e){return e&&DataView.prototype.isPrototypeOf(e)},l=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};p.prototype.append=function(e,t){e=h(e),t=d(t);var n=this.map[e];this.map[e]=n?n+","+t:t},p.prototype.delete=function(e){delete this.map[h(e)]},p.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},p.prototype.set=function(e,t){this.map[h(e)]=d(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:0,statusText:""});return e.type="error",e};var u=[301,302,303,307,308];x.redirect=function(e,t){if(-1===u.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},e.Headers=p,e.Request=w,e.Response=x,e.fetch=function(e,t){return new Promise((function(n,r){var i=new w(e,t),s=new XMLHttpRequest;s.onload=function(){var e,t,o={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),o=n.shift().trim();if(o){var r=n.join(":").trim();t.append(o,r)}})),t)};o.url="responseURL"in s?s.responseURL:o.headers.get("X-Request-URL");var r="response"in s?s.response:s.responseText;n(new x(r,o))},s.onerror=function(){r(new TypeError("Network request failed"))},s.ontimeout=function(){r(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&o&&(s.responseType="blob"),i.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),s.send(void 0===i._bodyInit?null:i._bodyInit)}))},e.fetch.polyfill=!0}function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function y(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(o&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(r&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(i&&o&&a(e))this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(e)&&!l(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=v(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var e,t,n,o=g(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,n=m(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),o=0;o<t.length;o++)n[o]=String.fromCharCode(t[o]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(C)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(e,t){var n,o,r=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(o=(n=t.method||this.method||"GET").toUpperCase(),c.indexOf(o)>-1?o:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function C(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),o=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(o),decodeURIComponent(r))}})),t}function x(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},{}],51:[function(e,t,n){t.exports={name:"nuxeo",description:"JavaScript client library for Nuxeo API",version:"3.17.0",main:"./lib/index.js",author:"Nuxeo (http://www.nuxeo.com/)",contributors:[{name:"Thomas Roger",email:"troger@nuxeo.com"}],license:"Apache-2.0",homepage:"https://github.com/nuxeo/nuxeo-js-client",repository:{type:"git",url:"git://github.com/nuxeo/nuxeo-js-client.git"},engines:{node:">= 4.9.1"},keywords:["nuxeo"],dependencies:{buffer:"^5.2.0","es6-promise":"^4.0.5",extend:"^3.0.0","form-data":"^2.1.2",md5:"^2.2.1","node-fetch-npm":"^2.0.2","promise-queue":"^2.2.2",querystring:"^0.2.0","random-js":"^1.0.8","whatwg-fetch":"^2.0.2"},devDependencies:{"@babel/cli":"^7.0.0","@babel/core":"^7.0.1","@babel/preset-env":"^7.0.0",babelify:"^10.0.0",browserify:"^16.2.2",chai:"^4.1.2","content-disposition":"^0.5.2","dirty-chai":"^2.0.1",eslint:"^5.3.0","eslint-config-airbnb-base":"^13.1.0","eslint-plugin-import":"^2.14.0",express:"^4.15.3","fs-extra":"^7.0.0",jsdoc:"3.5.5",jsonwebtoken:"^8.5.1",karma:"^3.0.0","karma-babel-preprocessor":"^8.0.0-beta.0","karma-browserify":"^5.0.1","karma-chai":"^0.1.0","karma-chrome-launcher":"^2.0.0","karma-firefox-launcher":"^1.0.0","karma-junit-reporter":"^2.0.0","karma-mocha":"^1.3.0","karma-sauce-launcher":"^1.2.0",mkdirp:"^0.5.1","mocha-jenkins-reporter":"^0.4.0",nyc:"^14.0.0",rimraf:"^2.6.2",watchify:"^3.7.0"},scripts:{clean:"rimraf dist",build:"yarn clean && yarn build:dist && yarn build:browser && yarn build:es5","build:dist":"node bin/build-dist.js","build:es5":"babel lib --out-dir dist/es5","build:browser":"mkdirp dist && browserify --entry lib/index-browserify.js --transform babelify --outfile dist/nuxeo.js",lint:"eslint 'lib' 'test'",pretest:"rimraf coverage && yarn lint",test:"yarn test:cover && yarn test:browser","test:cover":"nyc --include lib --all --reporter text --reporter lcov yarn test:node","test:node":"mocha --timeout 30000 --require test/helpers/setup.js --require test/helpers/setup-node.js 'test/helpers/setup-logging.js' 'test/**/*.spec.js'","test:browser":"karma start karma.conf.local.js",it:"yarn it:checkstyle && yarn build && yarn it:cover && yarn it:browser","it:checkstyle":"eslint 'lib' 'test' --format checkstyle --output-file ftest/target/checkstyle-result.xml","it:cover":"nyc --include lib --all --reporter cobertura yarn it:node","it:node":"mocha --timeout 30000 --require test/helpers/setup.js --require test/helpers/setup-node.js 'test/helpers/setup-logging.js' --reporter mocha-jenkins-reporter --reporter-options junit_report_path=ftest/target/$JS_REPORTS_DIR/test-results-node.xml,junit_report_stack=1 'test/**/*.spec.js'","it:browser":"karma start karma.conf.saucelabs.js",doc:"jsdoc -c jsdoc.json",release:"./bin/release.sh",start:"yarn build:browser && node examples/server.js"},browser:{"promise-queue":"promise-queue/lib/index.js","./lib/deps/fetch.js":"./lib/deps/fetch-browser.js","./lib/deps/promise.js":"./lib/deps/promise-browser.js","./lib/deps/form-data.js":"./lib/deps/form-data-browser.js","./lib/deps/utils/buffer.js":"./lib/deps/utils/buffer-browser.js","./es5/deps/fetch.js":"./es5/deps/fetch-browser.js","./es5/deps/promise.js":"./es5/deps/promise-browser.js","./es5/deps/form-data.js":"./es5/deps/form-data-browser.js","./es5/deps/utils/buffer.js":"./es5/deps/utils/buffer-browser.js"},"react-native":{"./lib/deps/fetch.js":"./lib/deps/fetch-react-native.js","./lib/deps/promise.js":"./lib/deps/promise.js"}}},{}]},{},[19])},20367:(e,t,n)=>{var o,r=n(95081);void 0===(o=r).fn.each2&&o.extend(o.fn,{each2:function(e){for(var t=o([0]),n=-1,r=this.length;++n<r&&(t.context=t[0]=this[n])&&!1!==e.call(t[0],n,t););return this}}),function(e,t){"use strict";if(window.Select2===t){var n,o,r,i,s,a,l,c,u={x:0,y:0},h={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case h.LEFT:case h.RIGHT:case h.UP:case h.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case h.SHIFT:case h.CTRL:case h.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},d={"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A",Ⱥ:"A",Ɐ:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C",Ȼ:"C",Ꜿ:"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D",Ꝺ:"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F",Ꝼ:"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G",Ꞡ:"G",Ᵹ:"G",Ꝿ:"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H",Ⱨ:"H",Ⱶ:"H",Ɥ:"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J",Ɉ:"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K",Ⱪ:"K",Ꝁ:"K",Ꝃ:"K",Ꝅ:"K",Ꞣ:"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L",Ƚ:"L",Ɫ:"L",Ⱡ:"L",Ꝉ:"L",Ꝇ:"L",Ꞁ:"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N",Ƞ:"N",Ɲ:"N",Ꞑ:"N",Ꞥ:"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O",Ꝋ:"O",Ꝍ:"O",Ƣ:"OI",Ꝏ:"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P",Ᵽ:"P",Ꝑ:"P",Ꝓ:"P",Ꝕ:"P","Ⓠ":"Q",Ｑ:"Q",Ꝗ:"Q",Ꝙ:"Q",Ɋ:"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꝛ:"R",Ꞧ:"R",Ꞃ:"R","Ⓢ":"S",Ｓ:"S",ẞ:"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S",Ȿ:"S",Ꞩ:"S",Ꞅ:"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T",Ⱦ:"T",Ꞇ:"T",Ꜩ:"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U",Ʉ:"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V",Ꝟ:"V",Ʌ:"V",Ꝡ:"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W",Ⱳ:"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y",Ɏ:"Y",Ỿ:"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z",Ɀ:"Z",Ⱬ:"Z",Ꝣ:"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a",ⱥ:"a",ɐ:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c",ȼ:"c",ꜿ:"c",ↄ:"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d",ꝺ:"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e",ɇ:"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f",ꝼ:"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g",ꞡ:"g",ᵹ:"g",ꝿ:"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h",ⱨ:"h",ⱶ:"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j",ɉ:"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k",ⱪ:"k",ꝁ:"k",ꝃ:"k",ꝅ:"k",ꞣ:"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l",ⱡ:"l",ꝉ:"l",ꞁ:"l",ꝇ:"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n",ꞑ:"n",ꞥ:"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o",ꝋ:"o",ꝍ:"o",ɵ:"o",ƣ:"oi",ȣ:"ou",ꝏ:"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p",ᵽ:"p",ꝑ:"p",ꝓ:"p",ꝕ:"p","ⓠ":"q",ｑ:"q",ɋ:"q",ꝗ:"q",ꝙ:"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r",ɍ:"r",ɽ:"r",ꝛ:"r",ꞧ:"r",ꞃ:"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s",ȿ:"s",ꞩ:"s",ꞅ:"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t",ⱦ:"t",ꞇ:"t",ꜩ:"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v",ꝟ:"v",ʌ:"v",ꝡ:"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w",ⱳ:"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y",ɏ:"y",ỿ:"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z",ɀ:"z",ⱬ:"z",ꝣ:"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ω:"ω",ς:"σ"};a=e(document),c=1,i=function(){return c++},n=P(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var o,r,s,a,c=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+i()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e("body"),x(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(O(n.containerCss,this.opts.element)),this.container.addClass(O(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",C),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),x(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(O(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",C),this.results=o=this.container.find(c),this.search=r=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",C),this.results.on("mousemove",(function(n){var o=u;o!==t&&o.x===n.pageX&&o.y===n.pageY||e(n.target).trigger("mousemove-filtered",n)})),this.dropdown.on("mousemove-filtered",c,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",c,this.bind((function(e){this._touchEvent=!0,this.highlightUnderEvent(e)}))),this.dropdown.on("touchmove",c,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",c,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind((function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}))),s=this.results,a=w(80,(function(e){s.trigger("scroll-debounced",e)})),s.on("scroll",(function(e){g(e.target,s.get())>=0&&a(e)})),this.dropdown.on("scroll-debounced",c,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",(function(e){e.stopPropagation()})),e(this.dropdown).on("change",".select2-input",(function(e){e.stopPropagation()})),e.fn.mousewheel&&o.mousewheel((function(e,t,n,r){var i=o.scrollTop();r>0&&i-r<=0?(o.scrollTop(0),C(e)):r<0&&o.get(0).scrollHeight-o.scrollTop()+r<=o.height()&&(o.scrollTop(o.get(0).scrollHeight-o.height()),C(e))})),b(r),r.on("keyup-change input paste",this.bind(this.updateResults)),r.on("focus",(function(){r.addClass("select2-focused")})),r.on("blur",(function(){r.removeClass("select2-focused")})),this.dropdown.on("mouseup",c,this.bind((function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))}))),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(e){e.stopPropagation()})),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var h=n.element.prop("disabled");h===t&&(h=!1),this.enable(!h);var d=n.element.prop("readonly");d===t&&(d=!1),this.readonly(d),l=l||function(){var t=e("<div class='select2-measure-scrollbar'></div>");t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),o=this;this.close(),e.length&&e[0].detachEvent&&e.each((function(){this.detachEvent("onpropertychange",o._sync)})),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),_.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:m(e.attr("locked"),"locked")||m(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var o,r,s,a,l=this;if("select"===(o=n.element).get(0).tagName.toLowerCase()&&(this.select=r=n.element),r&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),"function"!=typeof(n=e.extend({},{populateResults:function(o,r,s){var a,c=this.opts.id,u=this.liveRegion;(a=function(o,r,h){var d,f,p,g,m,y,v,b,w,C,x=[];for(d=0,f=(o=n.sortResults(o,r,s)).length;d<f;d+=1)g=!(m=!0===(p=o[d]).disabled)&&c(p)!==t,y=p.children&&p.children.length>0,(v=e("<li></li>")).addClass("select2-results-dept-"+h),v.addClass("select2-result"),v.addClass(g?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),y&&v.addClass("select2-result-with-children"),v.addClass(l.opts.formatResultCssClass(p)),v.attr("role","presentation"),(b=e(document.createElement("div"))).addClass("select2-result-label"),b.attr("id","select2-result-label-"+i()),b.attr("role","option"),(C=n.formatResult(p,b,s,l.opts.escapeMarkup))!==t&&(b.html(C),v.append(b)),y&&((w=e("<ul></ul>")).addClass("select2-result-sub"),a(p.children,w,h+1),v.append(w)),v.data("select2-data",p),x.push(v[0]);r.append(x),u.text(n.formatMatches(o.length))})(r,o,0)}},e.fn.select2.defaults,n)).id&&(s=n.id,n.id=function(e){return e[s]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(r?(n.query=this.bind((function(e){var n,r,i,s={results:[],more:!1},a=e.term;i=function(t,n){var o;t.is("option")?e.matcher(a,t.text(),t)&&n.push(l.optionToData(t)):t.is("optgroup")&&(o=l.optionToData(t),t.children().each2((function(e,t){i(t,o.children)})),o.children.length>0&&n.push(o))},n=o.children(),this.getPlaceholder()!==t&&n.length>0&&(r=this.getPlaceholderOption())&&(n=n.not(r)),n.each2((function(e,t){i(t,s.results)})),e.callback(s)})),n.id=function(e){return e.id}):"query"in n||("ajax"in n?((a=n.element.data("ajax-url"))&&a.length>0&&(n.ajax.url=a),n.query=E.call(n.element,n.ajax)):"data"in n?n.query=A(n.data):"tags"in n&&(n.query=k(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,o){var r=[];e(y(t.val(),n.separator)).each((function(){var t={id:this,text:this},o=n.tags;e.isFunction(o)&&(o=o()),e(o).each((function(){if(m(this.id,t.id))return t=this,!1})),r.push(t)})),o(r)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,o=this.opts.element,r=this;o.on("change.select2",this.bind((function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),this._sync=this.bind((function(){var e=o.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=o.prop("readonly");n===t&&(n=!1),this.readonly(n),x(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(O(this.opts.containerCssClass,this.opts.element)),x(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(O(this.opts.dropdownCssClass,this.opts.element))})),o.length&&o[0].attachEvent&&o.each((function(){this.attachEvent("onpropertychange",r._sync)})),(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n((function(t){e.each(t,r._sync)})),this.propertyObserver.observe(o.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,o,r,i,s=this.dropdown,a=this.container.offset(),c=this.container.outerHeight(!1),u=this.container.outerWidth(!1),h=s.outerHeight(!1),d=e(window),f=d.width(),p=d.height(),g=d.scrollLeft()+f,m=d.scrollTop()+p,y=a.top+c,v=a.left,b=y+h<=m,w=a.top-h>=d.scrollTop(),C=s.outerWidth(!1),x=v+C<=g;s.hasClass("select2-drop-above")?(n=!0,!w&&b&&(o=!0,n=!1)):(n=!1,!b&&w&&(o=!0,n=!0)),o&&(s.hide(),a=this.container.offset(),c=this.container.outerHeight(!1),u=this.container.outerWidth(!1),h=s.outerHeight(!1),g=d.scrollLeft()+f,m=d.scrollTop()+p,y=a.top+c,x=(v=a.left)+(C=s.outerWidth(!1))<=g,s.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(i=e(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),(C=s.outerWidth(!1)+(i.scrollHeight===i.clientHeight?0:l.width))>u?u=C:C=u,h=s.outerHeight(!1),x=v+C<=g):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(y-=(t=this.body.offset()).top,v-=t.left),x||(v=a.left+this.container.outerWidth(!1)-C),r={left:v,width:u},n?(r.top=a.top-h,r.bottom="auto",this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above")):(r.top=y,r.bottom="auto",this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),r=e.extend(r,O(this.opts.dropdownCss,this.opts.element)),s.css(r)},shouldOpen:function(){var t;return!this.opened()&&!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),a.on("mousemove.select2Event",(function(e){u.x=e.pageX,u.y=e.pageY})),!0)},opening:function(){var t,n=this.containerEventName,o="scroll."+n,r="resize."+n,i="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0==(t=e("#select2-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",(function(n){f(t);var o,r=e("#select2-drop");r.length>0&&((o=r.data("select2")).opts.selectOnBlur&&o.selectHighlighted({noFocus:!0}),o.close(),n.preventDefault(),n.stopPropagation())}))),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var s=this;this.container.parents().add(window).each((function(){e(this).on(r+" "+o+" "+i,(function(e){s.opened()&&s.positionDropdown()}))}))},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,o="resize."+t,r="orientationchange."+t;this.container.parents().add(window).each((function(){e(this).off(n).off(o).off(r)})),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),a.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return O(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,o,r,i,s,a,l,c=this.results;(n=this.highlight())<0||(0!=n?(t=this.findHighlightableChoices().find(".select2-result-label"),r=(l=((o=e(t[n])).offset()||{}).top||0)+o.outerHeight(!0),n===t.length-1&&(a=c.find("li.select2-more-results")).length>0&&(r=a.offset().top+a.outerHeight(!0)),r>(i=c.offset().top+c.outerHeight(!0))&&c.scrollTop(c.scrollTop()+(r-i)),(s=l-c.offset().top)<0&&"none"!=o.css("display")&&c.scrollTop(c.scrollTop()+s)):c.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),o=this.highlight();o>-1&&o<n.length;){var r=e(n[o+=t]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(o);break}}},highlight:function(t){var n,o,r=this.findHighlightableChoices();if(0===arguments.length)return g(r.filter(".select2-highlighted")[0],r.get());t>=r.length&&(t=r.length-1),t<0&&(t=0),this.removeHighlight(),(n=e(r[t])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),(o=n.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(o),choice:o})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var o=this.findHighlightableChoices();this.highlight(o.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n=this.resultsPage+1,o=this,r=this.search.val(),i=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:r,page:n,context:i,matcher:this.opts.matcher,callback:this.bind((function(s){o.opened()&&(o.opts.populateResults.call(this,e,s.results,{term:r,page:n,context:i}),o.postprocessResults(s,!1,!1),!0===s.more?(t.detach().appendTo(e).text(O(o.opts.formatLoadMore,o.opts.element,n+1)),window.setTimeout((function(){o.loadMoreIfNeeded()}),10)):t.remove(),o.positionDropdown(),o.resultsPage=n,o.context=s.context,this.opts.element.trigger({type:"select2-loaded",items:s}))}))}))},tokenize:function(){},updateResults:function(n){var o,r,i,s=this.search,a=this.results,l=this.opts,c=this,u=s.val(),h=e.data(this.container,"select2-last-term");if((!0===n||!h||!m(u,h))&&(e.data(this.container,"select2-last-term",u),!0===n||!1!==this.showSearchInput&&this.opened())){i=++this.queryCount;var d=this.getMaximumSelectionSize();if(!(d>=1&&(o=this.data(),e.isArray(o)&&o.length>=d&&R(l.formatSelectionTooBig,"formatSelectionTooBig"))))return s.val().length<l.minimumInputLength?(R(l.formatInputTooShort,"formatInputTooShort")?p("<li class='select2-no-results'>"+O(l.formatInputTooShort,l.element,s.val(),l.minimumInputLength)+"</li>"):p(""),void(n&&this.showSearch&&this.showSearch(!0))):void(l.maximumInputLength&&s.val().length>l.maximumInputLength?R(l.formatInputTooLong,"formatInputTooLong")?p("<li class='select2-no-results'>"+O(l.formatInputTooLong,l.element,s.val(),l.maximumInputLength)+"</li>"):p(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&p("<li class='select2-searching'>"+O(l.formatSearching,l.element)+"</li>"),s.addClass("select2-active"),this.removeHighlight(),(r=this.tokenize())!=t&&null!=r&&s.val(r),this.resultsPage=1,l.query({element:l.element,term:s.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind((function(o){var r;i==this.queryCount&&(this.opened()?o.hasError!==t&&R(l.formatAjaxError,"formatAjaxError")?p("<li class='select2-ajax-error'>"+O(l.formatAjaxError,l.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>"):(this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&""!==s.val()&&(r=this.opts.createSearchChoice.call(c,s.val(),o.results))!==t&&null!==r&&c.id(r)!==t&&null!==c.id(r)&&0===e(o.results).filter((function(){return m(c.id(this),c.id(r))})).length&&this.opts.createSearchChoicePosition(o.results,r),0===o.results.length&&R(l.formatNoMatches,"formatNoMatches")?p("<li class='select2-no-results'>"+O(l.formatNoMatches,l.element,s.val())+"</li>"):(a.empty(),c.opts.populateResults.call(this,a,o.results,{term:s.val(),page:this.resultsPage,context:null}),!0===o.more&&R(l.formatLoadMore,"formatLoadMore")&&(a.append("<li class='select2-more-results'>"+l.escapeMarkup(O(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout((function(){c.loadMoreIfNeeded()}),10)),this.postprocessResults(o,n),f(),this.opts.element.trigger({type:"select2-loaded",items:o}))):this.search.removeClass("select2-active"))}))})));p("<li class='select2-selection-limit'>"+O(l.formatSelectionTooBig,l.element,d)+"</li>")}function f(){s.removeClass("select2-active"),c.positionDropdown(),a.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?c.liveRegion.text(a.text()):c.liveRegion.text(c.opts.formatMatches(a.find(".select2-result-selectable").length))}function p(e){a.html(e),f()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var e;(e=this.search)[0]!==document.activeElement&&window.setTimeout((function(){var t,n=e[0],o=e.val().length;e.focus(),(n.offsetWidth>0||n.offsetHeight>0)&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(o,o):n.createTextRange&&((t=n.createTextRange()).collapse(!1),t.select()))}),0)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var t=this.highlight(),n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){var n=function(){var n,o,r,i,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((n=this.opts.element.attr("style"))!==t)for(i=0,s=(o=n.split(";")).length;i<s;i+=1)if(null!==(r=o[i].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&r.length>=1)return r[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width")).indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==n&&this.container.css("width",n)}}),o=P(n,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,o,r;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(n=this.search.get(0)).createTextRange?((o=n.createTextRange()).collapse(!1),o.select()):n.setSelectionRange&&(r=this.search.val().length,n.setSelectionRange(r,r))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),_.call(this,"selection","focusser")},initContainer:function(){var t,n,o=this.container,r=this.dropdown,s=i();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=o.find(".select2-choice"),this.focusser=o.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+s),this.focusser.attr("aria-labelledby","select2-chosen-"+s),this.results.attr("id","select2-results-"+s),this.search.attr("aria-owns","select2-results-"+s),this.focusser.attr("id","s2id_autogen"+s),n=e("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which!==h.PAGE_UP&&e.which!==h.PAGE_DOWN)switch(e.which){case h.UP:case h.DOWN:return this.moveHighlight(e.which===h.UP?-1:1),void C(e);case h.ENTER:return this.selectHighlighted(),void C(e);case h.TAB:return void this.selectHighlighted({noFocus:!0});case h.ESC:return this.cancel(e),void C(e)}else C(e)}))),this.search.on("blur",this.bind((function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind((function(){this.opened()&&this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&e.which!==h.TAB&&!h.isControl(e)&&!h.isFunctionKey(e)&&e.which!==h.ESC){if(!1!==this.opts.openOnEnter||e.which!==h.ENTER){if(e.which==h.DOWN||e.which==h.UP||e.which==h.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void C(e)}return e.which==h.DELETE||e.which==h.BACKSPACE?(this.opts.allowClear&&this.clear(),void C(e)):void 0}C(e)}}))),b(this.focusser),this.focusser.on("keyup-change input",this.bind((function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}}))),t.on("mousedown touchstart","abbr",this.bind((function(e){this.isInterfaceEnabled()&&(this.clear(),function(e){e.preventDefault(),e.stopImmediatePropagation()}(e),this.close(),this.selection.focus())}))),t.on("mousedown touchstart",this.bind((function(n){f(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),C(n)}))),r.on("mousedown touchstart",this.bind((function(){this.opts.shouldFocusInput(this)&&this.search.focus()}))),t.on("focus",this.bind((function(e){C(e)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var o=e.Event("select2-clearing");if(this.opts.element.trigger(o),o.isDefaultPrevented())return;var r=this.getPlaceholderOption();this.opts.element.val(r?r.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(n,e.search.val()))}))}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==t&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var o=e.find("option").filter((function(){return this.selected&&!this.disabled}));t(n.optionToData(o))}:"data"in t&&(t.initSelection=t.initSelection||function(n,o){var r=n.val(),i=null;t.query({matcher:function(e,n,o){var s=m(r,t.id(o));return s&&(i=o),s},callback:e.isFunction(o)?function(){o(i)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var o=0,r=this;if(this.findHighlightableChoices().each2((function(e,t){if(m(r.id(t.data("select2-data")),r.opts.element.val()))return o=e,!1})),!1!==n&&(!0===t&&o>=0?this.highlight(o):this.highlight(0)),!0===t){var i=this.opts.minimumResultsForSearch;i>=0&&this.showSearch(D(e.results)>=i)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),o=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),m(n,this.id(e))||this.triggerChange({added:e,removed:o})}},updateSelection:function(e){var n,o,r=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),r.empty(),null!==e&&(n=this.opts.formatSelection(e,r,this.opts.escapeMarkup)),n!==t&&r.append(n),(o=this.opts.formatSelectionCssClass(e,r))!==t&&r.addClass(o),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,o=null,r=this,i=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter((function(){return this.selected})).each2((function(e,t){return o=r.optionToData(t),!1})),this.updateSelection(o),this.setPlaceholder(),n&&this.triggerChange({added:o,removed:i});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,(function(e){r.opts.element.val(e?r.id(e):""),r.updateSelection(e),r.setPlaceholder(),n&&r.triggerChange({added:e,removed:i})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,o=!1;if(0===arguments.length)return(n=this.selection.data("select2-data"))==t&&(n=null),n;arguments.length>1&&(o=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),o&&this.triggerChange({added:e,removed:n})):this.clear(o)}}),r=P(n,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var o=[];e.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(e,t){o.push(n.optionToData(t))})),t(o)}:"data"in t&&(t.initSelection=t.initSelection||function(n,o){var r=y(n.val(),t.separator),i=[];t.query({matcher:function(n,o,s){var a=e.grep(r,(function(e){return m(e,t.id(s))})).length;return a&&i.push(s),a},callback:e.isFunction(o)?function(){for(var e=[],n=0;n<r.length;n++)for(var s=r[n],a=0;a<i.length;a++){var l=i[a];if(m(s,t.id(l))){e.push(l),i.splice(a,1);break}}o(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),_.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var o=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",(function(t){o.search[0].focus(),o.selectChoice(e(this))})),this.search.attr("id","s2id_autogen"+i()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind((function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(n){if(this.isInterfaceEnabled()){++this.keydowns;var o=t.find(".select2-search-choice-focus"),r=o.prev(".select2-search-choice:not(.select2-locked)"),i=o.next(".select2-search-choice:not(.select2-locked)"),s=function(t){var n=0,o=0;if("selectionStart"in(t=e(t)[0]))n=t.selectionStart,o=t.selectionEnd-n;else if("selection"in document){t.focus();var r=document.selection.createRange();o=document.selection.createRange().text.length,r.moveStart("character",-t.value.length),n=r.text.length-o}return{offset:n,length:o}}(this.search);if(o.length&&(n.which==h.LEFT||n.which==h.RIGHT||n.which==h.BACKSPACE||n.which==h.DELETE||n.which==h.ENTER)){var a=o;return n.which==h.LEFT&&r.length?a=r:n.which==h.RIGHT?a=i.length?i:null:n.which===h.BACKSPACE?this.unselect(o.first())&&(this.search.width(10),a=r.length?r:i):n.which==h.DELETE?this.unselect(o.first())&&(this.search.width(10),a=i.length?i:null):n.which==h.ENTER&&(a=null),this.selectChoice(a),C(n),void(a&&a.length||this.open())}if((n.which===h.BACKSPACE&&1==this.keydowns||n.which==h.LEFT)&&0==s.offset&&!s.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void C(n);if(this.selectChoice(null),this.opened())switch(n.which){case h.UP:case h.DOWN:return this.moveHighlight(n.which===h.UP?-1:1),void C(n);case h.ENTER:return this.selectHighlighted(),void C(n);case h.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case h.ESC:return this.cancel(n),void C(n)}if(n.which!==h.TAB&&!h.isControl(n)&&!h.isFunctionKey(n)&&n.which!==h.BACKSPACE&&n.which!==h.ESC){if(n.which===h.ENTER){if(!1===this.opts.openOnEnter)return;if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return}this.open(),n.which!==h.PAGE_UP&&n.which!==h.PAGE_DOWN||C(n),n.which===h.ENTER&&C(n)}}}))),this.search.on("keyup",this.bind((function(e){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))}))),this.container.on("click",n,this.bind((function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))}))),this.container.on("focus",n,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())}))}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],o=[],r=this;e(t).each((function(){g(r.id(this),n)<0&&(n.push(r.id(this)),o.push(this))})),t=o,this.selection.find(".select2-search-choice").remove(),e(t).each((function(){r.addSelectedChoice(this)})),r.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var o,r,i=!n.locked,s=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=i?s:a,c=this.id(n),u=this.getVal();(o=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup))!=t&&l.find("div").replaceWith("<div>"+o+"</div>"),(r=this.opts.formatSelectionCssClass(n,l.find("div")))!=t&&l.addClass(r),i&&l.find(".select2-search-choice-close").on("mousedown",C).on("click dblclick",this.bind((function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),C(t),this.close(),this.focusSearch())}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),l.data("select2-data",n),l.insertBefore(this.searchContainer),u.push(c),this.setVal(u)},unselect:function(t){var n,o,r=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var i=e.Event("select2-removing");if(i.val=this.id(n),i.choice=n,this.opts.element.trigger(i),i.isDefaultPrevented())return!1;for(;(o=g(this.id(n),r))>=0;)r.splice(o,1),this.setVal(r),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var o=this.getVal(),r=this.results.find(".select2-result"),i=this.results.find(".select2-result-with-children"),s=this;r.each2((function(e,t){g(s.id(t.data("select2-data")),o)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))})),i.each2((function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")})),-1==this.highlight()&&!1!==n&&s.highlight(0),!this.opts.createSearchChoice&&!r.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&R(s.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+O(s.opts.formatNoMatches,s.opts.element,s.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-v(this.search)},resizeSearch:function(){var t,n,o,r,i=v(this.search);t=function(t){if(!s){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);(s=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e("body").append(s)}return s.text(t.val()),s.width()}(this.search)+10,n=this.search.offset().left,(r=(o=this.selection.width())-(n-this.selection.offset().left)-i)<t&&(r=o-i),r<40&&(r=o-i),r<=0&&(r=t),this.search.width(Math.floor(r))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:y(e=this.opts.element.val(),this.opts.separator)},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each((function(){g(this,n)<0&&n.push(this)})),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var n=0;n<t.length;n++)for(var o=0;o<e.length;o++)m(this.opts.id(t[n]),this.opts.id(e[o]))&&(t.splice(n,1),n>0&&n--,e.splice(o,1),o--);return{added:t,removed:e}},val:function(n,o){var r,i=this;if(0===arguments.length)return this.getVal();if((r=this.data()).length||(r=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(o&&this.triggerChange({added:this.data(),removed:r}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),o&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(t){var n=e.map(t,i.id);i.setVal(n),i.updateSelection(t),i.clearSearch(),o&&i.triggerChange(i.buildChangeDetails(r,i.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){t.push(n.opts.id(e(this).data("select2-data")))})),this.setVal(t),this.triggerChange()},data:function(t,n){var o,r,i=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map((function(){return e(this).data("select2-data")})).get();r=this.data(),t||(t=[]),o=e.map(t,(function(e){return i.opts.id(e)})),this.setVal(o),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(r,this.data()))}}),e.fn.select2=function(){var n,o,r,i,s,a=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],u=["val","data"],h={search:"externalSearch"};return this.each((function(){if(0===a.length||"object"==typeof a[0])(n=0===a.length?{}:e.extend({},a[0])).element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?s=n.element.prop("multiple"):(s=n.multiple||!1,"tags"in n&&(n.multiple=s=!0)),(o=s?new window.Select2.class.multi:new window.Select2.class.single).init(n);else{if("string"!=typeof a[0])throw"Invalid arguments to select2 plugin: "+a;if(g(a[0],l)<0)throw"Unknown method: "+a[0];if(i=t,(o=e(this).data("select2"))===t)return;if("container"===(r=a[0])?i=o.container:"dropdown"===r?i=o.dropdown:(h[r]&&(r=h[r]),i=o[r].apply(o,a.slice(1))),g(a[0],c)>=0||g(a[0],u)>=0&&1==a.length)return!1}})),i===t?this:i},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,o){var r=[];return S(e.text,n.term,r,o),r.join("")},formatSelection:function(e,n,o){return e?o(e.text):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,n){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},matcher:function(e,t){return p(""+t).toUpperCase().indexOf(p(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,n,o,r){var i,s,a,l,c,u=e,h=!1;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return t;for(;;){for(s=-1,a=0,l=r.tokenSeparators.length;a<l&&(c=r.tokenSeparators[a],!((s=e.indexOf(c))>=0));a++);if(s<0)break;if(i=e.substring(0,s),e=e.substring(s+c.length),i.length>0&&(i=r.createSearchChoice.call(this,i,n))!==t&&null!==i&&r.id(i)!==t&&null!==r.id(i)){for(h=!1,a=0,l=n.length;a<l;a++)if(m(r.id(i),r.id(n[a]))){h=!0;break}h||o(i)}}return u!==e?e:void 0},escapeMarkup:T,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!(("ontouchstart"in window||navigator.msMaxTouchPoints>0)&&e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results…"},formatSearching:function(){return"Searching…"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:E,local:A,tags:k},util:{debounce:w,markMatch:S,escapeMarkup:T,stripDiacritics:p},class:{abstract:n,single:o,multi:r}}}function f(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function p(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return d[e]||e}))}function g(e,t){for(var n=0,o=t.length;n<o;n+=1)if(m(e,t[n]))return n;return-1}function m(e,n){return e===n||e!==t&&n!==t&&null!==e&&null!==n&&(e.constructor===String?e+""==n+"":n.constructor===String&&n+""==e+"")}function y(t,n){var o,r,i;if(null===t||t.length<1)return[];for(r=0,i=(o=t.split(n)).length;r<i;r+=1)o[r]=e.trim(o[r]);return o}function v(e){return e.outerWidth(!1)-e.width()}function b(n){var o="keyup-change-value";n.on("keydown",(function(){e.data(n,o)===t&&e.data(n,o,n.val())})),n.on("keyup",(function(){var r=e.data(n,o);r!==t&&n.val()!==r&&(e.removeData(n,o),n.trigger("keyup-change"))}))}function w(e,n,o){var r;return o=o||t,function(){var t=arguments;window.clearTimeout(r),r=window.setTimeout((function(){n.apply(o,t)}),e)}}function C(e){e.preventDefault(),e.stopPropagation()}function x(t,n,o){var r,i,s=[];(r=e.trim(t.attr("class")))&&e((r=""+r).split(/\s+/)).each2((function(){0===this.indexOf("select2-")&&s.push(this)})),(r=e.trim(n.attr("class")))&&e((r=""+r).split(/\s+/)).each2((function(){0!==this.indexOf("select2-")&&(i=o(this))&&s.push(i)})),t.attr("class",s.join(" "))}function S(e,t,n,o){var r=p(e.toUpperCase()).indexOf(p(t.toUpperCase())),i=t.length;r<0?n.push(o(e)):(n.push(o(e.substring(0,r))),n.push("<span class='select2-match'>"),n.push(o(e.substring(r,r+i))),n.push("</span>"),n.push(o(e.substring(r+i,e.length))))}function T(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))}function E(n){var o,r=null,i=n.quietMillis||100,s=n.url,a=this;return function(l){window.clearTimeout(o),o=window.setTimeout((function(){var o=n.data,i=s,c=n.transport||e.fn.select2.ajaxDefaults.transport,u={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},h=e.extend({},e.fn.select2.ajaxDefaults.params,u);o=o?o.call(a,l.term,l.page,l.context):null,i="function"==typeof i?i.call(a,l.term,l.page,l.context):i,r&&"function"==typeof r.abort&&r.abort(),n.params&&(e.isFunction(n.params)?e.extend(h,n.params.call(a)):e.extend(h,n.params)),e.extend(h,{url:i,dataType:n.dataType,data:o,success:function(e){var t=n.results(e,l.page,l);l.callback(t)},error:function(e,t,n){var o={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};l.callback(o)}}),r=c.call(a,h)}),i)}}function A(t){var n,o,r=t,i=function(e){return""+e.text};e.isArray(r)&&(r={results:o=r}),!1===e.isFunction(r)&&(o=r,r=function(){return o});var s=r();return s.text&&(i=s.text,e.isFunction(i)||(n=s.text,i=function(e){return e[n]})),function(t){var n,o=t.term,s={results:[]};""!==o?(n=function(r,s){var a,l;if((r=r[0]).children){for(l in a={},r)r.hasOwnProperty(l)&&(a[l]=r[l]);a.children=[],e(r.children).each2((function(e,t){n(t,a.children)})),(a.children.length||t.matcher(o,i(a),r))&&s.push(a)}else t.matcher(o,i(r),r)&&s.push(r)},e(r().results).each2((function(e,t){n(t,s.results)})),t.callback(s)):t.callback(r())}}function k(n){var o=e.isFunction(n);return function(r){var i=r.term,s={results:[]},a=o?n(r):n;e.isArray(a)&&(e(a).each((function(){var e=this.text!==t,n=e?this.text:this;(""===i||r.matcher(i,n))&&s.results.push(e?this:{id:this,text:this})})),r.callback(s))}}function R(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function O(t,n){if(e.isFunction(t)){var o=Array.prototype.slice.call(arguments,2);return t.apply(n,o)}return t}function D(t){var n=0;return e.each(t,(function(e,t){t.children?n+=D(t.children):n++})),n}function _(){var t=this;e.each(arguments,(function(e,n){t[n].remove(),t[n]=null}))}function P(t,n){var o=function(){};return(o.prototype=new t).constructor=o,o.prototype.parent=t.prototype,o.prototype=e.extend(o.prototype,n),o}}(r)},74456:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(36761),r=n.n(o)()((function(e){return e[1]}));r.push([e.id,'/* Nuxeo styles */\nhtml, body {\n  box-sizing: border-box;\n  font-size: 14px;\n  font-family: Arial, sans-serif;\n  height: 100%;\n  margin: 0; }\n\n#header {\n    background-color: #f8f9fb;\n    border-bottom: 1px solid #e7e7e7;\n    color: #0b447f;\n    font-family: "Lucida Grande",Arial,Helvetica,Geneva,sans-serif;\n    font-size: 1.5em;\n    font-weight: bold;\n    padding: 0.8em 1.5em;\n    top: 0;\n}\n\n#queryArea {\n  padding: 1em }\n\n#queryArea #query {\n  border: 1px solid #c6c6c6;\n  border-radius: 2px;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.07) inset;\n  box-sizing: border-box;\n  display: inline-block;\n  font-family: "Lucida Grande",Arial,Helvetica,Geneva,sans-serif;\n  font-size: 1em;\n  margin-bottom: .5em;\n  padding: .4em;\n  width: 30em }\n\n#queryArea .button {\n  vertical-align: top }\n\n#grid {\n  padding: 0 0 5em;\n  width: 100% }\n\n.buttonsGadget {\n  background-color: #f8f9fb;\n  border-top: 1px solid #e7e7e7;\n  font-size: 1em;\n  margin: 0;\n  padding: 1em 1.8em 0;\n  bottom: 0;\n  left: 0;\n  position: fixed;\n  right: 0;\n  z-index: 105 }\n\ninput.button,\n#queryArea .button,\n.buttonsGadget button {\n  background: none repeat scroll 0 0 #fff;\n  border: 1px solid #c9c9c9;\n  border-radius: 3px;\n  box-shadow: 0 -2px 3px #f3f3f3 inset;\n  color: #000;\n  cursor: pointer;\n  display: inline-block;\n  font-size: 0.95em;\n  font-weight: bold;\n  margin: 0 0.9em 0.9em 0;\n  padding: 0.3em 0.7em 0.4em;\n  text-decoration: none;\n  white-space: nowrap }\n\n.buttonsGadget label {\n    padding-right: 2em }\n\n.buttonsGadget .console {\n    color: #888;\n    display: inline-block;\n    float: right;\n    font-family: "Lucida Grande",Arial,Helvetica,Geneva,sans-serif;\n    font-size: 1em }\n\n/* Override HandsonTable styles*/\n.handsontable {\n  font-size: .9em }\n\n.handsontable .handsontable table {\n  box-shadow: none }\n\n.handsontable th {\n  background-color: #f4f4f4;\n  color: #0b447f;\n  font-weight: bold;\n  text-align: left }\n\n.handsontable th:hover {\n  cursor: pointer }\n\n.ht_clone_top.handsontable .htCore th {\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1) }\n\n.ht_clone_left.handsontable .htCore th {\n  box-shadow: 1px 0 1px rgba(0, 0, 0, 0.1) }\n\n.ht_clone_corner.handsontable .htCore th {\n  box-shadow: none }\n\n.handsontable th,\n.handsontable td {\n  border-color: #e7e7e7;\n  line-height: 30px }\n\n.handsontable td {\n  font-size: .9em }\n\n.handsontable tr:first-child th,\n.handsontable tr:first-child td {\n  border-top: none }\n\n.handsontable th:first-child,\n.handsontable td:first-child,\n.handsontable .htNoFrame + th,\n.handsontable .htNoFrame + td {\n  border-left: none }\n\n.handsontable thead tr:last-child th {\n  border-bottom: 1px solid #ccc }\n\n.handsontableInput {\n  box-shadow: none;\n  border-style: none;\n  color: #3077e5;\n  margin: 2px; }\n\n',""]);const i=r},99630:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(36761),r=n.n(o)()((function(e){return e[1]}));r.push([e.id,"/*!\n * Handsontable 0.11.4\n * Handsontable is a simple jQuery plugin for editable tables with basic copy-paste compatibility with Excel and Google Docs\n *\n * Copyright 2012-2014 Marcin Warpechowski\n * Licensed under the MIT license.\n * http://handsontable.com/\n *\n * Date: Tue Oct 07 2014 21:47:07 GMT+0200 (CEST)\n */\n\n.handsontable {\n  position: relative;\n}\n.handsontable .hide{\n  display: none;\n}\n.handsontable .relative {\n  position: relative;\n}\n\n.handsontable.htAutoColumnSize {\n  visibility: hidden;\n  left: 0;\n  position: absolute;\n  top: 0;\n}\n\n.handsontable table,\n.handsontable tbody,\n.handsontable thead,\n.handsontable td,\n.handsontable th,\n.handsontable div {\n  box-sizing: content-box;\n  -webkit-box-sizing: content-box;\n  -moz-box-sizing: content-box;\n}\n\n.handsontable table.htCore {\n  border-collapse: separate;\n  /*it must be separate, otherwise there are offset miscalculations in WebKit: http://stackoverflow.com/questions/2655987/border-collapse-differences-in-ff-and-webkit*/\n  position: relative;\n  /*this actually only changes appearance of user selection - does not make text unselectable\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -o-user-select: none;\n  -ms-user-select: none;\n  /*user-select: none; /*no browser supports unprefixed version*/\n  border-spacing: 0;\n  margin: 0;\n  border-width: 0;\n  table-layout: fixed;\n  width: 0;\n  outline-width: 0;\n  /* reset bootstrap table style. for more info see: https://github.com/handsontable/jquery-handsontable/issues/224 */\n  max-width: none;\n  max-height: none;\n}\n\n.handsontable col {\n  width: 50px;\n}\n\n.handsontable col.rowHeader {\n  width: 50px;\n}\n\n.handsontable th,\n.handsontable td {\n  border-right: 1px solid #CCC;\n  border-bottom: 1px solid #CCC;\n  height: 22px;\n  empty-cells: show;\n  line-height: 21px;\n  padding: 0 4px 0 4px;\n  /* top, bottom padding different than 0 is handled poorly by FF with HTML5 doctype */\n  background-color: #FFF;\n  vertical-align: top;\n  overflow: hidden;\n  outline-width: 0;\n  white-space: pre-line;\n  /* preserve new line character in cell */\n}\n\n.handsontable td.htInvalid {\n  background-color: #ff4c42 !important; /*gives priority over td.area selection background*/\n}\n\n.handsontable td.htNoWrap {\n  white-space: nowrap;\n}\n\n.handsontable th:last-child {\n  /*Foundation framework fix*/\n  border-right: 1px solid #CCC;\n  border-bottom: 1px solid #CCC;\n}\n\n.handsontable tr:first-child th.htNoFrame,\n.handsontable th:first-child.htNoFrame,\n.handsontable th.htNoFrame {\n  border-left-width: 0;\n  background-color: white;\n  border-color: #FFF;\n}\n\n.handsontable th:first-child,\n.handsontable td:first-child,\n.handsontable .htNoFrame + th,\n.handsontable .htNoFrame + td {\n  border-left: 1px solid #CCC;\n}\n\n.handsontable tr:first-child th,\n.handsontable tr:first-child td {\n  border-top: 1px solid #CCC;\n}\n\n.handsontable thead tr:last-child th {\n  border-bottom-width: 0;\n}\n\n.handsontable thead tr.lastChild th {\n  border-bottom-width: 0;\n}\n\n.handsontable th {\n  background-color: #EEE;\n  color: #222;\n  text-align: center;\n  font-weight: normal;\n  white-space: nowrap;\n}\n\n.handsontable thead th {\n  padding: 0;\n}\n\n.handsontable th.active {\n  background-color: #CCC;\n}\n\n.handsontable thead th .relative {\n  padding: 2px 4px;\n}\n\n/* plugins */\n\n.handsontable .manualColumnMover {\n  position: fixed;\n  left: 0;\n  top: 0;\n  background-color: transparent;\n  width: 5px;\n  height: 25px;\n  z-index: 999;\n  cursor: move;\n}\n\n.handsontable .manualRowMover {\n  position: fixed;\n  left: -4px;\n  top: 0;\n  background-color: transparent;\n  height: 5px;\n  width: 50px;\n  z-index: 999;\n  cursor: move;\n}\n\n.handsontable .manualColumnMoverGuide,\n.handsontable .manualRowMoverGuide {\n  position: fixed;\n  left: 0;\n  top: 0;\n  background-color: #CCC;\n  width: 25px;\n  height: 25px;\n  opacity: 0.7;\n  display: none;\n}\n\n.handsontable .manualColumnMoverGuide.active,\n.handsontable .manualRowMoverGuide.active {\n  display: block;\n}\n\n.handsontable .manualColumnMover:hover,\n.handsontable .manualColumnMover.active,\n.handsontable .manualRowMover:hover,\n.handsontable .manualRowMover.active{\n  background-color: #88F;\n}\n\n/* row + column resizer*/\n\n.handsontable .manualColumnResizer {\n  position: fixed;\n  top: 0;\n  cursor: col-resize;\n  z-index: 110;\n  width: 5px;\n  height: 25px;\n}\n\n.handsontable .manualRowResizer {\n  position: fixed;\n  left: 0;\n  cursor: row-resize;\n  z-index: 110;\n  height: 5px;\n  width: 50px;\n}\n\n.handsontable .manualColumnResizer:hover,\n.handsontable .manualColumnResizer.active,\n.handsontable .manualRowResizer:hover,\n.handsontable .manualRowResizer.active {\n  background-color: #AAB;\n}\n\n.handsontable .manualColumnResizerGuide {\n  position: fixed;\n  right: 0;\n  top: 0;\n  background-color: #AAB;\n  display: none;\n  width: 0;\n  border-right: 1px dashed #777;\n  margin-left: 5px;\n}\n\n.handsontable .manualRowResizerGuide {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  background-color: #AAB;\n  display: none;\n  height: 0;\n  border-bottom: 1px dashed #777;\n  margin-top: 5px;\n}\n\n.handsontable .manualColumnResizerGuide.active,\n.handsontable .manualRowResizerGuide.active {\n  display: block;\n}\n\n.handsontable .columnSorting:hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n\n/* border line */\n\n.handsontable .wtBorder {\n  position: absolute;\n  font-size: 0;\n}\n.handsontable .wtBorder.hidden{\n  display:none !important;\n}\n\n.handsontable td.area {\n  background-color: #EEF4FF;\n}\n\n/* fill handle */\n\n.handsontable .wtBorder.corner {\n  font-size: 0;\n  cursor: crosshair;\n}\n\n.handsontable .htBorder.htFillBorder {\n  background: red;\n  width: 1px;\n  height: 1px;\n}\n\n.handsontableInput {\n  border: 2px solid #5292F7;\n  outline-width: 0;\n  margin: 0;\n  padding: 1px 4px 0 2px;\n  font-family: inherit;\n  line-height: inherit;\n  font-size: inherit;\n  -webkit-box-shadow: 1px 2px 5px rgba(0, 0, 0, 0.4);\n  box-shadow: 1px 2px 5px rgba(0, 0, 0, 0.4);\n  resize: none;\n  /*below are needed to overwrite stuff added by jQuery UI Bootstrap theme*/\n  display: inline-block;\n  color: #000;\n  border-radius: 0;\n  background-color: #FFF;\n  /*overwrite styles potentionally made by a framework*/\n}\n\n.handsontableInputHolder {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 100;\n}\n\n.htSelectEditor {\n  -webkit-appearance: menulist-button !important;\n  position: absolute;\n}\n\n/*\nTextRenderer readOnly cell\n*/\n\n.handsontable .htDimmed {\n  color: #777;\n}\n\n.handsontable .htSubmenu :after{\n    content: '▶';\n    color: #777;\n    position: absolute;\n    right: 5px;\n}\n\n\n/*\nTextRenderer horizontal alignment\n*/\n.handsontable .htLeft{\n  text-align: left;\n}\n.handsontable .htCenter{\n  text-align: center;\n}\n.handsontable .htRight{\n  text-align: right;\n}\n.handsontable .htJustify{\n  text-align: justify;\n}\n/*\nTextRenderer vertical alignment\n*/\n.handsontable .htTop{\n  vertical-align: top;\n}\n.handsontable .htMiddle{\n  vertical-align: middle;\n}\n.handsontable .htBottom{\n  vertical-align: bottom;\n}\n\n/*\nTextRenderer placeholder value\n*/\n\n.handsontable .htPlaceholder {\n  color: #999;\n}\n\n/*\nAutocompleteRenderer down arrow\n*/\n\n.handsontable .htAutocompleteArrow {\n  float: right;\n  font-size: 10px;\n  color: #EEE;\n  cursor: default;\n  width: 16px;\n  text-align: center;\n}\n\n.handsontable td .htAutocompleteArrow:hover {\n  color: #777;\n}\n\n/*\nCheckboxRenderer\n*/\n\n.handsontable .htCheckboxRendererInput.noValue {\n  opacity: 0.5;\n}\n\n/*\nNumericRenderer\n*/\n\n.handsontable .htNumeric {\n  text-align: right;\n}\n\n/*\nComment For Cell\n*/\n.htCommentCell{\n  position: relative;\n}\n.htCommentCell:after{\n  content: '';\n  position: absolute;\n  top: 0;\n  right: 0;\n  border-left: 6px solid transparent;\n  border-top: 6px solid red;\n}\n\n/**\n * Handsontable in Handsontable\n */\n\n.handsontable .handsontable .wtHider {\n  padding: 0 0 5px 0;\n}\n\n.handsontable .handsontable table {\n  -webkit-box-shadow: 1px 2px 5px rgba(0, 0, 0, 0.4);\n  box-shadow: 1px 2px 5px rgba(0, 0, 0, 0.4);\n}\n\n/**\n* Autocomplete Editor\n*/\n.handsontable .autocompleteEditor.handsontable {\n  padding-right: 17px;\n}\n.handsontable .autocompleteEditor.handsontable.htMacScroll {\n  padding-right: 15px;\n}\n\n\n/**\n * Handsontable listbox theme\n */\n\n.handsontable.listbox {\n  margin: 0;\n}\n\n.handsontable.listbox .ht_master table {\n  border: 1px solid #ccc;\n  border-collapse: separate;\n  background: white;\n}\n\n.handsontable.listbox th,\n.handsontable.listbox tr:first-child th,\n.handsontable.listbox tr:last-child th,\n.handsontable.listbox tr:first-child td,\n.handsontable.listbox td {\n  border-width: 0;\n}\n\n.handsontable.listbox th,\n.handsontable.listbox td {\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.handsontable.listbox td.htDimmed {\n  cursor: default;\n  color: inherit;\n  font-style: inherit;\n}\n\n.handsontable.listbox .wtBorder {\n  visibility: hidden;\n}\n\n.handsontable.listbox tr td.current,\n.handsontable.listbox tr:hover td {\n  background: #eee;\n}\n\n.htContextMenu {\n  display: none;\n  position: absolute;\n  z-index: 1060; /*needs to be higher than 1050 - z-index for Twitter Bootstrap modal (#1569)*/\n}\n\n.htContextMenu .ht_clone_top,\n.htContextMenu .ht_clone_left,\n.htContextMenu .ht_clone_corner {\n  display: none;\n}\n\n.ht_clone_top {\n  z-index: 101;\n}\n\n.ht_clone_left {\n  z-index: 102;\n}\n\n.ht_clone_corner {\n  z-index: 103;\n}\n\n.htContextMenu table.htCore {\n  outline: 1px solid #bbb;\n}\n\n.htContextMenu .wtBorder {\n  visibility: hidden;\n}\n\n.htContextMenu table tbody tr td {\n  background: white;\n  border-width: 0;\n  padding: 4px 6px 0px 6px;\n  cursor: pointer;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.htContextMenu table tbody tr td:first-child {\n  border: 0;\n}\n\n.htContextMenu table tbody tr td.htDimmed{\n  font-style: normal;\n  color: #323232;\n}\n\n.htContextMenu table tbody tr td.current,\n.htContextMenu table tbody tr td.zeroclipboard-is-hover {\n  background: rgb(233, 233, 233);\n}\n\n.htContextMenu table tbody tr td.htSeparator {\n  border-top: 1px solid #bbb;\n  height: 0;\n  padding: 0;\n}\n\n.htContextMenu table tbody tr td.htDisabled {\n  color: #999;\n}\n\n.htContextMenu table tbody tr td.htDisabled:hover {\n  background: white;\n  color: #999;\n  cursor: default;\n}\n.htContextMenu table tbody tr td div{\n  padding-left: 10px;\n}\n.htContextMenu table tbody tr td div span.selected{\n  margin-top: -2px;\n  position: absolute;\n  left: 4px;\n}\n\n.handsontable td.htSearchResult {\n  background: #fcedd9;\n  color: #583707;\n}\n\n/*\nCell borders\n*/\n.htBordered{\n  /*box-sizing: border-box !important;*/\n  border-width: 1px;\n}\n.htBordered.htTopBorderSolid{\n  border-top-style: solid;\n  border-top-color: #000;\n}\n.htBordered.htRightBorderSolid{\n  border-right-style: solid;\n  border-right-color: #000;\n}\n.htBordered.htBottomBorderSolid{\n  border-bottom-style: solid;\n  border-bottom-color: #000;\n}\n.htBordered.htLeftBorderSolid{\n  border-left-style: solid;\n  border-left-color: #000;\n}\n\n.htCommentTextArea{\n  background-color: #FFFACD;\n  box-shadow: 1px 1px 2px #bbb;\n  font-family: 'Arial';\n  -webkit-box-shadow: 1px 1px 2px #bbb;\n  -moz-box-shadow: 1px 1px 2px #bbb;\n\n}\n\n/* Grouping indicators */\n.handsontable colgroup col.rowHeader.htGroupCol {\n  width: 25px !important;\n}\n.handsontable colgroup col.rowHeader.htGroupColClosest {\n  width: 30px !important;\n}\n\n.handsontable .htGroupIndicatorContainer {\n  background: #fff;\n  border: 0px;\n  padding-bottom: 0px;\n  vertical-align: bottom;\n  position: relative;\n}\n\n.handsontable thead .htGroupIndicatorContainer {\n  vertical-align: top;\n  border-bottom: 0px;\n}\n\n.handsontable tbody tr th:nth-last-child(2) {\n  border-right: 1px solid #CCC;\n}\n\n.handsontable thead tr:nth-last-child(2) th {\n  border-bottom: 1px solid #CCC;\n  padding-bottom: 5px;\n}\n\n\n.ht_clone_corner thead tr th:nth-last-child(2) {\n  border-right: 1px solid #CCC;\n}\n\n.htVerticalGroup {\n  height: 100%;\n}\n\n.htHorizontalGroup {\n  width: 100%;\n  height: 100%;\n}\n\n.htVerticalGroup:not(.htCollapseButton):after {\n  content: \"\";\n  height: 100%;\n  width: 1px;\n  display: block;\n  background: #ccc;\n  margin-left: 5px;\n}\n\n.htHorizontalGroup:not(.htCollapseButton):after {\n  content: \"\";\n  width: 100%;\n  height: 1px;\n  display: block;\n  background: #ccc;\n  margin-top: 20%;\n}\n\n.htCollapseButton {\n  width: 10px;\n  height: 10px;\n  line-height: 10px;\n  text-align: center;\n  border-radius: 5px;\n  border: 1px solid #f3f3f3;\n  -webkit-box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);\n  cursor: pointer;\n  margin-bottom: 3px;\n  position: relative;\n}\n\n.htCollapseButton:after {\n  content: \"\";\n  height: 300%;\n  width: 1px;\n  display: block;\n  background: #ccc;\n  margin-left: 4px;\n  position: absolute;\n  /*top: -300%;*/\n  bottom: 10px;\n}\n\n\nthead .htCollapseButton {\n  right: 5px;\n  position: absolute;\n  top: 5px;\n  background: #fff;\n}\n\nthead .htCollapseButton:after {\n  height: 1px;\n  width: 700%;\n  right: 10px;\n  top: 4px;\n}\n\n.handsontable tr th .htGroupStart:after {\n  background: transparent;\n  border-left: 1px solid #ccc;\n  border-top: 1px solid #ccc;\n  width: 5px;\n  position: relative;\n  top: 50%;\n}\n\n.handsontable thead tr th .htGroupStart:after {\n  background: transparent;\n  border-left: 1px solid #ccc;\n  border-top: 1px solid #ccc;\n  height: 5px;\n  width: 50%;\n  position: relative;\n  top: 0px;\n  left: 50%;\n}\n\n.handsontable .htGroupLevelTrigger {\n  -webkit-box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);\n  width: 15px;\n  height: 15px;\n  margin: 4px auto;\n  padding: 0px;\n  line-height: 15px;\n  cursor: pointer;\n}\n\n.handsontable tr th .htExpandButton {\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  line-height: 10px;\n  text-align: center;\n  border-radius: 5px;\n  border: 1px solid #f3f3f3;\n  -webkit-box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);\n  cursor: pointer;\n  top: 0px;\n  display: none;\n}\n\n.handsontable thead tr th .htExpandButton {\n  /*left: 5px;*/\n  top: 5px;\n}\n\n.handsontable tr th .htExpandButton.clickable {\n  display: block;\n}\n\n.handsontable col.hidden {\n  width: 0px !important;\n}\n\n.handsontable tr.hidden,\n.handsontable tr.hidden td,\n.handsontable tr.hidden th {\n  display: none;\n}\n\n/*WalkontableDebugOverlay*/\n\n.wtDebugHidden {\n  display: none;\n}\n\n.wtDebugVisible {\n  display: block;\n  -webkit-animation-duration: 0.5s;\n  -webkit-animation-name: wtFadeInFromNone;\n  animation-duration: 0.5s;\n  animation-name: wtFadeInFromNone;\n}\n\n@keyframes wtFadeInFromNone {\n  0% {\n    display: none;\n    opacity: 0;\n  }\n\n  1% {\n    display: block;\n    opacity: 0;\n  }\n\n  100% {\n    display: block;\n    opacity: 1;\n  }\n}\n\n@-webkit-keyframes wtFadeInFromNone {\n  0% {\n    display: none;\n    opacity: 0;\n  }\n\n  1% {\n    display: block;\n    opacity: 0;\n  }\n\n  100% {\n    display: block;\n    opacity: 1;\n  }\n}\n",""]);const i=r},73858:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var o=n(36761),r=n.n(o),i=n(75068),s=n.n(i),a=n(13121),l=n(4325),c=n(58616),u=r()((function(e){return e[1]})),h=s()(a.Z),d=s()(l.Z),f=s()(c.Z);u.push([e.id,"/*\nVersion: @@ver@@ Timestamp: @@timestamp@@\n*/\n.select2-container {\n    margin: 0;\n    position: relative;\n    display: inline-block;\n    /* inline-block for ie7 */\n    zoom: 1;\n    *display: inline;\n    vertical-align: middle;\n}\n\n.select2-container,\n.select2-drop,\n.select2-search,\n.select2-search input {\n  /*\n    Force border-box so that % widths fit the parent\n    container without overlap because of margin/padding.\n    More Info : http://www.quirksmode.org/css/box.html\n  */\n  -webkit-box-sizing: border-box; /* webkit */\n     -moz-box-sizing: border-box; /* firefox */\n          box-sizing: border-box; /* css3 */\n}\n\n.select2-container .select2-choice {\n    display: block;\n    height: 26px;\n    padding: 0 0 0 8px;\n    overflow: hidden;\n    position: relative;\n\n    border: 1px solid #aaa;\n    white-space: nowrap;\n    line-height: 26px;\n    color: #444;\n    text-decoration: none;\n\n    border-radius: 4px;\n\n    background-clip: padding-box;\n\n    -webkit-touch-callout: none;\n      -webkit-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n\n    background-color: #fff;\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #eee), color-stop(0.5, #fff));\n    background-image: -webkit-linear-gradient(center bottom, #eee 0%, #fff 50%);\n    background-image: -moz-linear-gradient(center bottom, #eee 0%, #fff 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#ffffff', endColorstr = '#eeeeee', GradientType = 0);\n    background-image: linear-gradient(to top, #eee 0%, #fff 50%);\n}\n\nhtml[dir=\"rtl\"] .select2-container .select2-choice {\n    padding: 0 8px 0 0;\n}\n\n.select2-container.select2-drop-above .select2-choice {\n    border-bottom-color: #aaa;\n\n    border-radius: 0 0 4px 4px;\n\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #eee), color-stop(0.9, #fff));\n    background-image: -webkit-linear-gradient(center bottom, #eee 0%, #fff 90%);\n    background-image: -moz-linear-gradient(center bottom, #eee 0%, #fff 90%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#eeeeee', GradientType=0);\n    background-image: linear-gradient(to bottom, #eee 0%, #fff 90%);\n}\n\n.select2-container.select2-allowclear .select2-choice .select2-chosen {\n    margin-right: 42px;\n}\n\n.select2-container .select2-choice > .select2-chosen {\n    margin-right: 26px;\n    display: block;\n    overflow: hidden;\n\n    white-space: nowrap;\n\n    text-overflow: ellipsis;\n    float: none;\n    width: auto;\n}\n\nhtml[dir=\"rtl\"] .select2-container .select2-choice > .select2-chosen {\n    margin-left: 26px;\n    margin-right: 0;\n}\n\n.select2-container .select2-choice abbr {\n    display: none;\n    width: 12px;\n    height: 12px;\n    position: absolute;\n    right: 24px;\n    top: 8px;\n\n    font-size: 1px;\n    text-decoration: none;\n\n    border: 0;\n    background: url("+h+") right top no-repeat;\n    cursor: pointer;\n    outline: 0;\n}\n\n.select2-container.select2-allowclear .select2-choice abbr {\n    display: inline-block;\n}\n\n.select2-container .select2-choice abbr:hover {\n    background-position: right -11px;\n    cursor: pointer;\n}\n\n.select2-drop-mask {\n    border: 0;\n    margin: 0;\n    padding: 0;\n    position: fixed;\n    left: 0;\n    top: 0;\n    min-height: 100%;\n    min-width: 100%;\n    height: auto;\n    width: auto;\n    opacity: 0;\n    z-index: 9998;\n    /* styles required for IE to work */\n    background-color: #fff;\n    filter: alpha(opacity=0);\n}\n\n.select2-drop {\n    width: 100%;\n    margin-top: -1px;\n    position: absolute;\n    z-index: 9999;\n    top: 100%;\n\n    background: #fff;\n    color: #000;\n    border: 1px solid #aaa;\n    border-top: 0;\n\n    border-radius: 0 0 4px 4px;\n\n    -webkit-box-shadow: 0 4px 5px rgba(0, 0, 0, .15);\n            box-shadow: 0 4px 5px rgba(0, 0, 0, .15);\n}\n\n.select2-drop.select2-drop-above {\n    margin-top: 1px;\n    border-top: 1px solid #aaa;\n    border-bottom: 0;\n\n    border-radius: 4px 4px 0 0;\n\n    -webkit-box-shadow: 0 -4px 5px rgba(0, 0, 0, .15);\n            box-shadow: 0 -4px 5px rgba(0, 0, 0, .15);\n}\n\n.select2-drop-active {\n    border: 1px solid #5897fb;\n    border-top: none;\n}\n\n.select2-drop.select2-drop-above.select2-drop-active {\n    border-top: 1px solid #5897fb;\n}\n\n.select2-drop-auto-width {\n    border-top: 1px solid #aaa;\n    width: auto;\n}\n\n.select2-drop-auto-width .select2-search {\n    padding-top: 4px;\n}\n\n.select2-container .select2-choice .select2-arrow {\n    display: inline-block;\n    width: 18px;\n    height: 100%;\n    position: absolute;\n    right: 0;\n    top: 0;\n\n    border-left: 1px solid #aaa;\n    border-radius: 0 4px 4px 0;\n\n    background-clip: padding-box;\n\n    background: #ccc;\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #ccc), color-stop(0.6, #eee));\n    background-image: -webkit-linear-gradient(center bottom, #ccc 0%, #eee 60%);\n    background-image: -moz-linear-gradient(center bottom, #ccc 0%, #eee 60%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#eeeeee', endColorstr = '#cccccc', GradientType = 0);\n    background-image: linear-gradient(to top, #ccc 0%, #eee 60%);\n}\n\nhtml[dir=\"rtl\"] .select2-container .select2-choice .select2-arrow {\n    left: 0;\n    right: auto;\n\n    border-left: none;\n    border-right: 1px solid #aaa;\n    border-radius: 4px 0 0 4px;\n}\n\n.select2-container .select2-choice .select2-arrow b {\n    display: block;\n    width: 100%;\n    height: 100%;\n    background: url("+h+') no-repeat 0 1px;\n}\n\nhtml[dir="rtl"] .select2-container .select2-choice .select2-arrow b {\n    background-position: 2px 1px;\n}\n\n.select2-search {\n    display: inline-block;\n    width: 100%;\n    min-height: 26px;\n    margin: 0;\n    padding-left: 4px;\n    padding-right: 4px;\n\n    position: relative;\n    z-index: 10000;\n\n    white-space: nowrap;\n}\n\n.select2-search input {\n    width: 100%;\n    height: auto !important;\n    min-height: 26px;\n    padding: 4px 20px 4px 5px;\n    margin: 0;\n\n    outline: 0;\n    font-family: sans-serif;\n    font-size: 1em;\n\n    border: 1px solid #aaa;\n    border-radius: 0;\n\n    -webkit-box-shadow: none;\n            box-shadow: none;\n\n    background: #fff url('+h+") no-repeat 100% -22px;\n    background: url("+h+") no-repeat 100% -22px, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, #fff), color-stop(0.99, #eee));\n    background: url("+h+") no-repeat 100% -22px, -webkit-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url("+h+") no-repeat 100% -22px, -moz-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url("+h+') no-repeat 100% -22px, linear-gradient(to bottom, #fff 85%, #eee 99%) 0 0;\n}\n\nhtml[dir="rtl"] .select2-search input {\n    padding: 4px 5px 4px 20px;\n\n    background: #fff url('+h+") no-repeat -37px -22px;\n    background: url("+h+") no-repeat -37px -22px, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, #fff), color-stop(0.99, #eee));\n    background: url("+h+") no-repeat -37px -22px, -webkit-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url("+h+") no-repeat -37px -22px, -moz-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url("+h+") no-repeat -37px -22px, linear-gradient(to bottom, #fff 85%, #eee 99%) 0 0;\n}\n\n.select2-drop.select2-drop-above .select2-search input {\n    margin-top: 4px;\n}\n\n.select2-search input.select2-active {\n    background: #fff url("+d+") no-repeat 100%;\n    background: url("+d+") no-repeat 100%, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, #fff), color-stop(0.99, #eee));\n    background: url("+d+") no-repeat 100%, -webkit-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url("+d+") no-repeat 100%, -moz-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url("+d+") no-repeat 100%, linear-gradient(to bottom, #fff 85%, #eee 99%) 0 0;\n}\n\n.select2-container-active .select2-choice,\n.select2-container-active .select2-choices {\n    border: 1px solid #5897fb;\n    outline: none;\n\n    -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, .3);\n            box-shadow: 0 0 5px rgba(0, 0, 0, .3);\n}\n\n.select2-dropdown-open .select2-choice {\n    border-bottom-color: transparent;\n    -webkit-box-shadow: 0 1px 0 #fff inset;\n            box-shadow: 0 1px 0 #fff inset;\n\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n\n    background-color: #eee;\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #fff), color-stop(0.5, #eee));\n    background-image: -webkit-linear-gradient(center bottom, #fff 0%, #eee 50%);\n    background-image: -moz-linear-gradient(center bottom, #fff 0%, #eee 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#eeeeee', endColorstr='#ffffff', GradientType=0);\n    background-image: linear-gradient(to top, #fff 0%, #eee 50%);\n}\n\n.select2-dropdown-open.select2-drop-above .select2-choice,\n.select2-dropdown-open.select2-drop-above .select2-choices {\n    border: 1px solid #5897fb;\n    border-top-color: transparent;\n\n    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #fff), color-stop(0.5, #eee));\n    background-image: -webkit-linear-gradient(center top, #fff 0%, #eee 50%);\n    background-image: -moz-linear-gradient(center top, #fff 0%, #eee 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#eeeeee', endColorstr='#ffffff', GradientType=0);\n    background-image: linear-gradient(to bottom, #fff 0%, #eee 50%);\n}\n\n.select2-dropdown-open .select2-choice .select2-arrow {\n    background: transparent;\n    border-left: none;\n    filter: none;\n}\nhtml[dir=\"rtl\"] .select2-dropdown-open .select2-choice .select2-arrow {\n    border-right: none;\n}\n\n.select2-dropdown-open .select2-choice .select2-arrow b {\n    background-position: -18px 1px;\n}\n\nhtml[dir=\"rtl\"] .select2-dropdown-open .select2-choice .select2-arrow b {\n    background-position: -16px 1px;\n}\n\n.select2-hidden-accessible {\n    border: 0;\n    clip: rect(0 0 0 0);\n    height: 1px;\n    margin: -1px;\n    overflow: hidden;\n    padding: 0;\n    position: absolute;\n    width: 1px;\n}\n\n/* results */\n.select2-results {\n    max-height: 200px;\n    padding: 0 0 0 4px;\n    margin: 4px 4px 4px 0;\n    position: relative;\n    overflow-x: hidden;\n    overflow-y: auto;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\nhtml[dir=\"rtl\"] .select2-results {\n    padding: 0 4px 0 0;\n    margin: 4px 0 4px 4px;\n}\n\n.select2-results ul.select2-result-sub {\n    margin: 0;\n    padding-left: 0;\n}\n\n.select2-results li {\n    list-style: none;\n    display: list-item;\n    background-image: none;\n}\n\n.select2-results li.select2-result-with-children > .select2-result-label {\n    font-weight: bold;\n}\n\n.select2-results .select2-result-label {\n    padding: 3px 7px 4px;\n    margin: 0;\n    cursor: pointer;\n\n    min-height: 1em;\n\n    -webkit-touch-callout: none;\n      -webkit-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n}\n\n.select2-results-dept-1 .select2-result-label { padding-left: 20px }\n.select2-results-dept-2 .select2-result-label { padding-left: 40px }\n.select2-results-dept-3 .select2-result-label { padding-left: 60px }\n.select2-results-dept-4 .select2-result-label { padding-left: 80px }\n.select2-results-dept-5 .select2-result-label { padding-left: 100px }\n.select2-results-dept-6 .select2-result-label { padding-left: 110px }\n.select2-results-dept-7 .select2-result-label { padding-left: 120px }\n\n.select2-results .select2-highlighted {\n    background: #3875d7;\n    color: #fff;\n}\n\n.select2-results li em {\n    background: #feffde;\n    font-style: normal;\n}\n\n.select2-results .select2-highlighted em {\n    background: transparent;\n}\n\n.select2-results .select2-highlighted ul {\n    background: #fff;\n    color: #000;\n}\n\n.select2-results .select2-no-results,\n.select2-results .select2-searching,\n.select2-results .select2-ajax-error,\n.select2-results .select2-selection-limit {\n    background: #f4f4f4;\n    display: list-item;\n    padding-left: 5px;\n}\n\n/*\ndisabled look for disabled choices in the results dropdown\n*/\n.select2-results .select2-disabled.select2-highlighted {\n    color: #666;\n    background: #f4f4f4;\n    display: list-item;\n    cursor: default;\n}\n.select2-results .select2-disabled {\n  background: #f4f4f4;\n  display: list-item;\n  cursor: default;\n}\n\n.select2-results .select2-selected {\n    display: none;\n}\n\n.select2-more-results.select2-active {\n    background: #f4f4f4 url("+d+') no-repeat 100%;\n}\n\n.select2-results .select2-ajax-error {\n    background: rgba(255, 50, 50, .2);\n}\n\n.select2-more-results {\n    background: #f4f4f4;\n    display: list-item;\n}\n\n/* disabled styles */\n\n.select2-container.select2-container-disabled .select2-choice {\n    background-color: #f4f4f4;\n    background-image: none;\n    border: 1px solid #ddd;\n    cursor: default;\n}\n\n.select2-container.select2-container-disabled .select2-choice .select2-arrow {\n    background-color: #f4f4f4;\n    background-image: none;\n    border-left: 0;\n}\n\n.select2-container.select2-container-disabled .select2-choice abbr {\n    display: none;\n}\n\n\n/* multiselect */\n\n.select2-container-multi .select2-choices {\n    height: auto !important;\n    height: 1%;\n    margin: 0;\n    padding: 0 5px 0 0;\n    position: relative;\n\n    border: 1px solid #aaa;\n    cursor: text;\n    overflow: hidden;\n\n    background-color: #fff;\n    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(1%, #eee), color-stop(15%, #fff));\n    background-image: -webkit-linear-gradient(top, #eee 1%, #fff 15%);\n    background-image: -moz-linear-gradient(top, #eee 1%, #fff 15%);\n    background-image: linear-gradient(to bottom, #eee 1%, #fff 15%);\n}\n\nhtml[dir="rtl"] .select2-container-multi .select2-choices {\n    padding: 0 0 0 5px;\n}\n\n.select2-locked {\n  padding: 3px 5px 3px 5px !important;\n}\n\n.select2-container-multi .select2-choices {\n    min-height: 26px;\n}\n\n.select2-container-multi.select2-container-active .select2-choices {\n    border: 1px solid #5897fb;\n    outline: none;\n\n    -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, .3);\n            box-shadow: 0 0 5px rgba(0, 0, 0, .3);\n}\n.select2-container-multi .select2-choices li {\n    float: left;\n    list-style: none;\n}\nhtml[dir="rtl"] .select2-container-multi .select2-choices li\n{\n    float: right;\n}\n.select2-container-multi .select2-choices .select2-search-field {\n    margin: 0;\n    padding: 0;\n    white-space: nowrap;\n}\n\n.select2-container-multi .select2-choices .select2-search-field input {\n    padding: 5px;\n    margin: 1px 0;\n\n    font-family: sans-serif;\n    font-size: 100%;\n    color: #666;\n    outline: 0;\n    border: 0;\n    -webkit-box-shadow: none;\n            box-shadow: none;\n    background: transparent !important;\n}\n\n.select2-container-multi .select2-choices .select2-search-field input.select2-active {\n    background: #fff url('+d+") no-repeat 100% !important;\n}\n\n.select2-default {\n    color: #999 !important;\n}\n\n.select2-container-multi .select2-choices .select2-search-choice {\n    padding: 3px 5px 3px 18px;\n    margin: 3px 0 3px 5px;\n    position: relative;\n\n    line-height: 13px;\n    color: #333;\n    cursor: default;\n    border: 1px solid #aaaaaa;\n\n    border-radius: 3px;\n\n    -webkit-box-shadow: 0 0 2px #fff inset, 0 1px 0 rgba(0, 0, 0, 0.05);\n            box-shadow: 0 0 2px #fff inset, 0 1px 0 rgba(0, 0, 0, 0.05);\n\n    background-clip: padding-box;\n\n    -webkit-touch-callout: none;\n      -webkit-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n\n    background-color: #e4e4e4;\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#eeeeee', endColorstr='#f4f4f4', GradientType=0);\n    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(20%, #f4f4f4), color-stop(50%, #f0f0f0), color-stop(52%, #e8e8e8), color-stop(100%, #eee));\n    background-image: -webkit-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eee 100%);\n    background-image: -moz-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eee 100%);\n    background-image: linear-gradient(to bottom, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eee 100%);\n}\nhtml[dir=\"rtl\"] .select2-container-multi .select2-choices .select2-search-choice\n{\n    margin: 3px 5px 3px 0;\n    padding: 3px 18px 3px 5px;\n}\n.select2-container-multi .select2-choices .select2-search-choice .select2-chosen {\n    cursor: default;\n}\n.select2-container-multi .select2-choices .select2-search-choice-focus {\n    background: #d4d4d4;\n}\n\n.select2-search-choice-close {\n    display: block;\n    width: 12px;\n    height: 13px;\n    position: absolute;\n    right: 3px;\n    top: 4px;\n\n    font-size: 1px;\n    outline: none;\n    background: url("+h+') right top no-repeat;\n}\nhtml[dir="rtl"] .select2-search-choice-close {\n    right: auto;\n    left: 3px;\n}\n\n.select2-container-multi .select2-search-choice-close {\n    left: 3px;\n}\n\nhtml[dir="rtl"] .select2-container-multi .select2-search-choice-close {\n    left: auto;\n    right: 2px;\n}\n\n.select2-container-multi .select2-choices .select2-search-choice .select2-search-choice-close:hover {\n  background-position: right -11px;\n}\n.select2-container-multi .select2-choices .select2-search-choice-focus .select2-search-choice-close {\n    background-position: right -11px;\n}\n\n/* disabled styles */\n.select2-container-multi.select2-container-disabled .select2-choices {\n    background-color: #f4f4f4;\n    background-image: none;\n    border: 1px solid #ddd;\n    cursor: default;\n}\n\n.select2-container-multi.select2-container-disabled .select2-choices .select2-search-choice {\n    padding: 3px 5px 3px 5px;\n    border: 1px solid #ddd;\n    background-image: none;\n    background-color: #f4f4f4;\n}\n\n.select2-container-multi.select2-container-disabled .select2-choices .select2-search-choice .select2-search-choice-close {    display: none;\n    background: none;\n}\n/* end multiselect */\n\n\n.select2-result-selectable .select2-match,\n.select2-result-unselectable .select2-match {\n    text-decoration: underline;\n}\n\n.select2-offscreen, .select2-offscreen:focus {\n    clip: rect(0 0 0 0) !important;\n    width: 1px !important;\n    height: 1px !important;\n    border: 0 !important;\n    margin: 0 !important;\n    padding: 0 !important;\n    overflow: hidden !important;\n    position: absolute !important;\n    outline: 0 !important;\n    left: 0px !important;\n    top: 0px !important;\n}\n\n.select2-display-none {\n    display: none;\n}\n\n.select2-measure-scrollbar {\n    position: absolute;\n    top: -10000px;\n    left: -10000px;\n    width: 100px;\n    height: 100px;\n    overflow: scroll;\n}\n\n/* Retina-ize icons */\n\n@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min-resolution: 2dppx)  {\n    .select2-search input,\n    .select2-search-choice-close,\n    .select2-container .select2-choice abbr,\n    .select2-container .select2-choice .select2-arrow b {\n        background-image: url('+f+") !important;\n        background-repeat: no-repeat !important;\n        background-size: 60px 40px !important;\n    }\n\n    .select2-search input {\n        background-position: 100% -21px !important;\n    }\n}\n",""]);const p=u},93379:(e,t,n)=>{"use strict";var o,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function s(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},o=[],r=0;r<e.length;r++){var a=e[r],l=t.base?a[0]+t.base:a[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var h=s(u),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==h?(i[h].references++,i[h].updater(d)):i.push({identifier:u,updater:g(d,t),references:1}),o.push(u)}return o}function l(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var i=n.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var s=r(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function h(e,t,n,o){var r=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var i=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function d(e,t,n){var o=n.css,r=n.media,i=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var f=null,p=0;function g(e,t){var n,o,r;if(t.singleton){var i=p++;n=f||(f=l(t)),o=h.bind(null,n,i,!1),r=h.bind(null,n,i,!0)}else n=l(t),o=d.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var r=s(n[o]);i[r].references--}for(var l=a(e,t),c=0;c<n.length;c++){var u=s(n[c]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}n=l}}}},4325:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o="data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPDw8IqKiuDg4EZGRnp6egAAAFhYWCQkJKysrL6+vhQUFJycnAQEBDY2NmhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAkKAAAALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQJCgAAACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQJCgAAACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkECQoAAAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkECQoAAAAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAkKAAAALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAkKAAAALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQJCgAAACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQJCgAAACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA=="},13121:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg=="},58616:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABQCAYAAADSm7GJAAADFElEQVR42u2dsW4TQRBAI0ERCYpDpAUdJX/hAlxQ3SekovYXIIvKEiBRIUF1lHT+BP+Br0TCCCsFLW5cmCS3jKWNNFrdZu+EOG7sd9Irkl0p8r3s7Mzs5XLinIMD5uhvAIIBwYBgaMnNNZvNyj0nkUvPQbAdtDjnCSU3zkGwEbS4iOToHATbE6wptVwEGyUhcaW/JkTbT7JcCpIse4K7SC4pk4wRXreE5ZUMUwezgh03lT0YyKKBOhjoZHUi1oCf7mkYohd9ACVFrj50HgxzmtQifKwF15L1fxC8UD9/EQxzHtxC8KiD4FHPNWMhuIACwd33h3kLuXOZ2mc4yyLRZS1kCG6H3uc2Mbl+LO9Z8FRwEaYINnpDdWKVIEdwC/QVC4l97nk6sUqwQHA3wbGEa9Sj4CCxSlIguHtZMg8Tq/4Edy/bLNXB4/G4FKJ1sJ7zTwTrhMuTU3f+NVqc84SSG+bEJR99a3BoaHERybE5HDYYFKwptVwEGyUhcRX5PufBRoiH4Tg80WFMcBfJPJNljfC6JSzzVCUrGMHswUAWDdTBQCcLOveiCdEBnCYBb9kBBAOCAcGAYEDw0XP0NwDBgGBAMCAYEAwIHvD7QzJhIlSCE2rF0o9lav4eBBt5JWHR8EfzdYATfgkFgg2g5J4LdSD1WrjyXDeIPkfwsNErV6/Y38J34aXwWHgkvBJWwi74RSgQPGD8nrtRwrbCe+G0YX9+KHzyc2rPRsgQPFzBEyVrJ7xLvNTsjvBBuFQreYLg4Qpeqv32m3BP+YxJPhUulOAKwQMl2HsnymNK8mudeCF44IK9rCcdBD8XrhBsS/BTBBOibwTPCNEGCFqSX4X7LeSeCRdK8BLBwy6TdIPjo3A3kUF/pkyy1+ioPVsv8KxB7gPhi7BVcndCpqYheKCtSt1+vBR+CG+EZ8IL4a3wU69cRYlgC4cN4UFD/LDBNVAi2NZxYa0Ixe5ikhFs58B/2SC48mOZUMYkI/jw/61diWDzgtOSEWxdcFpyhWDTgtOSEWxccCgZwfZJ9akrJXiKYEDwMfAHMSYobVemsdsAAAAASUVORK5CYII="}},t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={id:o,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(49735),n(11529);var e=n(93379),t=n.n(e),o=n(99630);t()(o.Z,{insert:"head",singleton:!1}),o.Z.locals,n(20367);var r=n(73858);t()(r.Z,{insert:"head",singleton:!1}),r.Z.locals;var i=n(74456);function s(e,t,n){if("string"==typeof t&&(t=t.split(".")),t.length>1){const o=t.shift();s(e[o]="[object Object]"===Object.prototype.toString.call(e[o])?e[o]:{},t,n)}else e[t[0]]=n}function a(e,t){if("string"==typeof t&&(t=t.split(".")),t.length>1){const n=t.shift();return a(e[n]="[object Object]"===Object.prototype.toString.call(e[n])?e[n]:{},t)}return e.hasOwnProperty(t[0])}t()(i.Z,{insert:"head",singleton:!1}),i.Z.locals,n(1646);class l{constructor(e){this.el=e,this._default=""}info(e){this.el.text(e)}error(e){this.el.text(e)}default(e){void 0!==e&&(this._default=e),this.el.text(this._default)}}n(42346);class c extends Handsontable.editors.Select2Editor{prepare(e,t,n,o,r,i){const s=i.widget,a=i.connection;Handsontable.editors.TextEditor.prototype.prepare.apply(this,arguments);const l=i.multiple;this.options={query:e=>{this.query(a,s.properties,e.term).then((t=>{e.callback({results:t})}))},dropdownAutoWidth:!0,allowClear:!0,width:"resolve",minimumInputLength:i.minimumInputLength||0,formatResult:this.resultFormatter.bind(this),formatSelection:this.selectionFormatter.bind(this),multiple:l,placeholder:"Select a value",initSelection:this.initSelection(l).bind(this),id:this.getEntryId}}open(){super.open(),this.$textarea.on("selected",this.onSelected.bind(this)),this.$textarea.on("select2-selected",this.onSelected.bind(this)),this.$textarea.on("select2-removed",this.onRemoved.bind(this))}onSelected(){}onRemoved(){}resultFormatter(e){return this.formatter(e)}selectionFormatter(e){return this.formatter(e)}initSelection(e){return e?(e,t)=>t(e.val().split(",").map((e=>({id:e,text:this.getSelectionText(e)})))):(e,t)=>t({id:e.val(),text:this.getSelectionText(e.val())})}getSelectionText(e){return e}getEntryId(e){return e.id}query(){}}class u{constructor(e,t){this.opId=t,this.conn=e,this._params={},this._headers={}}get params(){return this._params}get headers(){return this._headers}set depth(e){this.headers.depth=e}enrich(e,...t){this.headers[`enrichers-${e}`]=t.join(",")}fetch(e,...t){this.headers[`fetch-${e}`]=t.join(",")}translate(e,...t){this.headers[`translate-${e}`]=t.join(",")}execute(){return this.conn.operation(this.opId).params(this._params).execute({headers:this._headers,resolveWithFullResponse:!0}).then((e=>e.text())).then((e=>{try{return e?JSON.parse(e):{}}catch(e){return{error:"Invalid json"}}}))}}class h extends u{constructor(e,t,n){super(e,"Directory.SuggestEntries"),this.directoryName=t,this.language=n}get directoryName(){return this.params.directoryName}set directoryName(e){this.params.directoryName=e}get translateLabels(){return this.params.translateLabels}set translateLabels(e){this.params.translateLabels=e}set dbl10n(e){this.params.dbl10n=e}set localize(e){this.params.localize=e}set language(e){this.params.lang=e}entries(){return this.search()}search(e){return this.params.searchTerm=e,this.execute()}}function d(e,t="en"){if(e.properties){let n="";return e.properties.parent&&(n=`${d(e.properties.parent,t)}/`),n+=e.properties[`label_${t}`]||e.properties.label||e.properties.id,n}return e.text||e}class f extends c{prepare(e,t,n,o,r,i){this._labels={};const s=Array.isArray(r)?r.map(this.prepareEntity.bind(this)):this.prepareEntity(r);super.prepare(e,t,n,o,s,i)}prepareEntity(e){if(!e)return;if(this._isDirectoryEntry="directoryEntry"===e["entity-type"],!this._isDirectoryEntry)return e;let t;return t=e.properties.parent?`${"object"==typeof e.properties.parent?e.properties.parent.properties.id:e.properties.parent}/${e.properties.id}`:e.properties.id,this.cellLabels[t]=this.cellLabels[t]||d(e,this.language),t}saveValue(e,t){let n=e[0][0];n?this._isDirectoryEntry&&(n=n.split(",").map((e=>({"entity-type":"directoryEntry",directoryName:this.directoryName,id:e,properties:{id:e}}))),this.column.multiple||(n=n[0])):n=this.column.multiple?[]:null,super.saveValue([[n]],t)}query(e,t,n){const o=new h(e);return Object.assign(o,t),o.language=this.language||"en",o.search(n)}onSelected(e){this.cellLabels[e.choice.computedId]=e.choice.absoluteLabel}get cellMeta(){return this.instance.getCellMeta(this.row,this.col)}get cellLabels(){return this.cellMeta._labels=this.cellMeta._labels||{}}get language(){return this.instance.getSettings().language||"en"}get column(){return this.cellProperties}get widget(){return this.column.widget}get field(){return this.widget.field}get directoryName(){return this.widget.properties.directoryName}get isDbl10n(){return!!this.widget.properties.dbl10n}get sourceData(){return this.instance.getSourceDataAtRow(this.row)}resultFormatter(e){return e.displayLabel}formatter(e){let t=this.cellLabels[e.id]||e.absoluteLabel;return!t&&this.isDbl10n&&(t=d(e,this.language)),t||e.text}getEntryId(e){return e.computedId?e.computedId:e.id}}function p(e,t,n,o,r,i,s){if(i){const t=e.getSettings().language||"en";Array.isArray(i)||(i="string"==typeof i?i.split(","):[i]);const r=e.getCellMeta(n,o)._labels;arguments[5]=i.map((e=>{const n=e.properties?e.properties.id:e;return r&&r[n]?r[n]:d(e,t)})).join(",")}s.defaultRenderer.apply(this,arguments)}class g extends u{constructor(e){super(e,"Document.PageProvider")}set nxql(e){this.params.language="nxql",this.params.query=e}set namedParameters(e){this.params.namedParameters=e}set queryParameters(e){this.params.queryParams=e}set pageProvider(e){this.params.providerName=e}get page(){return this.params.currentPageIndex}set page(e){this.params.currentPageIndex=e}set pageSize(e){this.params.pageSize=e}set sortBy(e){this.params.sortBy=e.join(",")}set sortOrder(e){this.params.sortOrder=e.join(",")}run(){return this.execute()}}function m(e,t,n,o,r,i,s){i&&(Array.isArray(i)||(i=[i]),arguments[5]=i.map((e=>e.uid)).join(",")),s.defaultRenderer.apply(this,arguments)}function y(e,t,n,o,r,i,s){i&&(Array.isArray(i)||(i=[i]),arguments[5]=i.map((e=>e.id)).join(",")),s.defaultRenderer.apply(this,arguments)}Handsontable.editors.registerEditor("directory",f),Handsontable.editors.registerEditor("document",class extends c{prepare(e,t,n,o,r,i){const s=Array.isArray(r)?r.map((e=>this.getEntryId(e))):this.getEntryId(r);super.prepare(e,t,n,o,s,i)}query(e,t,n){const o=new g(e);return Object.assign(o.params,t),o.params.searchTerm=n,o.pageProvider=t&&t.pageProviderName||"default_document_suggestion",o.page=0,o.pageSize=20,o.run().then((e=>e.entries))}formatter(e){return e.text||e.title}getEntryId(e){return e.uid}saveValue(e,t){let n=e[0][0];n?(n=n.split(",").map((e=>({"entity-type":"document",uid:e}))),this.cellProperties.multiple||(n=n[0])):n=this.cellProperties.multiple?[]:null,super.saveValue([[n]],t)}}),Handsontable.editors.registerEditor("user",class extends c{prepare(e,t,n,o,r,i){const s=Array.isArray(r)?r.map((e=>this.getEntryId(e))):this.getEntryId(r);super.prepare(e,t,n,o,s,i)}getSelectionText(e){return e.startsWith("user:")||e.startsWith("group:")?e.split(":")[1]:e}saveValue(e,t){let n=e[0][0];n?(n=n.split(",").map((e=>{let t="user";if(e.startsWith("user:")||e.startsWith("group:")){const n=e.split(":");t=n[0],e=n[1]}return{"entity-type":t,id:e}})),this.cellProperties.multiple||(n=n[0])):n=this.cellProperties.multiple?[]:null,super.saveValue([[n]],t)}getEntryId(e){return e["entity-type"]?`${e["entity-type"]}:${e.id}`:e.prefixed_id||e.id}query(e,t,n){const o=new u(e,"UserGroup.Suggestion");return Object.assign(o.params,t),o.params.searchTerm=n,this.widgetProperties.userSuggestionSearchType&&(o.params.searchType=this.widgetProperties.userSuggestionSearchType),o.execute()}formatter(e){return e.text||e.displayLabel}get widgetProperties(){return this.cellProperties.widget.properties.any||{}}});const v={listing_coverage:{type:"suggestOneDirectory",properties:{any:{dbl10n:!0,directoryName:"l10ncoverage"}}},listing_subjects:{type:"suggestManyDirectory",properties:{any:{dbl10n:!0,directoryName:"l10nsubjects"}}},listing_version:{type:"text",field:"versionLabel"},listing_last_contributor:{type:"singleUserSuggestion",renderer:y},listing_title_link:{type:"text"},listing_thumbnail:{field:"thumb:thumbnail"}},b={text:{type:"text"},textarea:{type:"text"},date:{type:"date"},datetime:{type:"date",dateFormat:"yy-mm-ddT00:00:00.000"},numeric:{type:"numeric"},int:{type:"numeric"},selectOneDirectory:{renderer:p,editor:"directory"},selectManyDirectory:{renderer:p,editor:"directory",multiple:!0},suggestOneDirectory:{renderer:p,editor:"directory"},suggestManyDirectory:{renderer:p,editor:"directory",multiple:!0},singleUserSuggestion:{renderer:y,editor:"user"},multipleUsersSuggestion:{renderer:y,editor:"user",multiple:!0},singleDocumentSuggestion:{renderer:m,editor:"document",minimumInputLength:3},multipleDocumentsSuggestion:{renderer:m,editor:"document",multiple:!0,minimumInputLength:3},image:{renderer:(e,t,n,o,r,i,s)=>{if(i&&i.data){const e=document.createElement("img");e.src=i.data,s.width&&e.setAttribute("width",s.height),s.height&&e.setAttribute("height",s.height),Handsontable.Dom.empty(t),t.appendChild(e)}return t},height:"150px",readOnly:!0}},w={"dc:created":{widget:{readOnly:!0}},"dc:modified":{widget:{readOnly:!0}},"dc:creator":{widget:{readOnly:!0}},"dc:lastContributor":{widget:{readOnly:!0}},"dc:contributors":{widget:{readOnly:!1}},currentLifeCycleState:{widget:{readOnly:!0},field:"state"},type:{widget:{readOnly:!0},field:"type"},versionLabel:{widget:{readOnly:!0},field:"versionLabel"},"dc:nature":{properties:{dbl10n:!1,localize:!0}},"thumb:thumbnail":{widget:{readOnly:!0,type:"image"}}};class C{constructor(e,t,n,o=Handsontable.renderers.TextRenderer){Object.assign(this,{connection:e,def:t,widget:n,defaultRenderer:o}),"data"===this.widget.field&&(this.widget.field=this.def.properties.any.sortPropertyName),v[this.widget.name]&&Object.assign(this.widget,v[n.name]);const r=this.widget.field;if(w[r]&&w[r].widget&&Object.assign(this.widget,w[r].widget),w[r]&&w[r].properties&&Object.assign(this.widget.properties,w[r].properties),b[this.widget.type]){const e=this.widget.type;delete this.widget.type,Object.assign(this.widget,b[e])}Object.assign(this,this.widget),this.renderer?this.renderer=this.renderer.bind(this):this.renderer=o}get data(){return this.field?w[this.field]&&w[this.field].field?w[this.field].field:`properties.${this.field}`:null}get header(){let e=this.def.properties.any.label||this.field;return this.def.properties.any.useFirstWidgetLabelAsColumnHeader&&(e=this.widget.label||this.widget.labels.any),e}get hasSupportedWidgetType(){return!!b[this.widget.type]}}const x="/config/schemas/";class S extends class{constructor(e,t=""){this.path=t,this.conn=e,this._params={},this._headers={}}get params(){return this._params}get headers(){return this._headers}set enrichers(e){this.headers["enrichers-document"]=e.join(",")}execute(e="get",t,n={}){return this.conn.request(t||this.path).repositoryName(void 0).headers(this._headers).queryParams(Object.assign({},this._params,n))[e]()}}{constructor(e){super(e,x)}fetch(e){const t=[];return this.execute().then((n=>{for(const o of n){const n=o["@prefix"]||o.name;-1!==e.indexOf(n)&&(t[n]={name:o.name})}const o=e.map((e=>this._fetchFieldsBySchema(t[e].name)));return Promise.all(o).then((e=>{for(const n of e){const e=n["@prefix"]||n.name;t[e].fields=n.fields}return t}))}))}_fetchFieldsBySchema(e){return this.execute("get",`${x}/${e}`,{"fetch.schema":"fields"})}}var T=n(95081);class E{constructor(e,t,n,o,r){this.container=e,this.connection=t,this._data=[],this.options={data:this._data,autoColumnSize:!1,colWidths:200,stretchH:"all",rowHeaders:!0,manualColumnResize:!0,startRows:0,currentRowClassName:"currentRow",currentColClassName:"currentCol",contextMenu:["undo","redo"],afterChange:this.onChange.bind(this),beforeAutofill:this.beforeAutofill.bind(this),beforeCopy:this.beforeCopy.bind(this),search:!0,cells:this.createCell.bind(this),language:r},this.query=new g(t),this.query.enrich("document","permissions"),this.query.fetch("document","properties","versionLabel"),this.query.fetch("directoryEntry","parent"),this.query.depth="root",this.query.translate("directoryEntry","label"),this.query.pageProvider=o;const i=[];for(const e of n){const t=e.field.indexOf(":")>-1?e.field.split(":")[0]:void 0;t&&-1===i.indexOf(t)&&i.push(t)}new S(t).fetch(i).then((e=>{const o=n.map((t=>{const n={def:{properties:{any:{sortPropertyName:t.field,label:t.label}}},widget:{field:t.field}};let o;if(t.field.indexOf(":")>-1){const[n,r]=t.field.split(":");o=e[n].fields[r]||void 0,o="string"==typeof o?{type:o}:o}if(o){o.type.endsWith("[]")&&(n.widget.multiple=!0);const e=o.itemConstraints||o.constraints;if(e)for(const t of e)switch(t.name){case"documentResolver":n.widget.type="string[]"===o.type?"multipleDocumentsSuggestion":"singleDocumentSuggestion";break;case"directoryResolver":n.widget.type="string[]"===o.type?"suggestManyDirectory":"suggestOneDirectory",n.widget.properties={dbl10n:!0,directoryName:t.parameters.directory};break;case"userManagerResolver":let e;n.widget.type="string[]"===o.type?"multipleUsersSuggestion":"singleUserSuggestion","true"===t.parameters.includeGroups&&"true"===t.parameters.includeUsers?e="USER_GROUP_TYPE":"true"===t.parameters.includeUsers?e="USER_TYPE":"true"===t.parameters.includeGroups&&(e="GROUP_TYPE"),n.widget.properties={any:{userSuggestionSearchType:e}}}}return n}));this.columns=o.map((e=>new C(t,e.def,e.widget,this.dirtyRenderer.bind(this))))})),this.container.handsontable(this.options),this.ht=this.container.data("handsontable")}get data(){return this._data}set data(e){this._data=e,this.ht.loadData(this._data)}getDataAtRow(e){return this.ht?this.ht.getSourceDataAtRow(e):null}get columns(){return this._columns}set columns(e){this._columns=e,this._columnsByField={};for(const t of e)this._columnsByField[t.data]=t;this._update()}createCell(e){const t={},n=this.getDataAtRow(e),o=n&&n.contextParameters&&n.contextParameters.permissions;return o&&-1===o.indexOf("Write")&&(t.readOnly=!0),t}set nxql(e){this.queryParameters=[e]}set queryParameters(e){this.query.queryParameters=e}set namedParameters(e){this.query.namedParameters=e}set sortInfos(e){this.query.sortBy=e.map((e=>e.sortColumn)),this.query.sortOrder=e.map((e=>e.sortAscending?"asc":"desc"))}_fetch(){return this.query.run().then((e=>{if(Array.prototype.push.apply(this.data,e.entries),this.ht.updateSettings({maxRows:this.data.length}),e.isNextPageAvailable)return this.query.page++,this._fetch()}))}update(){return this.data.length=0,this._dirty={},this.query.page=0,this.ht.clearUndo(),this._fetch()}save(){return Promise.all(Object.keys(this._dirty).map((e=>this.connection.request(`/id/${e}`).put({body:this._dirty[e]}).then((()=>(delete this._dirty[e],e))).catch((t=>{throw this._dirty[e]._error=t,new Error(t)}))))).catch((e=>{console.error(e)})).then((e=>(this.ht.clearUndo(),this.ht.render(),e)))}onChange(e,t){if("loadData"!==t){if(null!==e){for(let t=0;t<e.length;t++){let[n,o,r,i]=e[t];if(r===i)continue;const a=this.data[n].uid,l=this._dirty[a]=this._dirty[a]||{"entity-type":"document",uid:a};this._columnsByField[o].multiple&&!Array.isArray(i)&&(i=i?i.split(","):[]),s(l,o,i)}this.autosave&&this.save(),this.ht.render()}}else this._dirty={}}beforeAutofill(e,t,n){const o=this.ht.getInstance(),r=o.getActiveEditor();if(!(r&&r instanceof f))return;if(!n&&(0===n.length||0===n[0].length))return void console.warn("It is not expected to have an empty data set.");const i=new WalkontableCellRange(void 0,o.getSelectedRange().highlight,e).getDirection();"S"===i.charAt(0)&&(n=n.reverse());const s=this._getCornerCell(o.getSelectedRange().from,o.getSelectedRange().to,i);for(let i=e.row;i<=t.row;i++)for(let a=e.col;a<=t.col;a++){const t=(i-e.row)%n.length,l=(a-e.col)%n[0].length,c=n[t][l];if(!r.formatter(c)){const e=c.properties&&c.properties.id||c,n=o.getCellMeta(i,a);n._labels||(n._labels={});const r=o.getCellMeta(s.row+t,s.col+l);r._labels&&(n._labels[e]=r._labels[e])}}}beforeCopy(e,t,n){if("object"==typeof e){const o=this.ht.getCellEditor(t,this.ht.propToCol(n)),r=Handsontable.editors.getEditor(o,this.ht);r instanceof c&&(e=Array.isArray(e)?e.map(r.getEntryId):r.getEntryId(e))}return e}_getCornerCell(e,t,n){const o=new WalkontableCellRange(void 0,e,t);switch(n){case"NW-SE":return o.getBottomRightCorner();case"NE-SW":return o.getBottomLeftCorner();case"SE-NW":return o.getTopLeftCorner();case"SW-NE":return o.getTopRightCorner()}}dirtyRenderer(e,t,n,o,r){Handsontable.renderers.TextRenderer.apply(this,arguments);const i=this.getDataAtRow(n);if(i&&this._dirty[i.uid]){let e="#e2f1ff";this._dirty[i.uid].hasOwnProperty("_error")?e="#f33":a(this._dirty[i.uid],r)&&(e="#afd8ff"),T(t).css({background:e})}}destroy(){this.ht.destroy()}_update(){const e=T.extend({},this.options);e.colHeaders=this.columns.map((e=>e.header)),e.columns=this.columns,this.ht.updateSettings(e)}}function A(e){const t=(window.parent||window).nuxeo;return t&&t.I18n&&t.I18n.translate&&t.I18n.translate(`spreadsheet.${e}`)||e}Handsontable.renderers.registerRenderer("readOnly",(function(e,t){Handsontable.renderers.TextRenderer.apply(this,arguments),t.style.color="green",t.style.background="#CEC"}));var k=n(95081);let R,O;new Promise((e=>{if(window.location.search){const n=function(){const e={},t=window.location.search.replace("?","");if(0===t.length)return e;const n=t.split("&");for(const t of n){let[n,o]=t.split("=");o=o.replace(/\+/g," "),e[n]=decodeURIComponent(o)}return e}();e(JSON.parse((t=n.cv,decodeURIComponent(atob(t).split("").map((e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join("")))))}else window.addEventListener("message",(({data:t})=>e(t)));var t})).then((function({baseURL:e="/nuxeo",resultColumns:t,pageProviderName:n,queryParameters:o,searchDocument:r,sortInfos:i}){const s=new Nuxeo({baseURL:e});return s.schemas(["*"]),O=new l(k("#console")),k("#close").click((()=>{window.parent.jQuery&&window.parent.jQuery.fancybox&&window.parent.jQuery.fancybox.close()})),k("#close").toggle(!0),k("#save").click((()=>{O.info(A("saving")),R.save().then((e=>{if(!e)return void O.error(A("failedSave"));let t;t=0===e.length?A("upToDate"):`${e.length} ${A("rowsSaved")}`,O.info(t)}))})),k("input[name=autosave]").click((function(){R.autosave=k(this).is(":checked"),R.autosave?O.default(A("autoSave")):O.default("")})),k(document).ajaxStart((()=>k("#loading").show())),k(document).ajaxStop((()=>k("#loading").hide())),s.connect().then((()=>{const e=navigator.language&&navigator.language.slice(0,2)||"en";if(t&&0!==t.length||(t=[{label:"Title",field:"dc:title"},{label:"Modified",field:"dc:modified"},{label:"Last Contributor",field:"dc:lastContributor"},{label:"State",field:"currentLifeCycleState"}]),window.spreadsheet=R=new E(k("#grid"),s,t,n,e),o&&(R.queryParameters=o),r){const e={};for(const t in r.properties){const n=r.properties[t];void 0!==n.length&&0===n.length||(e[t]="string"==typeof n?n:JSON.stringify(n))}R.namedParameters=e}return i&&i.length>0&&(R.sortInfos=i),R.update().catch((e=>O.error(e.message)))}))}))})()})();